

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial &mdash; FIBTracking 0.2.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="FIBTracking 0.2.0 documentation" href="index.html"/>
        <link rel="next" title="Module Method Summary" href="api_doc.html"/>
        <link rel="prev" title="Installation" href="install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> FIBTracking
          

          
          </a>

          
            
            
              <div class="version">
                0.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#loading-and-reviewing-images">Loading and Reviewing Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tracking-fiducials">Tracking Fiducials</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualizing-fiducial-tracking-data">Visualizing Fiducial Tracking Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calculating-slice-thicknesses">Calculating Slice Thicknesses</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#global-slice-thickness">Global Slice Thickness</a></li>
<li class="toctree-l3"><a class="reference internal" href="#individual-slice-thicknesses">Individual Slice Thicknesses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#saving-importing-results">Saving/Importing Results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_doc.html">Module Method Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_doc.html#module-fibtracking.fibtracking">Module API Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">FIBTracking</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Tutorial</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/tutorial.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will run through how to load a FIB/SEM image stack,
identify two fiducials, track them from slice to slice to see how they change,
and get a measurement of</p>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Download the image files for the tutorial and extract them to a folder.
They can be found <a class="reference external" href="https://umd.box.com/shared/static/zypc0boalvrrjphfxim42632mjjgdejh.zip">here</a>
(719 MB download).</p>
</li>
<li><p class="first">Install the dependencies and the <a class="reference internal" href="api_doc.html#module-fibtracking.fibtracking" title="fibtracking.fibtracking"><code class="xref py py-mod docutils literal"><span class="pre">fibtracking</span></code></a> module
following the <a class="reference internal" href="install.html"><span class="doc">Installation</span></a> instructions.</p>
</li>
<li><p class="first">Fire up a Python (or Jupyter or Notebook) instance, and import the module
(along with <code class="docutils literal"><span class="pre">matplotlib</span></code> if you are using Jupyter):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">qt4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">fibtracking</span> <span class="kn">import</span> <span class="n">fibtracking</span> <span class="k">as</span> <span class="n">ft</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="loading-and-reviewing-images">
<h2>Loading and Reviewing Images<a class="headerlink" href="#loading-and-reviewing-images" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Run the following code to load the images into memory. The
<a class="reference internal" href="api_doc.html#fibtracking.fibtracking.readimages" title="fibtracking.fibtracking.readimages"><code class="xref py py-meth docutils literal"><span class="pre">readimages()</span></code></a> method will pop-up a window
asking for the directory containing the images. Click OK once you have chosen.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">images</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">readimages</span><span class="p">()</span>
<span class="go">    Reading 308 images from C:\tmp\TiffImages:</span>
</pre></div>
</div>
</li>
<li><p class="first">The <a class="reference internal" href="api_doc.html#module-fibtracking.fibtracking" title="fibtracking.fibtracking"><code class="xref py py-mod docutils literal"><span class="pre">fibtracking</span></code></a> module provides a simple interactive
image browser using OpenCV tools. It can be invoked using the
<a class="reference internal" href="api_doc.html#fibtracking.fibtracking.image_browser" title="fibtracking.fibtracking.image_browser"><code class="xref py py-meth docutils literal"><span class="pre">image_browser()</span></code></a> method, and controlled
using the keyboard shortcuts included in the title bar. Options are provided
for labeling the image stack with the image index, as well as making the
images smaller for easier viewing.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ft</span><span class="o">.</span><span class="n">image_browser</span><span class="p">(</span><span class="n">images</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">downsize</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">labelimages</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/image_browser.png"><img alt="FIBTracking Image Browser" src="_images/image_browser.png" style="width: 500px;" /></a>
</div>
</li>
<li><p class="first">Similarly, there is an <a class="reference internal" href="api_doc.html#fibtracking.fibtracking.export_video" title="fibtracking.fibtracking.export_video"><code class="xref py py-meth docutils literal"><span class="pre">export_video()</span></code></a>
method that will use <code class="docutils literal"><span class="pre">OpenCV</span></code>&#8216;s video export capability to save
the image stack as an animated video. This method is somewhat brittle
and the codec support is different on every machine (depending on how OpenCV
was compiled), but I&#8217;ve been able to get it working on both Windows and
Linux systems.</p>
<p>Call the method giving the image list, a file name, and the frame rate
(among some other options, similar to <a class="reference internal" href="api_doc.html#fibtracking.fibtracking.image_browser" title="fibtracking.fibtracking.image_browser"><code class="xref py py-meth docutils literal"><span class="pre">image_browser()</span></code></a>):
If no value is given for <code class="docutils literal"><span class="pre">fourcc</span></code>, it should open a window asking for which
codec to use. On Windows, the <cite>Microsoft Video 1</cite> codec seems to work best.
On Linux, any supported codec should work.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fibtracking</span><span class="o">.</span><span class="n">export_video</span><span class="p">(</span><span class="n">im_list</span><span class="o">=</span><span class="n">images</span><span class="p">,</span>
<span class="gp">... </span>                         <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;test_video.avi&#39;</span><span class="p">,</span>
<span class="gp">... </span>                         <span class="n">fps</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<span class="gp">... </span>                         <span class="n">labelimages</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The method will also suggest an <a class="reference external" href="https://www.ffmpeg.org/"><code class="docutils literal"><span class="pre">ffmpeg</span></code></a> call that can be used to reduce
the resulting file size (for sharing with others).
This results in an output like the following:</p>
<iframe width="500" height="400" align="center" src="https://www.youtube.com/embed/XJjNLsiu2jE" frameborder="1" allowfullscreen></iframe></li>
</ol>
</div>
<div class="section" id="tracking-fiducials">
<h2>Tracking Fiducials<a class="headerlink" href="#tracking-fiducials" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Importantly, the module needs to know how big a pixel is in the horizontal
dimension. As I have experience with FEI and Tescan FIB/SEM systems, support
for reading this value from those files is implemented. For FEI, the value
is read directly from the image. For Tescan, it is read from the header file
that is saved with every outputted image:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pixWidth</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">get_tescan_pixel_width</span><span class="p">(</span><span class="s1">&#39;slice-00001-png.hdr&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="c1"># this image is not provided in the dataset, and is just for illustration purposes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">pixWidth</span><span class="p">)</span>
<span class="go">    2.4002e-08</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pixWidth</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">get_fei_pixel_width</span><span class="p">(</span><span class="s1">&#39;EBeam - SliceImage - 001.tif&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">pixWidth</span><span class="p">)</span>
<span class="go">    2.13166e-08</span>
</pre></div>
</div>
</li>
<li><p class="first">With the pixel width known, we can track fiducials now using the
<a class="reference internal" href="api_doc.html#fibtracking.fibtracking.trackfiducials" title="fibtracking.fibtracking.trackfiducials"><code class="xref py py-meth docutils literal"><span class="pre">trackfiducials()</span></code></a> method. See the documentation
for details. Most important is the <code class="docutils literal"><span class="pre">im_number</span></code> parameter. It controls
what image is displayed for selecting the fiducial (useful if the fiducials
do not appear in the first few slices of your stack).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">widths</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">trackfiducials</span><span class="p">(</span><span class="n">pix_width</span><span class="o">=</span><span class="n">pixWidth</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">im_list</span><span class="o">=</span><span class="n">images</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">im_number</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">plot_fiducials</span><span class="o">=</span><span class="bp">True</span>
<span class="gp">... </span>                           <span class="n">fid_num_to_plot</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">per_row</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">This method will prompt for a directory to read if no <code class="docutils literal"><span class="pre">im_list</span></code> is given.
Otherwise, it pops up some instruction boxes that explain what you should
do at each step:</p>
<ol class="loweralpha">
<li><p class="first">The first step is to crop the data to the area to where you expect to see the
fiducials. Since the fiducials should always be in the same general
location, reducing the search area drastically speeds the fiducial
recognition step. Keep in mind that the fiducials usually move upwards
over the course of the acquisition, so make sure to select a large
enough box to include them all.
Press <code class="docutils literal"><span class="pre">Enter</span></code> after selecting the rectangle:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/tracking1.png"><img alt="Selecting reduced area for fiducial search" src="_images/tracking1.png" style="width: 45%;" /></a>
</div>
</li>
<li><p class="first">In the next two dialogs, select a small box around the two fiducials
to track.</p>
<a class="reference internal image-reference" href="_images/tracking2.png"><img alt="Selecting left fiducial" src="_images/tracking2.png" style="width: 47%;" /></a>
<a class="reference internal image-reference" href="_images/tracking3.png"><img alt="Selecting right fiducial" src="_images/tracking3.png" style="width: 47%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><p class="first">During operation, a progress bar will be shown to display how long the
tracking is expected to take:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">widths</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">trackfiducials</span><span class="p">(</span><span class="n">pix_width</span><span class="o">=</span><span class="n">pixWidth</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">im_list</span><span class="o">=</span><span class="n">images</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">im_number</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">plot_fiducials</span><span class="o">=</span><span class="bp">True</span>
<span class="gp">... </span>                           <span class="n">fid_num_to_plot</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">per_row</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">    Pixel width is 2.13166e-08m</span>
<span class="go">    Box coordinates are(x1, y1), (x2, y2): (470, 356), (1718, 870)</span>
<span class="go">    Tracking fiducials:  41%|████      | 126/308 [00:08&lt;00:12, 30.5 it/s]</span>
</pre></div>
</div>
</li>
<li><p class="first">If requested, plots showing where the fiducial was located in a range
of images will be shown. If any of these are obviously not what you
selected as a fiducial, there was some sort of problem with the recognition
process and you should probably try again:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/tracking_left.png"><img alt="Fiducial recognition" src="_images/tracking_left.png" style="width: 500px;" /></a>
</div>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="visualizing-fiducial-tracking-data">
<h2>Visualizing Fiducial Tracking Data<a class="headerlink" href="#visualizing-fiducial-tracking-data" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">After running the last step, the <code class="docutils literal"><span class="pre">widths</span></code> variable should contain a list
of distances (in whatever units <code class="docutils literal"><span class="pre">pixWidth</span></code> was given in) between
the two fiducials recognized on each slice. These should get smaller
as the list progresses, representing the fiducials getting closer together.</p>
<p>A helper function is available to plot the this data:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">plot_fid_distances</span><span class="p">(</span><span class="n">widths</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/fid_width_plot.png"><img alt="Widths between recognized fiducials" src="_images/fid_width_plot.png" style="width: 500px;" /></a>
</div>
<p>As can be observed, the first few slices are not particularly evenly spaced,
but the milling reaches an equilibrium point and the profile eventually
becomes linear around slice 70, meaning that the slice thicknesses
are effectively equal.</p>
<p>The <a class="reference internal" href="api_doc.html#fibtracking.fibtracking.plot_fid_distances" title="fibtracking.fibtracking.plot_fid_distances"><code class="xref py py-meth docutils literal"><span class="pre">plot_fid_distances()</span></code></a> can also take a
parameter <code class="docutils literal"><span class="pre">plot_diff=True</span></code>, which will include a plot of the differences
in fiducial widths between each slice. Due to the discrete nature
of the data, this plot is not the most useful (and could probably use some
improvements). Regardless, the output looks like this:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">plot_fid_distances</span><span class="p">(</span><span class="n">widths</span><span class="p">,</span> <span class="n">plot_diff</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/fid_width_plot_w_deriv.png"><img alt="Widths between recognized fiducials with differences" src="_images/fid_width_plot_w_deriv.png" style="width: 500px;" /></a>
</div>
</li>
</ol>
</div>
<div class="section" id="calculating-slice-thicknesses">
<h2>Calculating Slice Thicknesses<a class="headerlink" href="#calculating-slice-thicknesses" title="Permalink to this headline">¶</a></h2>
<div class="section" id="global-slice-thickness">
<span id="global-label"></span><h3>Global Slice Thickness<a class="headerlink" href="#global-slice-thickness" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Oftentimes, rather than an individual thickness value for each slice,
the most relevant information is a global <cite>average</cite> slice thickness, and
the range over which it is valid. The
<a class="reference internal" href="api_doc.html#fibtracking.fibtracking.fit_fid_distances" title="fibtracking.fibtracking.fit_fid_distances"><code class="xref py py-meth docutils literal"><span class="pre">fit_fid_distances()</span></code></a> method will help find
this information.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ft</span><span class="o">.</span><span class="n">fit_fid_distances</span><span class="p">(</span><span class="n">widths</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">start_image</span><span class="o">=</span><span class="mi">110</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">fid_line_angle</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">reject_m</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">plot_results</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">    Average fiducial delta_x is -33.39 nm</span>
<span class="go">    Fiducial delta_x offset is 18718.21 nm</span>
<span class="go">    Average slice thickness is 19.90 nm</span>
</pre></div>
</div>
</div></blockquote>
<p>This method will plot the widths (similar to <a class="reference internal" href="api_doc.html#fibtracking.fibtracking.plot_fid_distances" title="fibtracking.fibtracking.plot_fid_distances"><code class="xref py py-meth docutils literal"><span class="pre">plot_fid_distances()</span></code></a>),
but will also fit a linear function to the data, and calculate an average
slice thickness, based off of the <code class="docutils literal"><span class="pre">fid_line_angle</span></code> value provided.
If the <code class="docutils literal"><span class="pre">reject_m</span></code> parameter is provided, the method will attempt to remove
outlier data points (useful if the fiducial recognition was not perfect)
before fitting, in order to give a more accurate value. The <code class="docutils literal"><span class="pre">start_image</span></code>
and <code class="docutils literal"><span class="pre">end_image</span></code> parameters can be used to tailor the range of slices
used for fitting (useful for ignoring the first <cite>N</cite> slices that are not
in equilibrium yet). If the <code class="docutils literal"><span class="pre">plot_results</span></code> flag is set, an output like
the following will be produced:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/fitted_distance_between_fiducials.png"><img alt="Fitted fiducial widths and average slice thickness" src="_images/fitted_distance_between_fiducials.png" style="width: 700px;" /></a>
</div>
<p>In this dataset, we called for a nominal slice thickness of 20nm, and we
can observe that on average, we were very close to that. In further processing,
we can trim the first 75 slices (or so) off of our dataset to ensure
we have uniform slice thicknesses, and set the thickness to 19.9nm.</p>
</li>
</ol>
</div>
<div class="section" id="individual-slice-thicknesses">
<h3>Individual Slice Thicknesses<a class="headerlink" href="#individual-slice-thicknesses" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Although it has not been as useful as the <a class="reference internal" href="#global-label"><span class="std std-ref">Global Slice Thickness</span></a> calculation,
originally the methods were written to calculate individual slice thicknesses,
and then trying to fit that data. As mentioned previously, the discrete
nature of the data makes this information not terribly useful, but this
is how you&#8217;d do it if you desire:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">thicknesses</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">slice_thickness</span><span class="p">(</span><span class="n">widths</span><span class="p">,</span>
<span class="gp">... </span>                                 <span class="n">fid_line_angle</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
<span class="gp">... </span>                                 <span class="n">input_units</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                 <span class="n">output_units</span><span class="o">=</span><span class="s1">&#39;nm&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="api_doc.html#fibtracking.fibtracking.slice_thickness" title="fibtracking.fibtracking.slice_thickness"><code class="xref py py-meth docutils literal"><span class="pre">slice_thickness()</span></code></a> method returns three
values: the list of thicknesses, the mean, and the standard deviation, so we
use the <code class="docutils literal"><span class="pre">[0]</span></code> syntax to extract just the list of thickness values.
There is a <a class="reference internal" href="api_doc.html#fibtracking.fibtracking.plot_thicknesses" title="fibtracking.fibtracking.plot_thicknesses"><code class="xref py py-meth docutils literal"><span class="pre">plot_thicknesses()</span></code></a> method to
smooth this data and plot the results for exploration as well. The method
has a great number of options for tailoring the output, and experimenting
with these will be left as an exercise to the reader. A simple call:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ft</span><span class="o">.</span><span class="n">plot_thicknesses</span><span class="p">(</span><span class="n">thicknesses</span><span class="p">,</span> <span class="n">legend_loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Produces output like the following. Included in this plot are some basic
statistics (mean and standard deviation), as well as a <a class="reference external" href="http://statsmodels.sourceforge.net/devel/generated/statsmodels.nonparametric.smoothers_lowess.lowess.html#statsmodels.nonparametric.smoothers_lowess.lowess">LOWESS</a> regression
that helps show how the slice thickness is changing on average:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/ind_thicknesses.png"><img alt="Individual slice thicknesses" src="_images/ind_thicknesses.png" style="width: 700px;" /></a>
</div>
<p>Again, if we crop out the first slices where there was no equilibrium,
the results of the fit improve significantly:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ft</span><span class="o">.</span><span class="n">plot_thicknesses</span><span class="p">(</span><span class="n">thicknesses</span><span class="p">[</span><span class="mi">80</span><span class="p">:],</span> <span class="n">legend_loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/ind_thicknesses2.png"><img alt="Individual slice thicknesses (cropped list)" src="_images/ind_thicknesses2.png" style="width: 700px;" /></a>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="saving-importing-results">
<h2>Saving/Importing Results<a class="headerlink" href="#saving-importing-results" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">For later or further analysis, the results of these methods can be easily
saved to or imported from <code class="docutils literal"><span class="pre">.csv</span></code> files using the
<a class="reference internal" href="api_doc.html#fibtracking.fibtracking.save_output" title="fibtracking.fibtracking.save_output"><code class="xref py py-meth docutils literal"><span class="pre">save_output()</span></code></a> and
<a class="reference internal" href="api_doc.html#fibtracking.fibtracking.import_csv_data" title="fibtracking.fibtracking.import_csv_data"><code class="xref py py-meth docutils literal"><span class="pre">import_csv_data()</span></code></a> methods.</p>
<p>To save the fiducial widths and slice thickness results:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ft</span><span class="o">.</span><span class="n">save_output</span><span class="p">(</span><span class="n">widths</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">fname</span><span class="o">=</span><span class="s1">&#39;fiducial_widths.csv&#39;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">collabels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Slice&#39;</span><span class="p">,</span> <span class="s1">&#39;Fiducial widths (m)&#39;</span><span class="p">])</span>
<span class="go">    2016-04-06 12:12:04</span>
<span class="go">    Wrote output to fiducial_widths.csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ft</span><span class="o">.</span><span class="n">save_output</span><span class="p">(</span><span class="n">thicknesses</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">fname</span><span class="o">=</span><span class="s1">&#39;thicknesses.csv&#39;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">collabels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Slice&#39;</span><span class="p">,</span><span class="s1">&#39;Thickness (nm)&#39;</span><span class="p">])</span>
<span class="go">    2016-04-06 12:13:42</span>
<span class="go">    Wrote output to thicknesses.csv</span>
</pre></div>
</div>
<p>To import this data back into the program:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">widths</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">import_csv_data</span><span class="p">(</span><span class="s1">&#39;fiducial_widths.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">thicknesses</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">import_csv_data</span><span class="p">(</span><span class="s1">&#39;thicknesses.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api_doc.html" class="btn btn-neutral float-right" title="Module Method Summary" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="Installation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Joshua Taillon.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>