

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; coala 0.5.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="coala 0.5.1 documentation" href="../index.html"/>
        <link rel="next" title="Writing Documentation" href="Writing_Documentation.html"/>
        <link rel="prev" title="Reviewing" href="Review.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> coala
          

          
          </a>

          
            
            
              <div class="version">
                0.5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome</a></li>
</ul>
<p class="caption"><span class="caption-text">For Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Users/Install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Users/coafile.html">coafile Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Users/Glob_Patterns.html">Glob Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Users/Exit_Codes.html">Exit Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Users/External_APIs.html">External APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Users/Git_Hooks.html">Git Hooks</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Users/Tutorials/Tutorial.html">First Step</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Users/Tutorials/Writing_Bears.html">Writing Bears</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Users/Tutorials/Linter_Bears.html">Linter Bears</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Users/Tutorials/Self_Correcting_Bears.html">Linter Bears - Suggest corrections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Users/Tutorials/Git_Help.html">Git Help</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Involved</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Newcomers.html">Newcomers</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Codestyle.html">Codestyle</a></li>
<li class="toctree-l1"><a class="reference internal" href="Writing_Good_Commits.html">Commit Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="Testing.html">Executing Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="Review.html">Review</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Writing Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#actually-writing-a-test">Actually Writing a Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setup-and-teardown"><code class="docutils literal"><span class="pre">setUp()</span></code> and <code class="docutils literal"><span class="pre">tearDown()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#assertions">Assertions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kickstart">Kickstart</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Writing_Documentation.html">Writing Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAC_Hints.html">MAC Hints</a></li>
</ul>
<p class="caption"><span class="caption-text">General Developer Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../General_Dev_Info/git_tutorial_1.html">A Hitchhiker&#8217;s Guide to Git (1): Genesis</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../API/modules.html">List of Modules</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">coala</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Introduction</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Getting_Involved/Writing_Tests.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>Tests are an essential element to check if your written components in
coala really do work like they should. Even when you think &#8220;I really
looked over my code, no need for tests&#8221; you are wrong! Bugs introduced
when not writing tests are often the most horrible ones, they have the
characteristic to be undiscoverable (or only discoverable after dozens
of hours of searching). Try to test as much as possible! The more tests
you write the more you can be sure you did everything correct.
Especially if someone else modifies your component, he can be sure with
your tests that he doesn&#8217;t introduce a bug.</p>
<div class="section" id="actually-writing-a-test">
<h2>Actually Writing a Test<a class="headerlink" href="#actually-writing-a-test" title="Permalink to this headline">¶</a></h2>
<p>So how do you implement a test in coala? First up, tests are placed into
the <code class="docutils literal"><span class="pre">bears/tests</span></code> (if you want to write a test for a bear) or
<code class="docutils literal"><span class="pre">tests</span></code> (if you test a component written for the coalib)
directory. They are also written in python (version 3) and get
automatically executed by running:</p>
<div class="highlight-python"><div class="highlight"><pre>$ py.test
</pre></div>
</div>
<p>There&#8217;s only one constraint:
The name of the test file has to end with <code class="docutils literal"><span class="pre">Test.py</span></code> (for example
<code class="docutils literal"><span class="pre">MyCustomTest.py</span></code>, but not <code class="docutils literal"><span class="pre">MyCustomTestSuite.py</span></code>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Often you don&#8217;t want to run all available tests. To run your
specific one, type (in the coala root folder):</p>
<div class="code shell highlight-python"><div class="highlight"><pre>$ py.test -k &lt;your-test&gt;
</pre></div>
</div>
<p class="last">You can even give partial names or queries like &#8220;not MyCustomTest&#8221;
to not run a specific test. More information can be got with
<code class="docutils literal"><span class="pre">py.test</span> <span class="pre">-h</span></code></p>
</div>
<p>Coming to the test file structure. Every test script starts with your
system imports, i.e.:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c1"># Imports the python &#39;re&#39; package for regex processing.</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="c1"># ...</span>
</pre></div>
</div>
<p>As said before, in the next line your own imports follow. So just import
what you need from coala:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">coalib.your_component.component1</span>
<span class="kn">import</span> <span class="nn">coalib.your_component.component2</span>
<span class="c1"># ...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use system imports here also, but the coala codestyle
suggests to place them above the three setup lines, like before.</p>
</div>
<p>Then the actual test suite class follows, that contains the tests. Each
test suite is made up of test cases, where the test suite checks the
overall functionality of your component by invoking each test case.</p>
<p>The basic declaration for a test suite class is as follows:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">YourComponentTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c1"># Your test cases.</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>You should derive your test suite from <code class="docutils literal"><span class="pre">unittest.TestCase</span></code> to have
access to the <code class="docutils literal"><span class="pre">setUp()</span></code> and <code class="docutils literal"><span class="pre">tearDown()</span></code> functions (covered in
section below: <strong>``setUp()`` and ``tearDown()``</strong>) and also to the
assertion functions.</p>
<p>Now to the test cases: To implement a test case, just declare a class
member function without parameters, starting with <code class="docutils literal"><span class="pre">test_</span></code>. Easy, isn&#8217;t
it?</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">YourComponentTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c1"># Tests somethin&#39;.</span>
    <span class="k">def</span> <span class="nf">test_case1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c1"># Doesn&#39;t test, this is just a member function, since the function name</span>
    <span class="c1"># does not start with &#39;test_&#39;.</span>
    <span class="k">def</span> <span class="nf">not_testing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>But how do you actually test if your component is correct? For that
purpose you have asserts. Asserts check whether a condition is fulfilled
and pass the result to the overall test-suite-invoking-instance, that
manages all tests in coala. The result is processed and you get a
message if something went wrong in your test.</p>
<p>Available assert functions are listed in the section <strong>Assertions</strong>
below.</p>
<p>So an example test that succeeds would be:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c1"># The sys import and setup is not needed here because this example doesn&#39;t</span>
<span class="c1"># use coala components.</span>
<span class="kn">import</span> <span class="nn">unittest</span>


<span class="k">class</span> <span class="nc">YourComponentTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c1"># Tests somethin&#39;.</span>
    <span class="k">def</span> <span class="nf">test_case1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Does &#39;1&#39; equal &#39;1&#39;? Interestingly it does... mysterious...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c1"># Hm yeah, True is True.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Tests in coala are evaluated against their coverage, means how many
statements will be executed from your component when invoking your
test cases. A branch coverage of 100% is needed for any commit in
order to be pushed to master - please ask us on gitter if you need
help raising your coverage!</p>
<p>The branch coverage can be measured locally with the
<code class="docutils literal"><span class="pre">py.test</span> <span class="pre">--cov</span></code> command.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Module <a class="reference internal" href="Testing.html"><em>Executing Tests</em></a></dt>
<dd>Documentation of running Tests with coverage</dd>
</dl>
</div>
<p>As our coverage is measured across builds against several python
versions (we need version specific branches here and there) you will
not get the full coverage locally! Simply make a pull request to get
the coverage measured automatically.</p>
<p>If some code is untestable, you need to mark your component code
with <code class="docutils literal"><span class="pre">#</span> <span class="pre">pragma:</span> <span class="pre">no</span> <span class="pre">cover</span></code>. Important: Provide a reason why your
code is untestable. Code coverage is measured using python 3.3 and
3.4 on linux.</p>
<div class="code python last highlight-python"><div class="highlight"><pre><span class="c1"># Reason why this function is untestable.</span>
<span class="k">def</span> <span class="nf">untestable_func</span><span class="p">():</span> <span class="c1"># pragma: no cover</span>
    <span class="c1"># Untestable code.</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="setup-and-teardown">
<h2><code class="docutils literal"><span class="pre">setUp()</span></code> and <code class="docutils literal"><span class="pre">tearDown()</span></code><a class="headerlink" href="#setup-and-teardown" title="Permalink to this headline">¶</a></h2>
<p>Often you reuse components or need to make an inital setup for your
tests. For that purpose the function <code class="docutils literal"><span class="pre">setUp()</span></code> exists. Just declare it
inside your test suite and it is invoked automatically once at test
suite startup:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">YourComponentTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Your initialization of constants, operating system API calls etc.</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>The opposite from this is the <code class="docutils literal"><span class="pre">tearDown()</span></code> function. It gets invoked
when the test suite finished running all test cases. Declare it like
<code class="docutils literal"><span class="pre">setUp()</span></code> before:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">YourComponentTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Deinitialization, release calls etc.</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="assertions">
<h2>Assertions<a class="headerlink" href="#assertions" title="Permalink to this headline">¶</a></h2>
<p>Here follows a list of all available assertion functions supported when
inheriting from <code class="docutils literal"><span class="pre">unittest.TestCase</span></code>:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertEqual(a,</span> <span class="pre">b)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> equals expression <code class="docutils literal"><span class="pre">b</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertNotEqual(a,</span> <span class="pre">b)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> <strong>not</strong> equals expression <code class="docutils literal"><span class="pre">b</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertTrue(a)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> is True.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertFalse(a)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> is False.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertIs(a,</span> <span class="pre">b)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> is <code class="docutils literal"><span class="pre">b</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertIsNot(a,</span> <span class="pre">b)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> is not <code class="docutils literal"><span class="pre">b</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertIsNone(a)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> is None.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertIsNotNone(a)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> is not None.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertIn(a,</span> <span class="pre">list)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> is an element inside <code class="docutils literal"><span class="pre">list</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertNotIn(a,</span> <span class="pre">list)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> is not an element inside <code class="docutils literal"><span class="pre">list</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertIsInstance(a,</span> <span class="pre">type)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> is of type <code class="docutils literal"><span class="pre">type</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertNotIsInstance(a,</span> <span class="pre">type)</span></code></li>
</ul>
<p>Checks whether expression <code class="docutils literal"><span class="pre">a</span></code> is not of type <code class="docutils literal"><span class="pre">type</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertRaises(error,</span> <span class="pre">function,</span> <span class="pre">*args,</span> <span class="pre">**kwargs)</span></code></li>
</ul>
<p>Checks whether <code class="docutils literal"><span class="pre">function</span></code> throws the specific <code class="docutils literal"><span class="pre">error</span></code>. When calling
this assert it invokes the function with the specified <code class="docutils literal"><span class="pre">*args</span></code> and
<code class="docutils literal"><span class="pre">**kwargs</span></code>.</p>
<p>If you want more information about the python <code class="docutils literal"><span class="pre">unittest</span></code>-module, refer
to the <a class="reference external" href="https://docs.python.org/3/library/unittest.html">official
documentation</a> and
for asserts the subsection [assert-methods]
(<a class="reference external" href="https://docs.python.org/3/library/unittest.html#assert-methods">https://docs.python.org/3/library/unittest.html#assert-methods</a>).</p>
</div>
<div class="section" id="kickstart">
<h2>Kickstart<a class="headerlink" href="#kickstart" title="Permalink to this headline">¶</a></h2>
<p>This section contains a concluding and simple example that you can use
as a kickstart for test-writing.</p>
<p>Put the code under the desired folder inside <code class="docutils literal"><span class="pre">tests</span></code> or
<code class="docutils literal"><span class="pre">bears/tests</span></code>, modify it to let it test your stuff and run the test from
the coala root folder <code class="docutils literal"><span class="pre">py.test</span></code>.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c1"># Import here your needed system components.</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
<span class="c1"># Import here your needed coala components.</span>


<span class="c1"># Your test unit. The name of this class is displayed in the test</span>
<span class="c1"># evaluation.</span>
<span class="k">class</span> <span class="nc">YourTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Here you can set up your stuff. For example constant values,</span>
        <span class="c1"># initializations etc.</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Here you clean up your stuff initialized in setUp(). For example</span>
        <span class="c1"># deleting arrays, call operating system API etc.</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">test_case1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># A test method. Put your test code here.</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Writing_Documentation.html" class="btn btn-neutral float-right" title="Writing Documentation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Review.html" class="btn btn-neutral" title="Reviewing" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, The coala Developers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.5.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>