'use strict';function test(){function Q(a,b,d){"undefined"==typeof b&&(b=a,a=0);"undefined"==typeof d&&(d=1);if(0<d&&a>=b||0>d&&a<=b)return[];for(var e=[];0<d?a<b:a>b;a+=d)e.push(a);return e}function M(a){if(null==a||"object"==typeof a)return a;var b={},d;for(d in obj)a.hasOwnProperty(d)&&(b[d]=a[d]);return b}function R(a){if(null==a||"object"==typeof a)return a;var b={},d;for(d in obj)a.hasOwnProperty(d)&&(b[d]=R(a[d]));return b}function h(a){return a?[].slice.apply(a):[]}function p(a){a=a?[].slice.apply(a):
[];a.__class__=p;return a}function u(a){var b=[];if(a)for(var d=0;d<a.length;d++)b.add(a[d]);b.__class__=u;return b}function S(){var a=[],b;for(b in this)G(b)||a.push(b);return a}function T(){var a=[],b;for(b in this)G(b)||a.push([b,this[b]]);return a}function U(a){delete this[a]}function E(a){if(!a||a instanceof Array){var b={};if(a)for(var d=0;d<a.length;d++){var e=a[d];b[e[0]]=e[1]}}else b=a;Object.defineProperty(b,"__class__",{value:E,enumerable:!1,writable:!0});Object.defineProperty(b,"py_keys",
{value:S,enumerable:!1});Object.defineProperty(b,"py_items",{value:T,enumerable:!1});Object.defineProperty(b,"py_del",{value:U,enumerable:!1});return b}function C(a){try{return a.__str__()}catch(b){return new String(a)}}var c={},B=function(a,b,d){if(""!=b){b=b.split(".");for(var e=b.length,c=0;c<b.length;c++){if(!a.hasOwnProperty(b[c])){e=c;break}a=a[b[c]]}for(c=e;c<b.length;c++)a[b[c]]={},a=a[b[c]]}for(var h in d)a[h]=d[h]};c.__nest__=B;var D=function(a){a.__inited__||a.__all__.__init__(a.__all__);
return a.__all__};c.__init__=D;var m=function(a,b,d){return a&&(a.hasOwnProperty("__class__")||"string"==typeof a||a instanceof String)?(d&&Object.defineProperty(a,d,{value:function(){var d=[].slice.apply(arguments);return b.apply(null,[a].concat(d))},writable:!0,enumerable:!0,configurable:!0}),function(){var d=[].slice.apply(arguments);return b.apply(null,[a].concat(d))}):b};c.__get__=m;var F=function(a,b,d){for(var e=function(){var a=[].slice.apply(arguments);return e.__new__(a)},c=b.length-1;0<=
c;c--){var h=b[c],g;for(g in h){var q=Object.getOwnPropertyDescriptor(h,g);Object.defineProperty(e,g,q)}}e.__name__=a;e.__bases__=b;for(g in d)q=Object.getOwnPropertyDescriptor(d,g),Object.defineProperty(e,g,q);return e};c.__class__=F;var I=c.__class__("object",[],{__init__:function(a){},__name__:"object",__bases__:[],__new__:function(a){var b=Object.create(this,{__class__:{value:this,enumerable:!0}});this.__init__.apply(null,[b].concat(a));return b}});c.object=I;c.__pragma__=function(){};B(c,"org.transcrypt.__base__",
{__all__:{__inited__:!1,__init__:function(a){var b=F("__Envir__",[I],{get __init__(){return m(this,function(a){a.transpiler_name="transcrypt";a.transpiler_version="3.5.138";a.target_subdir="__javascript__"})}}),d=b();a.__Envir__=b;a.__envir__=d}}});B(c,"org.transcrypt.__standard__",{__all__:{__inited__:!1,__init__:function(a){var b=F("Exception",[I],{get __init__(){return m(this,function(a){var b=p([].slice.apply(arguments).slice(1));a.args=b})},get __repr__(){return m(this,function(a){return w(a.args)?
"{}{}".format(a.__class__.__name__,V(p(a.args))):"???"})},get __str__(){return m(this,function(a){return 1<w(a.args)?C(p(a.args)):w(a.args)?C(a.args[0]):"???"})}}),d=F("ValueError",[b],{}),e=function(a,b,d){if("undefined"==typeof b||null!=b&&b.__class__==t)b=null;if("undefined"==typeof d||null!=d&&d.__class__==t)d=!1;if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].__class__==t){var e=arguments[e--],c;for(c in e)switch(c){case "iterable":a=e[c];break;case "key":b=e[c];break;
case "reverse":d=e[c]}}}b?a.sort(function(a,d){if(arguments.length){var x=arguments.length-1;if(arguments[x]&&arguments[x].__class__==t){var x=arguments[x--],K;for(K in x)switch(K){case "a":a=x[K];break;case "b":d=x[K]}}}return b(a)>b(d)}):a.sort();d&&a.reverse()};a.Exception=b;a.ValueError=d;a.__sort__=e;a.sorted=function(a,b,d){if("undefined"==typeof b||null!=b&&b.__class__==t)b=null;if("undefined"==typeof d||null!=d&&d.__class__==t)d=!1;if(arguments.length){var c=arguments.length-1;if(arguments[c]&&
arguments[c].__class__==t){var c=arguments[c--],h;for(h in c)switch(h){case "iterable":a=c[h];break;case "key":b=c[h];break;case "reverse":d=c[h]}}}h=y(a)==E?M(a.py_keys()):M(a);e(h,b,d);return h}}}});B(c,"",D(c.org.transcrypt.__base__));var W=c.__envir__;B(c,"",D(c.org.transcrypt.__standard__));var aa=c.__sort__;W.executor_name=W.transpiler_name;c.main={__file__:""};c.__except__=null;var t=function(a){a.__class__=t;a.constructor=Object;return a};c.___kwargdict__=t;c.property=function(a,b){b||(b=
function(){});return{get:function(){return a(this)},set:function(a){b(this,a)},enumerable:!0}};c.__merge__=function(a,b){var d={},c;for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d};var X=function(){for(var a=[].slice.apply(arguments),b="",d=0;d<a.length;d++)b+=C(a[d])+" ";console.log(b)};c.print=X;console.log.apply=function(){X([].slice.apply(arguments).slice(1))};c.__in__=function(a,b){return y(b)==E?-1<b.py_keys().indexOf(a):-1<b.indexOf(a)};var G=function(a){return a.startswith("__")&&a.endswith("__")||
"constructor"==a||a.startswith("py_")};c.__specialattrib__=G;var w=function(a){try{return a.length}catch(d){var b=0;for(attrib in a)G(attrib)||b++;return b}};c.len=w;var Y={__name__:"bool"};c.bool=Y;var L=function(a){if(isNaN(a))throw"ValueError";return+a};L.__name__="float";c.float=L;var O=function(a){return L(a)|0};O.__name__="int";c.int=O;var y=function(a){try{return a.__class__}catch(d){var b=typeof a;return"boolean"==b?Y:"number"==b?0==a%1?O:L:b}};c.type=y;c.isinstance=function(a,b){function d(a){if(a==
b)return!0;for(var c=0;c<a.__bases__.length;c++)if(d(a.__bases__[c],b))return!0;return!1}return d(a.__class__)};var V=function(a){try{return a.__repr__()}catch(c){try{return a.__str__()}catch(h){try{if(a.constructor==Object){var b="{",d=!1,e;for(e in a)if(!G(e)){var p=e.isnumeric()?e:"'"+e+"'";d?b+=", ":d=!0;try{b+=p+": "+a[e].__repr__()}catch(q){b+=p+": "+a[e].toString()}}return b+"}"}return"boolean"==typeof a?a.toString().capitalize():a.toString()}catch(q){return console.log("ERROR: Could not evaluate repr (<object of type "+
typeof a+">)"),"???"}}}};c.repr=V;c.chr=function(a){return String.fromCharCode(a)};c.org=function(a){return a.charCodeAt(0)};var P=function(a){a=a.slice();a.reverse();return a},Z=function(){var a=[].slice.call(arguments);return(0==a.length?[]:a.reduce(function(a,d){return a.length<d.length?a:d})).map(function(b,d){return a.map(function(a){return a[d]})})};c.zip=Z;c.range=Q;c.enumerate=function(a){return Z(Q(w(a)),a)};c.copy=M;c.deepcopy=R;c.list=h;Array.prototype.__class__=h;h.__name__="list";Array.prototype.__getslice__=
function(a,b,d){0>a&&(a=this.length+a);null==b?b=this.length:0>b&&(b=this.length+b);for(var c=h([]);a<b;a+=d)c.push(this[a]);return c};Array.prototype.__setslice__=function(a,b,d,c){0>a&&(a=this.length+a);null==b?b=this.length:0>b&&(b=this.length+b);if(null==d)Array.prototype.splice.apply(this,[a,b-a].concat(c));else for(var h=0;a<b;a+=d)this[a]=c[h++]};Array.prototype.__repr__=function(){if(this.__class__==u&&!this.length)return"set()";for(var a=this.__class__&&this.__class__!=h?this.__class__==
p?"(":"{":"[",b=0;b<this.length;b++){b&&(a+=", ");try{a+=this[b].__repr__()}catch(d){a+=this[b].toString()}}this.__class__==p&&1==this.length&&(a+=",");return a+=this.__class__&&this.__class__!=h?this.__class__==p?")":"}":"]"};Array.prototype.__str__=Array.prototype.__repr__;Array.prototype.append=function(a){this.push(a)};Array.prototype.clear=function(){this.length=0};Array.prototype.extend=function(a){this.push.apply(this,a)};Array.prototype.insert=function(a,b){this.splice(a,0,b)};Array.prototype.remove=
function(a){a=this.indexOf(a);if(-1==a)throw"KeyError";this.splice(a,1)};Array.prototype.py_pop=function(a){return void 0==a?this.pop():this.splice(a,1)[0]};Array.prototype.py_sort=function(){aa.apply(null,[this].concat([].slice.apply(arguments)))};c.tuple=p;p.__name__="tuple";c.set=u;u.__name__="set";Array.prototype.__bindexOf__=function(a){a+="";for(var b=0,d=this.length-1;b<=d;){var c=(b+d)/2|0,h=this[c]+"";if(h<a)b=c+1;else if(h>a)d=c-1;else return c}return-1};Array.prototype.add=function(a){-1==
this.indexOf(a)&&this.push(a)};Array.prototype.discard=function(a){a=this.indexOf(a);-1!=a&&this.splice(a,1)};Array.prototype.isdisjoint=function(a){this.sort();for(var b=0;b<a.length;b++)if(-1!=this.__bindexOf__(a[b]))return!1;return!0};Array.prototype.issuperset=function(a){this.sort();for(var b=0;b<a.length;b++)if(-1==this.__bindexOf__(a[b]))return!1;return!0};Array.prototype.issubset=function(a){return u(a.slice()).issuperset(this)};Array.prototype.union=function(a){for(var b=u(this.slice().sort()),
d=0;d<a.length;d++)-1==b.__bindexOf__(a[d])&&b.push(a[d]);return b};Array.prototype.intersection=function(a){this.sort();for(var b=u(),d=0;d<a.length;d++)-1!=this.__bindexOf__(a[d])&&b.push(a[d]);return b};Array.prototype.difference=function(a){a=u(a.slice().sort());for(var b=u(),d=0;d<this.length;d++)-1==a.__bindexOf__(this[d])&&b.push(this[d]);return b};Array.prototype.symmetric_difference=function(a){return this.union(a).difference(this.intersection(a))};Array.prototype.update=function(){var a=
[].concat.apply(this.slice(),arguments).sort();this.clear();for(var b=0;b<a.length;b++)a[b]!=a[b-1]&&this.push(a[b])};c.__keys__=S;c.__items__=T;c.__del__=U;c.dict=E;E.__name__="dict";c.str=C;String.prototype.__class__=C;C.__name__="str";String.prototype.__repr__=function(){return(-1==this.indexOf("'")?"'"+this+"'":'"'+this+'"').replace("\n","\\n")};String.prototype.__str__=function(){return this};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.endswith=
function(a){return""==a||this.slice(-a.length)==a};String.prototype.find=function(a,b){return this.indexOf(a,b)};Object.defineProperty(String.prototype,"format",{get:function(){return m(this,function(a){var b=p([].slice.apply(arguments).slice(1)),d=0;return a.replace(/\{(\w*)\}/g,function(a,c){""==c&&(c=d++);if(c==+c)return"undefined"==b[c]?a:b[c];for(var h=0;h<b.length;h++)if("object"==typeof b[h]&&"undefined"!=typeof b[h][c])return b[h][c];return a})})},enumerable:!0});String.prototype.isnumeric=
function(){return!isNaN(parseFloat(this))&&isFinite(this)};String.prototype.join=function(a){return a.join(this)};String.prototype.lower=function(){return this.toLowerCase()};String.prototype.py_replace=function(a,b,d){return this.split(a,d).join(b)};String.prototype.lstrip=function(){return this.replace(/^\s*/g,"")};String.prototype.rfind=function(a,b){return this.lastIndexOf(a,b)};String.prototype.rsplit=function(a,b){var d=this.split(a||/s+/);return b?[d.slice(0,-b).join(a)].concat(d.slice(-b)):
d};String.prototype.rstrip=function(){return this.replace(/\s*$/g,"")};String.prototype.py_split=function(a,b){a||(a=" ");return this.split(a||/s+/,b)};String.prototype.startswith=function(a){return 0==this.indexOf(a)};String.prototype.strip=function(){return this.trim()};String.prototype.upper=function(){return this.toUpperCase()};c.__neg__=function(a){return"object"==typeof a&&"__neg__"in a?a.__neg__():-a};c.__matmul__=function(a,b){return a.__matmul__(b)};c.__mul__=function(a,b){return"object"==
typeof a&&"__mul__"in a?a.__mul__(b):"object"==typeof b&&"__rmul__"in b?b.__rmul__(a):a*b};c.__div__=function(a,b){return"object"==typeof a&&"__div__"in a?a.__div__(b):"object"==typeof b&&"__rdiv__"in b?b.__rdiv__(a):a/b};c.__add__=function(a,b){return"object"==typeof a&&"__add__"in a?a.__add__(b):"object"==typeof b&&"__radd__"in b?b.__radd__(a):a+b};c.__sub__=function(a,b){return"object"==typeof a&&"__sub__"in a?a.__sub__(b):"object"==typeof b&&"__rsub__"in b?b.__rsub__(a):a-b};c.__getitem__=function(a,
b){return"object"==typeof a&&"__getitem__"in a?a.__getitem__(b):a[b]};c.__setitem__=function(a,b,d){"object"==typeof a&&"__setitem__"in a?a.__setitem__(b,d):a[b]=d};c.__getslice__=function(a,b,d,c){return"object"==typeof a&&"__getitem__"in a?a.__getitem__([b,d,c]):a.__getslice__(b,d,c)};c.__setslice__=function(a,b,d,c,h){"object"==typeof a&&"__setitem__"in a?a.__setitem__([b,d,c],h):a.__setslice__(b,d,c,h)};c.__call__=function(){var a=[].slice.apply(arguments);return"object"==typeof a[0]&&"__call__"in
a[0]?a[0].__call__.apply(null,a.slice(1)):a[0].apply(null,a.slice(1))};B(c,"itertools",{__all__:{__inited__:!1,__init__:function(a){a.chain=function(){for(var a=[].slice.apply(arguments),d=[],c=0;c<a.length;c++)d=d.concat(a[c]);return h(d)}}}});B(c,"numscrypt",{__all__:{__inited__:!1,__init__:function(a){var b={};B(b,"",D(c.itertools));var d=F("ns_settings",[I],{});d.optim_space=!1;var e=E({int32:4,float32:4,float64:8}),J=E({int32:Int32Array,float32:Float32Array,float64:Float64Array}),H=function(a){var b=
a[0];a=a.__getslice__(1,null,1);for(var c=0;c<a.length;c++)b*=a[c];return b},g=F("ndarray",[I],{get __init__(){return m(this,function(a,b,c,d,k,f){if("undefined"==typeof k||null!=k&&k.__class__==t)k=0;if("undefined"==typeof f||null!=f&&f.__class__==t)f=null;a.dtype=c;a.itemsize=e[a.dtype];a.offset=k;a.ns_shift=a.offset/a.itemsize;a.data=d;a.reshape(b,f)})},get reshape(){return m(this,function(a,b,c){a.shape=b;a.ndim=w(a.shape);if(c)a.strides=c;else for(a.strides=h([a.itemsize]),b=P(a.shape.__getslice__(1,
null,1)),c=0;c<b.length;c++)a.strides.insert(0,a.strides[0]*b[c]);b=[];c=a.strides;for(var d=0;d<c.length;d++)b.append(c[d]/a.itemsize);a.ns_skips=b;a.ns_natural=0==a.offset;for(b=0;b<a.ndim-1;b++)if(a.ns_skips[b+1]>a.ns_skips[b]){a.ns_natural=!1;break}a.ns_length=H(a.shape);a.ns_length<a.data.length&&(a.ns_natural=!1);a.nbytes=a.ns_length*a.itemsize})},get astype(){return m(this,function(a,b){for(var c=e[b],d=g,k=a.shape,f=J[b].from(a.data),h=c*a.ns_shift,n=[],l=a.ns_skips,z=0;z<l.length;z++)n.append(c*
l[z]);return d(k,b,f,h,n)})},get tolist(){return m(this,function(a){var c=function(d,A){for(var k=h([]),f=0;f<a.shape[d];f++)d<a.ndim-1?k.append(c(d+1,b.chain(A,h([f])))):k.append(a.__getitem__(b.chain(A,h([f]))));return k};return c(0,h([]))})},get __repr__(){return m(this,function(a){return"ndarray ({})".format(C(a.tolist()))})},get __str__(){return m(this,function(a){return C(a.tolist()).py_replace("]], [[","]]\n\n[[").py_replace("], ","]\n").py_replace(",","")})},get transpose(){return m(this,
function(a){var b=p([].slice.apply(arguments).slice(1));w(b)&&Array.isArray(b[0])&&(b=b[0]);return g(w(b)?function(){for(var c=[],d=0;d<a.ndim;d++)c.append(a.shape[b[d]]);return c}():P(a.shape),a.dtype,a.data,null,w(b)?function(){for(var c=[],d=0;d<a.ndim;d++)c.append(a.strides[b[d]]);return c}():P(a.strides))})},get __getitem__(){return m(this,function(a,b){if(y(b)==h){for(var c=a.ns_shift,d=h([]),k=h([]),f=!1,e=0;e<a.ndim;e++){var n=b[e];y(n)==p?(f=!0,c+=n[0]*a.ns_skips[e],d.append(n[1]?(n[1]-n[0])/
n[2]:(a.shape[e]-n[0])/n[2]),k.append(n[2]*a.strides[e])):c+=n*a.ns_skips[e]}return f?g(d,a.dtype,a.data,c*a.itemsize,k):a.data[c]}return a.data[a.ns_shift+b*a.ns_skips[0]]})},get __setitem__(){return m(this,function(a,c,d){var e=function(a,c,d){if(w(a)<c.ndim)for(var x=0;x<c.shape[w(a)];x++)e(b.chain(a,h([x])),c,d);else c.__setitem__(a,d.__getitem__(a))};if(y(c)==h){for(var k=a.ns_shift,f=h([]),v=h([]),n=!1,l=0;l<a.ndim;l++){var z=c[l];y(z)==p?(n=!0,k+=z[0]*a.ns_skips[l],f.append(z[1]?(z[1]-z[0])/
z[2]:(a.shape[l]-z[0])/z[2]),v.append(z[2]*a.strides[l])):k+=z*a.ns_skips[l]}n?(a=g(f,a.dtype,a.data,k*a.itemsize,v),e(h([]),a,d)):a.data[k]=d}else a.data[a.ns_shift+c*a.ns_skips[0]]=d})},get __neg__(){return m(this,function(a){var c=function(k,f){for(var e=0;e<a.shape[k];e++)if(k<a.ndim-1)c(k+1,b.chain(f,h([e])));else{var A=b.chain(f,h([e]));d.__setitem__(A,-a.__getitem__(A))}},d=q(a.shape,a.dtype);if(a.ns_natural)for(var e=p([d.data,a.data]),k=e[0],e=e[1],f=0;f<a.data.length;f++)k[f]=-e[f];else c(0,
h([]));return d})},get __ns_inv__(){return m(this,function(a){var c=function(k,f){for(var e=0;e<a.shape[k];e++)if(k<a.ndim-1)c(k+1,b.chain(f,h([e])));else{var A=b.chain(f,h([e]));d.__setitem__(A,1/a.__getitem__(A))}},d=q(a.shape,a.dtype);if(a.ns_natural)for(var e=p([d.data,a.data]),k=e[0],e=e[1],f=0;f<a.data.length;f++)k[f]=1/e[f];else c(0,h([]));return d})},get __add__(){return m(this,function(a,c){var d=y(c)==g,e=function(f,l){for(var n=0;n<a.shape[f];n++)if(f<a.ndim-1)e(f+1,b.chain(l,h([n])));
else{var g=b.chain(l,h([n]));d?k.__setitem__(g,a.__getitem__(g)+c.__getitem__(g)):k.__setitem__(g,a.__getitem__(g)+c)}},k=q(a.shape,a.dtype);if(a.ns_natural&&d&&c.ns_natural)for(var f=p([k.data,a.data,c.data]),v=f[0],n=f[1],f=f[2],l=0;l<a.data.length;l++)v[l]=n[l]+f[l];else if(a.ns_natural&&!d)for(f=p([k.data,a.data]),v=f[0],n=f[1],l=0;l<a.data.length;l++)v[l]=n[l]+c;else e(0,h([]));return k})},get __radd__(){return m(this,function(a,b){return a.__add__(b)})},get __sub__(){return m(this,function(a,
c){var d=y(c)==g,e=function(f,l){for(var n=0;n<a.shape[f];n++)if(f<a.ndim-1)e(f+1,b.chain(l,h([n])));else{var g=b.chain(l,h([n]));d?k.__setitem__(g,a.__getitem__(g)-c.__getitem__(g)):k.__setitem__(g,a.__getitem__(g)-c)}},k=q(a.shape,a.dtype);if(a.ns_natural&&d&&c.ns_natural)for(var f=p([k.data,a.data,c.data]),v=f[0],n=f[1],f=f[2],l=0;l<a.data.length;l++)v[l]=n[l]-f[l];else if(a.ns_natural&&!d)for(f=p([k.data,a.data]),v=f[0],n=f[1],l=0;l<a.data.length;l++)v[l]=n[l]-c;else e(0,h([]));return k})},get __rsub__(){return m(this,
function(a,b){return a.__neg__().__add__(b)})},get __mul__(){return m(this,function(a,c){var d=y(c)==g,e=function(f,l){for(var n=0;n<a.shape[f];n++)if(f<a.ndim-1)e(f+1,b.chain(l,h([n])));else{var g=b.chain(l,h([n]));d?k.__setitem__(g,a.__getitem__(g)*c.__getitem__(g)):k.__setitem__(g,a.__getitem__(g)*c)}},k=q(a.shape,a.dtype);if(a.ns_natural&&d&&c.ns_natural)for(var f=p([k.data,a.data,c.data]),v=f[0],n=f[1],f=f[2],l=0;l<a.data.length;l++)v[l]=n[l]*f[l];else if(a.ns_natural&&!d)for(f=p([k.data,a.data]),
v=f[0],n=f[1],l=0;l<a.data.length;l++)v[l]=n[l]*c;else e(0,h([]));return k})},get __rmul__(){return m(this,function(a,b){return a.__mul__(b)})},get __div__(){return m(this,function(a,c){var d=y(c)==g,e=function(f,l){for(var n=0;n<a.shape[f];n++)if(f<a.ndim-1)e(f+1,b.chain(l,h([n])));else{var g=b.chain(l,h([n]));d?k.__setitem__(g,a.__getitem__(g)/c.__getitem__(g)):k.__setitem__(g,a.__getitem__(g)/c)}},k=q(a.shape,a.dtype);if(a.ns_natural&&d&&c.ns_natural)for(var f=p([k.data,a.data,c.data]),v=f[0],
n=f[1],f=f[2],l=0;l<a.data.length;l++)v[l]=n[l]/f[l];else if(a.ns_natural&&!d)for(f=p([k.data,a.data]),v=f[0],n=f[1],l=0;l<a.data.length;l++)v[l]=n[l]/c;else e(0,h([]));return k})},get __rdiv__(){return m(this,function(a,b){return a.__ns_inv__().__mul__(b)})},get __matmul__(){return m(this,function(a,b){var c=p([a.shape[0],b.shape[1],a.shape[1]]),e=c[0],k=c[1],f=c[2],h=q(p([e,k]),a.dtype),n=a.ns_natural||d.optim_space?a:N(a),l=b.ns_natural||d.optim_space?b:N(b);if(n.ns_natural&&l.ns_natural)for(var g=
0;g<e;g++)for(var m=0;m<k;m++)for(var c=p([h.data,n.data,l.data]),r=c[0],H=c[1],t=c[2],c=0;c<f;c++)r[g*k+m]+=H[g*f+c]*t[c*k+m];else for(g=0;g<e;g++)for(m=0;m<k;m++){for(c=r=0;c<f;c++)r+=n.__getitem__([g,c])*l.__getitem__([c,m]);h.__setitem__([g,m],r)}return h})}}),q=function(a,b){if("undefined"==typeof b||null!=b&&b.__class__==t)b="float64";return g(a,b,new J[b](H(a)))},r=function(a,c,d){if("undefined"==typeof c||null!=c&&c.__class__==t)c="float64";if("undefined"==typeof d||null!=d&&d.__class__==
t)d=!0;var e=function(c,d){for(var f=0;f<a.shape[c];f++)if(c<a.ndim-1)e(c+1,b.chain(d,h([f])));else{var g=b.chain(d,h([f]));k.__setitem__(g,a.__getitem__(g))}};if(a.__class__==g){if(d){var k=q(a.shape,c);if(a.ns_natural){d=p([a.data,k.data]);c=d[0];d=d[1];for(var f=0;f<c.length;f++)d[f]=c[f]}else e(0,h([]));return k}return g(a.shape,a.dtype,a.buffer,a.offset,a.strides)}d=h([]);for(f=a;Array.isArray(f);)d.append(f.length),f=f[0];var m=function(a){return Array.isArray(a[0])?b.chain.apply(null,function(){for(var b=
[],c=0;c<a.length;c++)b.append(m(a[c]));return b}()):a};return g(d,c,J[c].from(m(a)))},N=function(a){return r(a,a.dtype,!0)},u=function(a,b){if("undefined"==typeof b||null!=b&&b.__class__==t)b="float64";for(var c=q(a,b),d=c.data,e=0;e<d.length;e++)d[e]=0;return c};a.array=r;a.copy=N;a.empty=q;a.hsplit=function(a,b){for(var c=h([]),d=h([a.shape[0],a.shape[1]/b]),e=0;e<b;e++)c.append(g(d.__getslice__(0,null,1),a.dtype,a.data,e*d[1]*a.strides[1],a.strides.__getslice__(0,null,1)));return c};a.hstack=
function(a){for(var b=0,c=a,d=0;d<c.length;d++)var e=c[d],b=b+e.shape[1];for(var b=q(h([a[0].shape[0],b]),a[0].dtype),f=0,c=a,d=0;d<c.length;d++){e=c[d];for(a=0;a<e.shape[0];a++)for(var g=0;g<e.shape[1];g++)b.__setitem__([a,f+g],e.__getitem__([a,g]));f+=e.shape[1]}return b};a.identity=function(a,b){if("undefined"==typeof b||null!=b&&b.__class__==t)b="float64";for(var c=u(p([a,a]),b),d=0;d<a;d++)c.data[d*c.shape[1]+d]=1;return c};a.ndarray=g;a.ns_ctors=J;a.ns_itemsizes=e;a.ns_length=H;a.ns_settings=
d;a.ones=function(a,b){if("undefined"==typeof b||null!=b&&b.__class__==t)b="float64";for(var c=q(a,b),d=c.data,e=0;e<d.length;e++)d[e]=1;return c};a.round=function(a,c){if("undefined"==typeof c||null!=c&&c.__class__==t)c=0;var d=function(f,g){for(var k=0;k<a.shape[f];k++)if(f<a.ndim-1)d(f+1,b.chain(g,h([k])));else{var m=b.chain(g,h([k]));e.__setitem__(m,a.__getitem__(m).toFixed(c))}},e=q(a.shape,a.dtype);if(a.ns_natural)for(var k=p([a.data,e.data]),f=k[0],k=k[1],g=0;g<f.length;g++)k[g]=f[g].toFixed(c);
else d(0,h([]));return e};a.vsplit=function(a,b){for(var c=h([]),d=h([a.shape[0]/b,a.shape[1]]),e=0;e<b;e++)c.append(g(d.__getslice__(0,null,1),a.dtype,a.data,e*d[0]*a.strides[0],a.strides.__getslice__(0,null,1)));return c};a.vstack=function(a){for(var b=0,c=a,d=0;d<c.length;d++)var e=c[d],b=b+e.shape[0];for(var b=q(h([b,a[0].shape[1]]),a[0].dtype),f=0,c=a,d=0;d<c.length;d++){e=c[d];for(a=0;a<e.shape[0];a++)for(var g=0;g<e.shape[1];g++)b.__setitem__([f+a,g],e.__getitem__([a,g]));f+=e.shape[0]}return b};
a.zeros=u}}});B(c,"numscrypt.linalg",{__all__:{__inited__:!1,__init__:function(a){var b=D(c.numscrypt);a.inv=function(a){a=b.hstack(p([a,b.identity(a.shape[0],a.dtype)]));for(var c=a.shape,h=c[0],c=c[1],m=a.data,g=0;g<h;g++){if(!m[g*c+g])for(var q=g+1;q<h;q++)if(m[q*c+g]){for(var r=0;r<c;r++){var t=m[q*c+r];m[q*c+r]=a.__getitem__([g*c,r]);m[g*c+r]=t}break}q=m[g*c+g];for(r=g;r<c;r++)m[g*c+r]/=q;for(q=0;q<h;q++)if(q!=g)for(t=m[q*c+g],r=0;r<c;r++)m[q*c+r]-=t*m[g*c+r]}return b.hsplit(a,2)[1]}}}});B(c,
"numscrypt.random",{__all__:{__inited__:!1,__init__:function(a){var b=D(c.numscrypt);a.rand=function(){for(var a=p([].slice.apply(arguments).slice(0)),a=b.empty(a,"float64"),c=0;c<a.data.length;c++)a.data[c]=Math.random();return a}}}});(function(){for(var a=D(c.numscrypt),b=D(c.numscrypt.random),d=D(c.numscrypt.linalg),e="",h=p([!1,!0]),m=0;m<h.length;m++){var g=h[m];a.ns_settings.optim_space=g;for(var q=p([!1,!0]),r=0;r<q.length;r++){var t=q[r],u=b.rand(30,30),x=new Date;t&&(u=u.transpose());var w=
new Date,y=d.inv(u),A=new Date,k=u.__matmul__(y),f=new Date,e=e+"<pre>\nOptimized for space instead of time: {}\n\t\n{}: a @ ai [0:5, 0:5] =\n\n{}\n\nTranspose took: {} ms\nInverse took: {} ms\nProduct took: {} ms\n\t\t\t</pre>".format(g,u.ns_natural?"natural":"unnatural",C(a.round(k.__getitem__([p([0,5,1]),p([0,5,1])]),2)).py_replace(" ","\t"),w-x,A-w,f-A)}}document.getElementById("result").innerHTML=e;c.a=u;c.ai=y;c.id=k;c.optim_space=g;c.result=e;c.timeEnd=f;c.timeStartInv=w;c.timeStartMul=A;c.timeStartTranspose=
x;c.transpose=t})();return c}window.test=test();
