!function(t){var a=new Array,e=new Array;t.fn.doAutosize=function(a){var e=t(this).data("minwidth"),i=t(this).data("maxwidth"),n="",u=t(this),s=t("#"+t(this).data("tester_id"));if(n!==(n=u.val())){var d=n.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");s.html(d);var o=s.width(),r=o+a.comfortZone>=e?o+a.comfortZone:e,l=u.width(),p=l>r&&r>=e||r>e&&i>r;p&&u.width(r)}},t.fn.resetAutosize=function(a){var e=t(this).data("minwidth")||a.minInputWidth||t(this).width(),i=t(this).data("maxwidth")||a.maxInputWidth||t(this).closest(".tagsinput").width()-a.inputPadding,n=t(this),u=t("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),letterSpacing:n.css("letterSpacing"),whiteSpace:"nowrap"}),s=t(this).attr("id")+"_autosize_tester";!t("#"+s).length>0&&(u.attr("id",s),u.appendTo("body")),n.data("minwidth",e),n.data("maxwidth",i),n.data("tester_id",s),n.css("width",e)},t.fn.addTag=function(i,n){return n=jQuery.extend({focus:!1,callback:!0},n),this.each(function(){var u=t(this).attr("id"),s=t(this).val().split(a[u]);if(""==s[0]&&(s=new Array),i=jQuery.trim(i),n.unique){var d=t(this).tagExist(i);1==d&&t("#"+u+"_tag").addClass("not_valid")}else var d=!1;if(""!=i&&1!=d){if(t("<span>").addClass("tag").append(t("<span>").text(i).append("&nbsp;&nbsp;"),t('<a class="tagsinput-remove-link">',{href:"#",title:"Remove tag",text:""}).click(function(){return t("#"+u).removeTag(escape(i))})).insertBefore("#"+u+"_addTag"),s.push(i),t("#"+u+"_tag").val(""),n.focus?t("#"+u+"_tag").focus():t("#"+u+"_tag").blur(),t.fn.tagsInput.updateTagsField(this,s),n.callback&&e[u]&&e[u].onAddTag){var o=e[u].onAddTag;o.call(this,i)}if(e[u]&&e[u].onChange){var r=s.length,o=e[u].onChange;o.call(this,t(this),s[r-1])}}}),!1},t.fn.removeTag=function(n){return n=unescape(n),this.each(function(){var u=t(this).attr("id"),s=t(this).val().split(a[u]);for(t("#"+u+"_tagsinput .tag").remove(),str="",i=0;i<s.length;i++)s[i]!=n&&(str=str+a[u]+s[i]);if(t.fn.tagsInput.importTags(this,str),e[u]&&e[u].onRemoveTag){var d=e[u].onRemoveTag;d.call(this,n)}}),!1},t.fn.tagExist=function(e){var i=t(this).attr("id"),n=t(this).val().split(a[i]);return jQuery.inArray(e,n)>=0},t.fn.importTags=function(a){id=t(this).attr("id"),t("#"+id+"_tagsinput .tag").remove(),t.fn.tagsInput.importTags(this,a)},t.fn.tagsInput=function(i){var n=jQuery.extend({interactive:!0,defaultText:"",minChars:0,width:"",height:"",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},i);return this.each(function(){n.hide&&t(this).hide();var i=t(this).attr("id");i&&!a[t(this).attr("id")]||(i=t(this).attr("id","tags"+(new Date).getTime()).attr("id"));var u=jQuery.extend({pid:i,real_input:"#"+i,holder:"#"+i+"_tagsinput",input_wrapper:"#"+i+"_addTag",fake_input:"#"+i+"_tag"},n);a[i]=u.delimiter,(n.onAddTag||n.onRemoveTag||n.onChange)&&(e[i]=new Array,e[i].onAddTag=n.onAddTag,e[i].onRemoveTag=n.onRemoveTag,e[i].onChange=n.onChange);var s=t("#"+i).attr("class").replace("tagsinput",""),d='<div id="'+i+'_tagsinput" class="tagsinput '+s+'"><div class="tagsinput-add-container" id="'+i+'_addTag"><div class="tagsinput-add"></div>';if(n.interactive&&(d=d+'<input id="'+i+'_tag" value="" data-default="'+n.defaultText+'" />'),d+="</div></div>",t(d).insertAfter(this),t(u.holder).css("width",n.width),t(u.holder).css("min-height",n.height),t(u.holder).css("height","100%"),""!=t(u.real_input).val()&&t.fn.tagsInput.importTags(t(u.real_input),t(u.real_input).val()),n.interactive){if(t(u.fake_input).val(t(u.fake_input).attr("data-default")),t(u.fake_input).css("color",n.placeholderColor),t(u.fake_input).resetAutosize(n),t(u.holder).bind("click",u,function(a){t(a.data.fake_input).focus()}),t(u.fake_input).bind("focus",u,function(a){t(a.data.fake_input).val()==t(a.data.fake_input).attr("data-default")&&t(a.data.fake_input).val(""),t(a.data.fake_input).css("color","#000000")}),void 0!=n.autocomplete_url){autocomplete_options={source:n.autocomplete_url};for(attrname in n.autocomplete)autocomplete_options[attrname]=n.autocomplete[attrname];void 0!==jQuery.Autocompleter?(t(u.fake_input).autocomplete(n.autocomplete_url,n.autocomplete),t(u.fake_input).bind("result",u,function(a,e,u){e&&t("#"+i).addTag(e[0]+"",{focus:!0,unique:n.unique})})):void 0!==jQuery.ui.autocomplete&&(t(u.fake_input).autocomplete(autocomplete_options),t(u.fake_input).bind("autocompleteselect",u,function(a,e){return t(a.data.real_input).addTag(e.item.value,{focus:!0,unique:n.unique}),!1}))}else t(u.fake_input).bind("blur",u,function(a){var e=t(this).attr("data-default");return""!=t(a.data.fake_input).val()&&t(a.data.fake_input).val()!=e?a.data.minChars<=t(a.data.fake_input).val().length&&(!a.data.maxChars||a.data.maxChars>=t(a.data.fake_input).val().length)&&t(a.data.real_input).addTag(t(a.data.fake_input).val(),{focus:!0,unique:n.unique}):(t(a.data.fake_input).val(t(a.data.fake_input).attr("data-default")),t(a.data.fake_input).css("color",n.placeholderColor)),!1});t(u.fake_input).bind("keypress",u,function(a){return a.which==a.data.delimiter.charCodeAt(0)||13==a.which?(a.preventDefault(),a.data.minChars<=t(a.data.fake_input).val().length&&(!a.data.maxChars||a.data.maxChars>=t(a.data.fake_input).val().length)&&t(a.data.real_input).addTag(t(a.data.fake_input).val(),{focus:!0,unique:n.unique}),t(a.data.fake_input).resetAutosize(n),!1):void(a.data.autosize&&t(a.data.fake_input).doAutosize(n))}),u.removeWithBackspace&&t(u.fake_input).bind("keydown",function(a){if(8==a.keyCode&&""==t(this).val()){a.preventDefault();var e=t(this).closest(".tagsinput").find(".tag:last").text(),i=t(this).attr("id").replace(/_tag$/,"");e=e.replace(/[\s\u00a0]+x$/,""),t("#"+i).removeTag(escape(e)),t(this).trigger("focus")}}),t(u.fake_input).blur(),u.unique&&t(u.fake_input).keydown(function(a){(8==a.keyCode||String.fromCharCode(a.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,\/]+/))&&t(this).removeClass("not_valid")})}}),this},t.fn.tagsInput.updateTagsField=function(e,i){var n=t(e).attr("id");t(e).val(i.join(a[n]))},t.fn.tagsInput.importTags=function(n,u){t(n).val("");var s=t(n).attr("id"),d=u.split(a[s]);for(i=0;i<d.length;i++)t(n).addTag(d[i],{focus:!1,callback:!1});if(e[s]&&e[s].onChange){var o=e[s].onChange;o.call(n,n,d[i])}}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yY2hlc3RyYS9jb21tb24vanMvbGliL2pxdWVyeS50YWdzaW5wdXQuanMiXSwibmFtZXMiOlsiJCIsImRlbGltaXRlciIsIkFycmF5IiwidGFnc19jYWxsYmFja3MiLCJmbiIsImRvQXV0b3NpemUiLCJvIiwibWluV2lkdGgiLCJ0aGlzIiwiZGF0YSIsIm1heFdpZHRoIiwidmFsIiwiaW5wdXQiLCJ0ZXN0U3ViamVjdCIsImVzY2FwZWQiLCJyZXBsYWNlIiwiaHRtbCIsInRlc3RlcldpZHRoIiwid2lkdGgiLCJuZXdXaWR0aCIsImNvbWZvcnRab25lIiwiY3VycmVudFdpZHRoIiwiaXNWYWxpZFdpZHRoQ2hhbmdlIiwicmVzZXRBdXRvc2l6ZSIsIm9wdGlvbnMiLCJtaW5JbnB1dFdpZHRoIiwibWF4SW5wdXRXaWR0aCIsImNsb3Nlc3QiLCJpbnB1dFBhZGRpbmciLCJjc3MiLCJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJmb250U2l6ZSIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwibGV0dGVyU3BhY2luZyIsIndoaXRlU3BhY2UiLCJ0ZXN0ZXJJZCIsImF0dHIiLCJsZW5ndGgiLCJhcHBlbmRUbyIsImFkZFRhZyIsInZhbHVlIiwialF1ZXJ5IiwiZXh0ZW5kIiwiZm9jdXMiLCJjYWxsYmFjayIsImVhY2giLCJpZCIsInRhZ3NsaXN0Iiwic3BsaXQiLCJ0cmltIiwidW5pcXVlIiwic2tpcFRhZyIsInRhZ0V4aXN0IiwiYWRkQ2xhc3MiLCJhcHBlbmQiLCJ0ZXh0IiwiaHJlZiIsInRpdGxlIiwiY2xpY2siLCJyZW1vdmVUYWciLCJlc2NhcGUiLCJpbnNlcnRCZWZvcmUiLCJwdXNoIiwiYmx1ciIsInRhZ3NJbnB1dCIsInVwZGF0ZVRhZ3NGaWVsZCIsImYiLCJjYWxsIiwiaSIsInVuZXNjYXBlIiwib2xkIiwicmVtb3ZlIiwic3RyIiwiaW1wb3J0VGFncyIsImluQXJyYXkiLCJzZXR0aW5ncyIsImludGVyYWN0aXZlIiwiZGVmYXVsdFRleHQiLCJtaW5DaGFycyIsImhlaWdodCIsImF1dG9jb21wbGV0ZSIsInNlbGVjdEZpcnN0IiwiaGlkZSIsInJlbW92ZVdpdGhCYWNrc3BhY2UiLCJwbGFjZWhvbGRlckNvbG9yIiwiYXV0b3NpemUiLCJEYXRlIiwiZ2V0VGltZSIsInBpZCIsInJlYWxfaW5wdXQiLCJob2xkZXIiLCJpbnB1dF93cmFwcGVyIiwiZmFrZV9pbnB1dCIsIm9uQWRkVGFnIiwib25SZW1vdmVUYWciLCJvbkNoYW5nZSIsImNvbnRhaW5lckNsYXNzIiwibWFya3VwIiwiaW5zZXJ0QWZ0ZXIiLCJiaW5kIiwiZXZlbnQiLCJ1bmRlZmluZWQiLCJhdXRvY29tcGxldGVfdXJsIiwiYXV0b2NvbXBsZXRlX29wdGlvbnMiLCJzb3VyY2UiLCJhdHRybmFtZSIsIkF1dG9jb21wbGV0ZXIiLCJmb3JtYXR0ZWQiLCJ1aSIsIml0ZW0iLCJkIiwibWF4Q2hhcnMiLCJ3aGljaCIsImNoYXJDb2RlQXQiLCJwcmV2ZW50RGVmYXVsdCIsImtleUNvZGUiLCJsYXN0X3RhZyIsImZpbmQiLCJ0cmlnZ2VyIiwia2V5ZG93biIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIm1hdGNoIiwicmVtb3ZlQ2xhc3MiLCJvYmoiLCJqb2luIiwidGFncyJdLCJtYXBwaW5ncyI6IkNBZ0JBLFNBQVVBLEdBRVQsR0FBSUMsR0FBWSxHQUFJQyxPQUNoQkMsRUFBaUIsR0FBSUQsTUFDekJGLEdBQUVJLEdBQUdDLFdBQWEsU0FBU0MsR0FDdkIsR0FBSUMsR0FBV1AsRUFBRVEsTUFBTUMsS0FBSyxZQUN4QkMsRUFBV1YsRUFBRVEsTUFBTUMsS0FBSyxZQUN4QkUsRUFBTSxHQUNOQyxFQUFRWixFQUFFUSxNQUNWSyxFQUFjYixFQUFFLElBQUlBLEVBQUVRLE1BQU1DLEtBQUssYUFFckMsSUFBSUUsS0FBU0EsRUFBTUMsRUFBTUQsT0FBekIsQ0FHQSxHQUFJRyxHQUFVSCxFQUFJSSxRQUFRLEtBQU0sU0FBU0EsUUFBUSxNQUFNLEtBQUtBLFFBQVEsS0FBTSxRQUFRQSxRQUFRLEtBQU0sT0FD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WUFBWTdCLE9BR2hCekQsRUFBSzRDLFFBQ0pyRCxFQUFFUyxFQUFLc0YsWUFBWTJCLFFBQVEsU0FBU25CLElBQ1osR0FBakJBLEVBQU1lLFNBQWdCSyxPQUFPQyxhQUFhckIsRUFBTVksT0FBT1UsTUFBTSw0QkFDNUQ3SCxFQUFFUSxNQUFNc0gsWUFBWSxrQkFPM0J0SCxNQUlSUixFQUFFSSxHQUFHK0QsVUFBVUMsZ0JBQWtCLFNBQVMyRCxFQUFJN0UsR0FDN0MsR0FBSUQsR0FBS2pELEVBQUUrSCxHQUFLeEYsS0FBSyxLQUNyQnZDLEdBQUUrSCxHQUFLcEgsSUFBSXVDLEVBQVM4RSxLQUFLL0gsRUFBVWdELE1BR3BDakQsRUFBRUksR0FBRytELFVBQVVTLFdBQWEsU0FBU21ELEVBQUlwSCxHQUN4Q1gsRUFBRStILEdBQUtwSCxJQUFJLEdBQ1gsSUFBSXNDLEdBQUtqRCxFQUFFK0gsR0FBS3hGLEtBQUssTUFDakIwRixFQUFPdEgsRUFBSXdDLE1BQU1sRCxFQUFVZ0QsR0FDL0IsS0FBS3NCLEVBQUUsRUFBR0EsRUFBRTBELEVBQUt6RixPQUFRK0IsSUFDeEJ2RSxFQUFFK0gsR0FBS3JGLE9BQU91RixFQUFLMUQsSUFBSXpCLE9BQU0sRUFBTUMsVUFBUyxHQUU3QyxJQUFHNUMsRUFBZThDLElBQU85QyxFQUFlOEMsR0FBSSxTQUM1QyxDQUNDLEdBQUlvQixHQUFJbEUsRUFBZThDLEdBQUksUUFDM0JvQixHQUFFQyxLQUFLeUQsRUFBS0EsRUFBS0UsRUFBSzFELE9BSXRCM0IiLCJmaWxlIjoib3JjaGVzdHJhL2NvbW1vbi9qcy9saWIvanF1ZXJ5LnRhZ3NpbnB1dC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuXG5cdGpRdWVyeSBUYWdzIElucHV0IFBsdWdpbiAxLjMuM1xuXHRcblx0Q29weXJpZ2h0IChjKSAyMDExIFhPWENPLCBJbmNcblx0XG5cdERvY3VtZW50YXRpb24gZm9yIHRoaXMgcGx1Z2luIGxpdmVzIGhlcmU6XG5cdGh0dHA6Ly94b3hjby5jb20vY2xpY2thYmxlL2pxdWVyeS10YWdzLWlucHV0XG5cdFxuXHRMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6XG5cdGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cblx0YmVuQHhveGNvLmNvbVxuXG4qL1xuXG4oZnVuY3Rpb24oJCkge1xuXG5cdHZhciBkZWxpbWl0ZXIgPSBuZXcgQXJyYXkoKTtcblx0dmFyIHRhZ3NfY2FsbGJhY2tzID0gbmV3IEFycmF5KCk7XG5cdCQuZm4uZG9BdXRvc2l6ZSA9IGZ1bmN0aW9uKG8pe1xuXHQgICAgdmFyIG1pbldpZHRoID0gJCh0aGlzKS5kYXRhKCdtaW53aWR0aCcpLFxuXHQgICAgICAgIG1heFdpZHRoID0gJCh0aGlzKS5kYXRhKCdtYXh3aWR0aCcpLFxuXHQgICAgICAgIHZhbCA9ICcnLFxuXHQgICAgICAgIGlucHV0ID0gJCh0aGlzKSxcblx0ICAgICAgICB0ZXN0U3ViamVjdCA9ICQoJyMnKyQodGhpcykuZGF0YSgndGVzdGVyX2lkJykpO1xuXHRcblx0ICAgIGlmICh2YWwgPT09ICh2YWwgPSBpbnB1dC52YWwoKSkpIHtyZXR1cm47fVxuXHRcblx0ICAgIC8vIEVudGVyIG5ldyBjb250ZW50IGludG8gdGVzdFN1YmplY3Rcblx0ICAgIHZhciBlc2NhcGVkID0gdmFsLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvXFxzL2csJyAnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpO1xuXHQgICAgdGVzdFN1YmplY3QuaHRtbChlc2NhcGVkKTtcblx0ICAgIC8vIENhbGN1bGF0ZSBuZXcgd2lkdGggKyB3aGV0aGVyIHRvIGNoYW5nZVxuXHQgICAgdmFyIHRlc3RlcldpZHRoID0gdGVzdFN1YmplY3Qud2lkdGgoKSxcblx0ICAgICAgICBuZXdXaWR0aCA9ICh0ZXN0ZXJXaWR0aCArIG8uY29tZm9ydFpvbmUpID49IG1pbldpZHRoID8gdGVzdGVyV2lkdGggKyBvLmNvbWZvcnRab25lIDogbWluV2lkdGgsXG5cdCAgICAgICAgY3VycmVudFdpZHRoID0gaW5wdXQud2lkdGgoKSxcblx0ICAgICAgICBpc1ZhbGlkV2lkdGhDaGFuZ2UgPSAobmV3V2lkdGggPCBjdXJyZW50V2lkdGggJiYgbmV3V2lkdGggPj0gbWluV2lkdGgpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKG5ld1dpZHRoID4gbWluV2lkdGggJiYgbmV3V2lkdGggPCBtYXhXaWR0aCk7XG5cdFxuXHQgICAgLy8gQW5pbWF0ZSB3aWR0aFxuXHQgICAgaWYgKGlzVmFsaWRXaWR0aENoYW5nZSkge1xuXHQgICAgICAgIGlucHV0LndpZHRoKG5ld1dpZHRoKTtcblx0ICAgIH1cblxuXG4gIH07XG4gICQuZm4ucmVzZXRBdXRvc2l6ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgIC8vIGFsZXJ0KEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpKTtcbiAgICB2YXIgbWluV2lkdGggPSAgJCh0aGlzKS5kYXRhKCdtaW53aWR0aCcpIHx8IG9wdGlvbnMubWluSW5wdXRXaWR0aCB8fCAkKHRoaXMpLndpZHRoKCksXG4gICAgICAgIG1heFdpZHRoID0gJCh0aGlzKS5kYXRhKCdtYXh3aWR0aCcpIHx8IG9wdGlvbnMubWF4SW5wdXRXaWR0aCB8fCAoJCh0aGlzKS5jbG9zZXN0KCcudGFnc2lucHV0Jykud2lkdGgoKSAtIG9wdGlvbnMuaW5wdXRQYWRkaW5nKSxcbiAgICAgICAgdmFsID0gJycsXG4gICAgICAgIGlucHV0ID0gJCh0aGlzKSxcbiAgICAgICAgdGVzdFN1YmplY3QgPSAkKCc8dGVzdGVyLz4nKS5jc3Moe1xuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICB0b3A6IC05OTk5LFxuICAgICAgICAgICAgbGVmdDogLTk5OTksXG4gICAgICAgICAgICB3aWR0aDogJ2F1dG8nLFxuICAgICAgICAgICAgZm9udFNpemU6IGlucHV0LmNzcygnZm9udFNpemUnKSxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6IGlucHV0LmNzcygnZm9udEZhbWlseScpLFxuICAgICAgICAgICAgZm9udFdlaWdodDogaW5wdXQuY3NzKCdmb250V2VpZ2h0JyksXG4gICAgICAgICAgICBsZXR0ZXJTcGFjaW5nOiBpbnB1dC5jc3MoJ2xldHRlclNwYWNpbmcnKSxcbiAgICAgICAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnXG4gICAgICAgIH0pLFxuICAgICAgICB0ZXN0ZXJJZCA9ICQodGhpcykuYXR0cignaWQnKSsnX2F1dG9zaXplX3Rlc3Rlcic7XG4gICAgaWYoISAkKCcjJyt0ZXN0ZXJJZCkubGVuZ3RoID4gMCl7XG4gICAgICB0ZXN0U3ViamVjdC5hdHRyKCdpZCcsIHRlc3RlcklkKTtcbiAgICAgIHRlc3RTdWJqZWN0LmFwcGVuZFRvKCdib2R5Jyk7XG4gICAgfVxuXG4gICAgaW5wdXQuZGF0YSgnbWlud2lkdGgnLCBtaW5XaWR0aCk7XG4gICAgaW5wdXQuZGF0YSgnbWF4d2lkdGgnLCBtYXhXaWR0aCk7XG4gICAgaW5wdXQuZGF0YSgndGVzdGVyX2lkJywgdGVzdGVySWQpO1xuICAgIGlucHV0LmNzcygnd2lkdGgnLCBtaW5XaWR0aCk7XG4gIH07XG4gIFxuXHQkLmZuLmFkZFRhZyA9IGZ1bmN0aW9uKHZhbHVlLG9wdGlvbnMpIHtcblx0XHRcdG9wdGlvbnMgPSBqUXVlcnkuZXh0ZW5kKHtmb2N1czpmYWxzZSxjYWxsYmFjazp0cnVlfSxvcHRpb25zKTtcblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHsgXG5cdFx0XHRcdHZhciBpZCA9ICQodGhpcykuYXR0cignaWQnKTtcblxuXHRcdFx0XHR2YXIgdGFnc2xpc3QgPSAkKHRoaXMpLnZhbCgpLnNwbGl0KGRlbGltaXRlcltpZF0pO1xuXHRcdFx0XHRpZiAodGFnc2xpc3RbMF0gPT0gJycpIHsgXG5cdFx0XHRcdFx0dGFnc2xpc3QgPSBuZXcgQXJyYXkoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhbHVlID0galF1ZXJ5LnRyaW0odmFsdWUpO1xuXHRcdFxuXHRcdFx0XHRpZiAob3B0aW9ucy51bmlxdWUpIHtcblx0XHRcdFx0XHR2YXIgc2tpcFRhZyA9ICQodGhpcykudGFnRXhpc3QodmFsdWUpO1xuXHRcdFx0XHRcdGlmKHNraXBUYWcgPT0gdHJ1ZSkge1xuXHRcdFx0XHRcdCAgICAvL01hcmtzIGZha2UgaW5wdXQgYXMgbm90X3ZhbGlkIHRvIGxldCBzdHlsaW5nIGl0XG4gICAgXHRcdFx0XHQgICAgJCgnIycraWQrJ190YWcnKS5hZGRDbGFzcygnbm90X3ZhbGlkJyk7XG4gICAgXHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFyIHNraXBUYWcgPSBmYWxzZTsgXG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmICh2YWx1ZSAhPScnICYmIHNraXBUYWcgIT0gdHJ1ZSkgeyBcbiAgICAgICAgICAgICAgICAgICAgJCgnPHNwYW4+JykuYWRkQ2xhc3MoJ3RhZycpLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJzxzcGFuPicpLnRleHQodmFsdWUpLmFwcGVuZCgnJm5ic3A7Jm5ic3A7JyksXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCc8YSBjbGFzcz1cInRhZ3NpbnB1dC1yZW1vdmUtbGlua1wiPicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmICA6ICcjJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSA6ICdSZW1vdmUgdGFnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICA6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoJyMnICsgaWQpLnJlbW92ZVRhZyhlc2NhcGUodmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICkuaW5zZXJ0QmVmb3JlKCcjJyArIGlkICsgJ19hZGRUYWcnKTtcblxuXHRcdFx0XHRcdHRhZ3NsaXN0LnB1c2godmFsdWUpO1xuXHRcdFx0XHRcblx0XHRcdFx0XHQkKCcjJytpZCsnX3RhZycpLnZhbCgnJyk7XG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMuZm9jdXMpIHtcblx0XHRcdFx0XHRcdCQoJyMnK2lkKydfdGFnJykuZm9jdXMoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1x0XHRcblx0XHRcdFx0XHRcdCQoJyMnK2lkKydfdGFnJykuYmx1cigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQkLmZuLnRhZ3NJbnB1dC51cGRhdGVUYWdzRmllbGQodGhpcyx0YWdzbGlzdCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMuY2FsbGJhY2sgJiYgdGFnc19jYWxsYmFja3NbaWRdICYmIHRhZ3NfY2FsbGJhY2tzW2lkXVsnb25BZGRUYWcnXSkge1xuXHRcdFx0XHRcdFx0dmFyIGYgPSB0YWdzX2NhbGxiYWNrc1tpZF1bJ29uQWRkVGFnJ107XG5cdFx0XHRcdFx0XHRmLmNhbGwodGhpcywgdmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZih0YWdzX2NhbGxiYWNrc1tpZF0gJiYgdGFnc19jYWxsYmFja3NbaWRdWydvbkNoYW5nZSddKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHZhciBpID0gdGFnc2xpc3QubGVuZ3RoO1xuXHRcdFx0XHRcdFx0dmFyIGYgPSB0YWdzX2NhbGxiYWNrc1tpZF1bJ29uQ2hhbmdlJ107XG5cdFx0XHRcdFx0XHRmLmNhbGwodGhpcywgJCh0aGlzKSwgdGFnc2xpc3RbaS0xXSk7XG5cdFx0XHRcdFx0fVx0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFxuXHRcdFx0fSk7XHRcdFxuXHRcdFx0XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblx0XHRcblx0JC5mbi5yZW1vdmVUYWcgPSBmdW5jdGlvbih2YWx1ZSkgeyBcblx0XHRcdHZhbHVlID0gdW5lc2NhcGUodmFsdWUpO1xuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkgeyBcblx0XHRcdFx0dmFyIGlkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuXHRcblx0XHRcdFx0dmFyIG9sZCA9ICQodGhpcykudmFsKCkuc3BsaXQoZGVsaW1pdGVyW2lkXSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdCQoJyMnK2lkKydfdGFnc2lucHV0IC50YWcnKS5yZW1vdmUoKTtcblx0XHRcdFx0c3RyID0gJyc7XG5cdFx0XHRcdGZvciAoaT0wOyBpPCBvbGQubGVuZ3RoOyBpKyspIHsgXG5cdFx0XHRcdFx0aWYgKG9sZFtpXSE9dmFsdWUpIHsgXG5cdFx0XHRcdFx0XHRzdHIgPSBzdHIgKyBkZWxpbWl0ZXJbaWRdICtvbGRbaV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQkLmZuLnRhZ3NJbnB1dC5pbXBvcnRUYWdzKHRoaXMsc3RyKTtcblxuXHRcdFx0XHRpZiAodGFnc19jYWxsYmFja3NbaWRdICYmIHRhZ3NfY2FsbGJhY2tzW2lkXVsnb25SZW1vdmVUYWcnXSkge1xuXHRcdFx0XHRcdHZhciBmID0gdGFnc19jYWxsYmFja3NbaWRdWydvblJlbW92ZVRhZyddO1xuXHRcdFx0XHRcdGYuY2FsbCh0aGlzLCB2YWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cdFxuXHQkLmZuLnRhZ0V4aXN0ID0gZnVuY3Rpb24odmFsKSB7XG5cdFx0dmFyIGlkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuXHRcdHZhciB0YWdzbGlzdCA9ICQodGhpcykudmFsKCkuc3BsaXQoZGVsaW1pdGVyW2lkXSk7XG5cdFx0cmV0dXJuIChqUXVlcnkuaW5BcnJheSh2YWwsIHRhZ3NsaXN0KSA+PSAwKTsgLy90cnVlIHdoZW4gdGFnIGV4aXN0cywgZmFsc2Ugd2hlbiBub3Rcblx0fTtcblx0XG5cdC8vIGNsZWFyIGFsbCBleGlzdGluZyB0YWdzIGFuZCBpbXBvcnQgbmV3IG9uZXMgZnJvbSBhIHN0cmluZ1xuXHQkLmZuLmltcG9ydFRhZ3MgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgICAgICAgICBpZCA9ICQodGhpcykuYXR0cignaWQnKTtcblx0XHQkKCcjJytpZCsnX3RhZ3NpbnB1dCAudGFnJykucmVtb3ZlKCk7XG5cdFx0JC5mbi50YWdzSW5wdXQuaW1wb3J0VGFncyh0aGlzLHN0cik7XG5cdH1cblx0XHRcblx0JC5mbi50YWdzSW5wdXQgPSBmdW5jdGlvbihvcHRpb25zKSB7IFxuICAgIHZhciBzZXR0aW5ncyA9IGpRdWVyeS5leHRlbmQoe1xuICAgICAgaW50ZXJhY3RpdmU6dHJ1ZSxcbiAgICAgIGRlZmF1bHRUZXh0OicnLFxuICAgICAgbWluQ2hhcnM6MCxcbiAgICAgIHdpZHRoOicnLFxuICAgICAgaGVpZ2h0OicnLFxuICAgICAgYXV0b2NvbXBsZXRlOiB7c2VsZWN0Rmlyc3Q6IGZhbHNlIH0sXG4gICAgICAnaGlkZSc6dHJ1ZSxcbiAgICAgICdkZWxpbWl0ZXInOicsJyxcbiAgICAgICd1bmlxdWUnOnRydWUsXG4gICAgICByZW1vdmVXaXRoQmFja3NwYWNlOnRydWUsXG4gICAgICBwbGFjZWhvbGRlckNvbG9yOicjNjY2NjY2JyxcbiAgICAgIGF1dG9zaXplOiB0cnVlLFxuICAgICAgY29tZm9ydFpvbmU6IDIwLFxuICAgICAgaW5wdXRQYWRkaW5nOiA2KjJcbiAgICB9LG9wdGlvbnMpO1xuXG5cdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkgeyBcblx0XHRcdGlmIChzZXR0aW5ncy5oaWRlKSB7IFxuXHRcdFx0XHQkKHRoaXMpLmhpZGUoKTtcdFx0XHRcdFxuXHRcdFx0fVxuXHRcdFx0dmFyIGlkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuXHRcdFx0aWYgKCFpZCB8fCBkZWxpbWl0ZXJbJCh0aGlzKS5hdHRyKCdpZCcpXSkge1xuXHRcdFx0XHRpZCA9ICQodGhpcykuYXR0cignaWQnLCAndGFncycgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSkuYXR0cignaWQnKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dmFyIGRhdGEgPSBqUXVlcnkuZXh0ZW5kKHtcblx0XHRcdFx0cGlkOmlkLFxuXHRcdFx0XHRyZWFsX2lucHV0OiAnIycraWQsXG5cdFx0XHRcdGhvbGRlcjogJyMnK2lkKydfdGFnc2lucHV0Jyxcblx0XHRcdFx0aW5wdXRfd3JhcHBlcjogJyMnK2lkKydfYWRkVGFnJyxcblx0XHRcdFx0ZmFrZV9pbnB1dDogJyMnK2lkKydfdGFnJ1xuXHRcdFx0fSxzZXR0aW5ncyk7XG5cdFxuXHRcdFx0ZGVsaW1pdGVyW2lkXSA9IGRhdGEuZGVsaW1pdGVyO1xuXHRcdFx0XG5cdFx0XHRpZiAoc2V0dGluZ3Mub25BZGRUYWcgfHwgc2V0dGluZ3Mub25SZW1vdmVUYWcgfHwgc2V0dGluZ3Mub25DaGFuZ2UpIHtcblx0XHRcdFx0dGFnc19jYWxsYmFja3NbaWRdID0gbmV3IEFycmF5KCk7XG5cdFx0XHRcdHRhZ3NfY2FsbGJhY2tzW2lkXVsnb25BZGRUYWcnXSA9IHNldHRpbmdzLm9uQWRkVGFnO1xuXHRcdFx0XHR0YWdzX2NhbGxiYWNrc1tpZF1bJ29uUmVtb3ZlVGFnJ10gPSBzZXR0aW5ncy5vblJlbW92ZVRhZztcblx0XHRcdFx0dGFnc19jYWxsYmFja3NbaWRdWydvbkNoYW5nZSddID0gc2V0dGluZ3Mub25DaGFuZ2U7XG5cdFx0XHR9XG5cdFxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lckNsYXNzID0gJCgnIycraWQpLmF0dHIoJ2NsYXNzJykucmVwbGFjZSgndGFnc2lucHV0JywgJycpO1xuXHRcdFx0dmFyIG1hcmt1cCA9ICc8ZGl2IGlkPVwiJytpZCsnX3RhZ3NpbnB1dFwiIGNsYXNzPVwidGFnc2lucHV0ICcrY29udGFpbmVyQ2xhc3MrJ1wiPjxkaXYgY2xhc3M9XCJ0YWdzaW5wdXQtYWRkLWNvbnRhaW5lclwiIGlkPVwiJytpZCsnX2FkZFRhZ1wiPjxkaXYgY2xhc3M9XCJ0YWdzaW5wdXQtYWRkXCI+PC9kaXY+Jztcblx0XHRcdFxuXHRcdFx0aWYgKHNldHRpbmdzLmludGVyYWN0aXZlKSB7XG5cdFx0XHRcdG1hcmt1cCA9IG1hcmt1cCArICc8aW5wdXQgaWQ9XCInK2lkKydfdGFnXCIgdmFsdWU9XCJcIiBkYXRhLWRlZmF1bHQ9XCInK3NldHRpbmdzLmRlZmF1bHRUZXh0KydcIiAvPic7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdG1hcmt1cCA9IG1hcmt1cCArICc8L2Rpdj48L2Rpdj4nO1xuXHRcdFx0XG5cdFx0XHQkKG1hcmt1cCkuaW5zZXJ0QWZ0ZXIodGhpcyk7XG5cblx0XHRcdCQoZGF0YS5ob2xkZXIpLmNzcygnd2lkdGgnLHNldHRpbmdzLndpZHRoKTtcblx0XHRcdCQoZGF0YS5ob2xkZXIpLmNzcygnbWluLWhlaWdodCcsc2V0dGluZ3MuaGVpZ2h0KTtcblx0XHRcdCQoZGF0YS5ob2xkZXIpLmNzcygnaGVpZ2h0JywnMTAwJScpO1xuXHRcblx0XHRcdGlmICgkKGRhdGEucmVhbF9pbnB1dCkudmFsKCkhPScnKSB7IFxuXHRcdFx0XHQkLmZuLnRhZ3NJbnB1dC5pbXBvcnRUYWdzKCQoZGF0YS5yZWFsX2lucHV0KSwkKGRhdGEucmVhbF9pbnB1dCkudmFsKCkpO1xuXHRcdFx0fVx0XHRcblx0XHRcdGlmIChzZXR0aW5ncy5pbnRlcmFjdGl2ZSkgeyBcblx0XHRcdFx0JChkYXRhLmZha2VfaW5wdXQpLnZhbCgkKGRhdGEuZmFrZV9pbnB1dCkuYXR0cignZGF0YS1kZWZhdWx0JykpO1xuXHRcdFx0XHQkKGRhdGEuZmFrZV9pbnB1dCkuY3NzKCdjb2xvcicsc2V0dGluZ3MucGxhY2Vob2xkZXJDb2xvcik7XG5cdFx0ICAgICAgICAkKGRhdGEuZmFrZV9pbnB1dCkucmVzZXRBdXRvc2l6ZShzZXR0aW5ncyk7XG5cdFx0XG5cdFx0XHRcdCQoZGF0YS5ob2xkZXIpLmJpbmQoJ2NsaWNrJyxkYXRhLGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdFx0JChldmVudC5kYXRhLmZha2VfaW5wdXQpLmZvY3VzKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHRcdCQoZGF0YS5mYWtlX2lucHV0KS5iaW5kKCdmb2N1cycsZGF0YSxmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRcdGlmICgkKGV2ZW50LmRhdGEuZmFrZV9pbnB1dCkudmFsKCk9PSQoZXZlbnQuZGF0YS5mYWtlX2lucHV0KS5hdHRyKCdkYXRhLWRlZmF1bHQnKSkgeyBcblx0XHRcdFx0XHRcdCQoZXZlbnQuZGF0YS5mYWtlX2lucHV0KS52YWwoJycpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkKGV2ZW50LmRhdGEuZmFrZV9pbnB1dCkuY3NzKCdjb2xvcicsJyMwMDAwMDAnKTtcdFx0XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdGlmIChzZXR0aW5ncy5hdXRvY29tcGxldGVfdXJsICE9IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGF1dG9jb21wbGV0ZV9vcHRpb25zID0ge3NvdXJjZTogc2V0dGluZ3MuYXV0b2NvbXBsZXRlX3VybH07XG5cdFx0XHRcdFx0Zm9yIChhdHRybmFtZSBpbiBzZXR0aW5ncy5hdXRvY29tcGxldGUpIHsgXG5cdFx0XHRcdFx0XHRhdXRvY29tcGxldGVfb3B0aW9uc1thdHRybmFtZV0gPSBzZXR0aW5ncy5hdXRvY29tcGxldGVbYXR0cm5hbWVdOyBcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChqUXVlcnkuQXV0b2NvbXBsZXRlciAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHQkKGRhdGEuZmFrZV9pbnB1dCkuYXV0b2NvbXBsZXRlKHNldHRpbmdzLmF1dG9jb21wbGV0ZV91cmwsIHNldHRpbmdzLmF1dG9jb21wbGV0ZSk7XG5cdFx0XHRcdFx0XHQkKGRhdGEuZmFrZV9pbnB1dCkuYmluZCgncmVzdWx0JyxkYXRhLGZ1bmN0aW9uKGV2ZW50LGRhdGEsZm9ybWF0dGVkKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0JCgnIycraWQpLmFkZFRhZyhkYXRhWzBdICsgXCJcIix7Zm9jdXM6dHJ1ZSx1bmlxdWU6KHNldHRpbmdzLnVuaXF1ZSl9KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCAgXHR9KTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGpRdWVyeS51aS5hdXRvY29tcGxldGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0JChkYXRhLmZha2VfaW5wdXQpLmF1dG9jb21wbGV0ZShhdXRvY29tcGxldGVfb3B0aW9ucyk7XG5cdFx0XHRcdFx0XHQkKGRhdGEuZmFrZV9pbnB1dCkuYmluZCgnYXV0b2NvbXBsZXRlc2VsZWN0JyxkYXRhLGZ1bmN0aW9uKGV2ZW50LHVpKSB7XG5cdFx0XHRcdFx0XHRcdCQoZXZlbnQuZGF0YS5yZWFsX2lucHV0KS5hZGRUYWcodWkuaXRlbS52YWx1ZSx7Zm9jdXM6dHJ1ZSx1bmlxdWU6KHNldHRpbmdzLnVuaXF1ZSl9KTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0XHRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIGlmIGEgdXNlciB0YWJzIG91dCBvZiB0aGUgZmllbGQsIGNyZWF0ZSBhIG5ldyB0YWdcblx0XHRcdFx0XHRcdC8vIHRoaXMgaXMgb25seSBhdmFpbGFibGUgaWYgYXV0b2NvbXBsZXRlIGlzIG5vdCB1c2VkLlxuXHRcdFx0XHRcdFx0JChkYXRhLmZha2VfaW5wdXQpLmJpbmQoJ2JsdXInLGRhdGEsZnVuY3Rpb24oZXZlbnQpIHsgXG5cdFx0XHRcdFx0XHRcdHZhciBkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWRlZmF1bHQnKTtcblx0XHRcdFx0XHRcdFx0aWYgKCQoZXZlbnQuZGF0YS5mYWtlX2lucHV0KS52YWwoKSE9JycgJiYgJChldmVudC5kYXRhLmZha2VfaW5wdXQpLnZhbCgpIT1kKSB7IFxuXHRcdFx0XHRcdFx0XHRcdGlmKCAoZXZlbnQuZGF0YS5taW5DaGFycyA8PSAkKGV2ZW50LmRhdGEuZmFrZV9pbnB1dCkudmFsKCkubGVuZ3RoKSAmJiAoIWV2ZW50LmRhdGEubWF4Q2hhcnMgfHwgKGV2ZW50LmRhdGEubWF4Q2hhcnMgPj0gJChldmVudC5kYXRhLmZha2VfaW5wdXQpLnZhbCgpLmxlbmd0aCkpIClcblx0XHRcdFx0XHRcdFx0XHRcdCQoZXZlbnQuZGF0YS5yZWFsX2lucHV0KS5hZGRUYWcoJChldmVudC5kYXRhLmZha2VfaW5wdXQpLnZhbCgpLHtmb2N1czp0cnVlLHVuaXF1ZTooc2V0dGluZ3MudW5pcXVlKX0pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdCQoZXZlbnQuZGF0YS5mYWtlX2lucHV0KS52YWwoJChldmVudC5kYXRhLmZha2VfaW5wdXQpLmF0dHIoJ2RhdGEtZGVmYXVsdCcpKTtcblx0XHRcdFx0XHRcdFx0XHQkKGV2ZW50LmRhdGEuZmFrZV9pbnB1dCkuY3NzKCdjb2xvcicsc2V0dGluZ3MucGxhY2Vob2xkZXJDb2xvcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGlmIHVzZXIgdHlwZXMgYSBjb21tYSwgY3JlYXRlIGEgbmV3IHRhZ1xuXHRcdFx0XHQkKGRhdGEuZmFrZV9pbnB1dCkuYmluZCgna2V5cHJlc3MnLGRhdGEsZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRpZiAoZXZlbnQud2hpY2g9PWV2ZW50LmRhdGEuZGVsaW1pdGVyLmNoYXJDb2RlQXQoMCkgfHwgZXZlbnQud2hpY2g9PTEzICkge1xuXHRcdFx0XHRcdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0aWYoIChldmVudC5kYXRhLm1pbkNoYXJzIDw9ICQoZXZlbnQuZGF0YS5mYWtlX2lucHV0KS52YWwoKS5sZW5ndGgpICYmICghZXZlbnQuZGF0YS5tYXhDaGFycyB8fCAoZXZlbnQuZGF0YS5tYXhDaGFycyA+PSAkKGV2ZW50LmRhdGEuZmFrZV9pbnB1dCkudmFsKCkubGVuZ3RoKSkgKVxuXHRcdFx0XHRcdFx0XHQkKGV2ZW50LmRhdGEucmVhbF9pbnB1dCkuYWRkVGFnKCQoZXZlbnQuZGF0YS5mYWtlX2lucHV0KS52YWwoKSx7Zm9jdXM6dHJ1ZSx1bmlxdWU6KHNldHRpbmdzLnVuaXF1ZSl9KTtcblx0XHRcdFx0XHQgIFx0JChldmVudC5kYXRhLmZha2VfaW5wdXQpLnJlc2V0QXV0b3NpemUoc2V0dGluZ3MpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoZXZlbnQuZGF0YS5hdXRvc2l6ZSkge1xuXHRcdFx0ICAgICAgICAgICAgJChldmVudC5kYXRhLmZha2VfaW5wdXQpLmRvQXV0b3NpemUoc2V0dGluZ3MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgXHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Ly9EZWxldGUgbGFzdCB0YWcgb24gYmFja3NwYWNlXG5cdFx0XHRcdGRhdGEucmVtb3ZlV2l0aEJhY2tzcGFjZSAmJiAkKGRhdGEuZmFrZV9pbnB1dCkuYmluZCgna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYoZXZlbnQua2V5Q29kZSA9PSA4ICYmICQodGhpcykudmFsKCkgPT0gJycpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHQgdmFyIGxhc3RfdGFnID0gJCh0aGlzKS5jbG9zZXN0KCcudGFnc2lucHV0JykuZmluZCgnLnRhZzpsYXN0JykudGV4dCgpO1xuXHRcdFx0XHRcdFx0IHZhciBpZCA9ICQodGhpcykuYXR0cignaWQnKS5yZXBsYWNlKC9fdGFnJC8sICcnKTtcblx0XHRcdFx0XHRcdCBsYXN0X3RhZyA9IGxhc3RfdGFnLnJlcGxhY2UoL1tcXHNcXHUwMGEwXSt4JC8sICcnKTtcblx0XHRcdFx0XHRcdCAkKCcjJyArIGlkKS5yZW1vdmVUYWcoZXNjYXBlKGxhc3RfdGFnKSk7XG5cdFx0XHRcdFx0XHQgJCh0aGlzKS50cmlnZ2VyKCdmb2N1cycpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdCQoZGF0YS5mYWtlX2lucHV0KS5ibHVyKCk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL1JlbW92ZXMgdGhlIG5vdF92YWxpZCBjbGFzcyB3aGVuIHVzZXIgY2hhbmdlcyB0aGUgdmFsdWUgb2YgdGhlIGZha2UgaW5wdXRcblx0XHRcdFx0aWYoZGF0YS51bmlxdWUpIHtcblx0XHRcdFx0ICAgICQoZGF0YS5mYWtlX2lucHV0KS5rZXlkb3duKGZ1bmN0aW9uKGV2ZW50KXtcblx0XHRcdFx0ICAgICAgICBpZihldmVudC5rZXlDb2RlID09IDggfHwgU3RyaW5nLmZyb21DaGFyQ29kZShldmVudC53aGljaCkubWF0Y2goL1xcdyt8W8Ohw6nDrcOzw7rDgcOJw43Dk8Oaw7HDkSwvXSsvKSkge1xuXHRcdFx0XHQgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdub3RfdmFsaWQnKTtcblx0XHRcdFx0ICAgICAgICB9XG5cdFx0XHRcdCAgICB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSAvLyBpZiBzZXR0aW5ncy5pbnRlcmFjdGl2ZVxuXHRcdH0pO1xuXHRcdFx0XG5cdFx0cmV0dXJuIHRoaXM7XG5cdFxuXHR9O1xuXHRcblx0JC5mbi50YWdzSW5wdXQudXBkYXRlVGFnc0ZpZWxkID0gZnVuY3Rpb24ob2JqLHRhZ3NsaXN0KSB7IFxuXHRcdHZhciBpZCA9ICQob2JqKS5hdHRyKCdpZCcpO1xuXHRcdCQob2JqKS52YWwodGFnc2xpc3Quam9pbihkZWxpbWl0ZXJbaWRdKSk7XG5cdH07XG5cdFxuXHQkLmZuLnRhZ3NJbnB1dC5pbXBvcnRUYWdzID0gZnVuY3Rpb24ob2JqLHZhbCkge1x0XHRcdFxuXHRcdCQob2JqKS52YWwoJycpO1xuXHRcdHZhciBpZCA9ICQob2JqKS5hdHRyKCdpZCcpO1xuXHRcdHZhciB0YWdzID0gdmFsLnNwbGl0KGRlbGltaXRlcltpZF0pO1xuXHRcdGZvciAoaT0wOyBpPHRhZ3MubGVuZ3RoOyBpKyspIHsgXG5cdFx0XHQkKG9iaikuYWRkVGFnKHRhZ3NbaV0se2ZvY3VzOmZhbHNlLGNhbGxiYWNrOmZhbHNlfSk7XG5cdFx0fVxuXHRcdGlmKHRhZ3NfY2FsbGJhY2tzW2lkXSAmJiB0YWdzX2NhbGxiYWNrc1tpZF1bJ29uQ2hhbmdlJ10pXG5cdFx0e1xuXHRcdFx0dmFyIGYgPSB0YWdzX2NhbGxiYWNrc1tpZF1bJ29uQ2hhbmdlJ107XG5cdFx0XHRmLmNhbGwob2JqLCBvYmosIHRhZ3NbaV0pO1xuXHRcdH1cblx0fTtcblxufSkoalF1ZXJ5KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
