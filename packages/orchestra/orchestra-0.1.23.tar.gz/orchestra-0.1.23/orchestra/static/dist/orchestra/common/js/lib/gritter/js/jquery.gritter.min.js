!function(t){t.gritter={},t.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},t.gritter.add=function(t){try{return e.add(t||{})}catch(i){var r="Gritter Error: "+i;"undefined"!=typeof console&&console.error?console.error(r,t):alert(r)}},t.gritter.remove=function(t,i){e.removeSpecific(t,i||{})},t.gritter.removeAll=function(t){e.stop(t||{})};var e={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(i){if("string"==typeof i&&(i={text:i}),!i.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var r=i.title,o=i.text,s=i.image||"",n=i.sticky||!1,a=i.class_name||t.gritter.options.class_name,_=t.gritter.options.position,c=i.time||"";this._verifyWrapper(),this._item_count++;var p=this._item_count,l=this._tpl_item;t(["before_open","after_open","before_close","after_close"]).each(function(r,o){e["_"+o+"_"+p]=t.isFunction(i[o])?i[o]:function(){}}),this._custom_timer=0,c&&(this._custom_timer=c);var u=""!=s?'<img src="'+s+'" class="gritter-image" />':"",f=""!=s?"gritter-with-image":"gritter-without-image";if(r=r?this._str_replace("[[title]]",r,this._tpl_title):"",l=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[r,o,this._tpl_close,u,this._item_count,f,a],l),this["_before_open_"+p]()===!1)return!1;t("#gritter-notice-wrapper").addClass(_).append(l);var m=t("#gritter-item-"+this._item_count);return m.fadeIn(this.fade_in_speed,function(){e["_after_open_"+p](t(this))}),n||this._setFadeTimer(m,p),t(m).bind("mouseenter mouseleave",function(i){"mouseenter"==i.type?n||e._restoreItemIfFading(t(this),p):n||e._setFadeTimer(t(this),p),e._hoverState(t(this),i.type)}),t(m).find(".gritter-close").click(function(){e.removeSpecific(p,{},null,!0)}),p},_countRemoveWrapper:function(e,i,r){i.remove(),this["_after_close_"+e](i,r),0==t(".gritter-item-wrapper").length&&t("#gritter-notice-wrapper").remove()},_fade:function(t,i,r,o){var r=r||{},s="undefined"!=typeof r.fade?r.fade:!0,n=r.speed||this.fade_out_speed,a=o;this["_before_close_"+i](t,a),o&&t.unbind("mouseenter mouseleave"),s?t.animate({opacity:0},n,function(){t.animate({height:0},300,function(){e._countRemoveWrapper(i,t,a)})}):this._countRemoveWrapper(i,t)},_hoverState:function(t,e){"mouseenter"==e?(t.addClass("hover"),t.find(".gritter-close").show()):(t.removeClass("hover"),t.find(".gritter-close").hide())},removeSpecific:function(e,i,r,o){if(!r)var r=t("#gritter-item-"+e);this._fade(r,e,i||{},o)},_restoreItemIfFading:function(t,e){clearTimeout(this["_int_id_"+e]),t.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in t.gritter.options)this[opt]=t.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(t,i){var r=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+i]=setTimeout(function(){e._fade(t,i)},r)},stop:function(e){var i=t.isFunction(e.before_close)?e.before_close:function(){},r=t.isFunction(e.after_close)?e.after_close:function(){},o=t("#gritter-notice-wrapper");i(o),o.fadeOut(function(){t(this).remove(),r()})},_str_replace:function(t,e,i,r){var o=0,s=0,n="",a="",_=0,c=0,p=[].concat(t),l=[].concat(e),u=i,f=l instanceof Array,m=u instanceof Array;for(u=[].concat(u),r&&(this.window[r]=0),o=0,_=u.length;_>o;o++)if(""!==u[o])for(s=0,c=p.length;c>s;s++)n=u[o]+"",a=f?void 0!==l[s]?l[s]:"":l[0],u[o]=n.split(p[s]).join(a),r&&u[o]!==n&&(this.window[r]+=(n.length-u[o].length)/p[s].length);return m?u:u[0]},_verifyWrapper:function(){0==t("#gritter-notice-wrapper").length&&t("body").append(this._tpl_wrap)}}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yY2hlc3RyYS9jb21tb24vanMvbGliL2dyaXR0ZXIvanMvanF1ZXJ5LmdyaXR0ZXIuanMiXSwibmFtZXMiOlsiJCIsImdyaXR0ZXIiLCJvcHRpb25zIiwicG9zaXRpb24iLCJjbGFzc19uYW1lIiwiZmFkZV9pbl9zcGVlZCIsImZhZGVfb3V0X3NwZWVkIiwidGltZSIsImFkZCIsInBhcmFtcyIsIkdyaXR0ZXIiLCJlIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiYWxlcnQiLCJyZW1vdmUiLCJpZCIsInJlbW92ZVNwZWNpZmljIiwicmVtb3ZlQWxsIiwic3RvcCIsIl9jdXN0b21fdGltZXIiLCJfaXRlbV9jb3VudCIsIl9pc19zZXR1cCIsIl90cGxfY2xvc2UiLCJfdHBsX3RpdGxlIiwiX3RwbF9pdGVtIiwiX3RwbF93cmFwIiwidGV4dCIsInRoaXMiLCJfcnVuU2V0dXAiLCJ0aXRsZSIsImltYWdlIiwic3RpY2t5IiwiaXRlbV9jbGFzcyIsInRpbWVfYWxpdmUiLCJfdmVyaWZ5V3JhcHBlciIsIm51bWJlciIsInRtcCIsImVhY2giLCJpIiwidmFsIiwiaXNGdW5jdGlvbiIsImltYWdlX3N0ciIsIl9zdHJfcmVwbGFjZSIsImFkZENsYXNzIiwiYXBwZW5kIiwiaXRlbSIsImZhZGVJbiIsIl9zZXRGYWRlVGltZXIiLCJiaW5kIiwiZXZlbnQiLCJ0eXBlIiwiX3Jlc3RvcmVJdGVtSWZGYWRpbmciLCJfaG92ZXJTdGF0ZSIsImZpbmQiLCJjbGljayIsIl9jb3VudFJlbW92ZVdyYXBwZXIiLCJ1bmlxdWVfaWQiLCJtYW51YWxfY2xvc2UiLCJsZW5ndGgiLCJfZmFkZSIsInVuYmluZF9ldmVudHMiLCJmYWRlIiwic3BlZWQiLCJ1bmJpbmQiLCJhbmltYXRlIiwib3BhY2l0eSIsImhlaWdodCIsInNob3ciLCJyZW1vdmVDbGFzcyIsImhpZGUiLCJjbGVhclRpbWVvdXQiLCJjc3MiLCJvcHQiLCJ0aW1lcl9zdHIiLCJzZXRUaW1lb3V0IiwiYmVmb3JlX2Nsb3NlIiwiYWZ0ZXJfY2xvc2UiLCJ3cmFwIiwiZmFkZU91dCIsInNlYXJjaCIsInJlcGxhY2UiLCJzdWJqZWN0IiwiY291bnQiLCJqIiwidGVtcCIsInJlcGwiLCJzbCIsImZsIiwiZiIsImNvbmNhdCIsInIiLCJzIiwicmEiLCJBcnJheSIsInNhIiwid2luZG93IiwidW5kZWZpbmVkIiwic3BsaXQiLCJqb2luIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FXQSxTQUFVQSxHQUtUQSxFQUFFQyxXQUtGRCxFQUFFQyxRQUFRQyxTQUNUQyxTQUFVLEdBQ1ZDLFdBQVksR0FDWkMsY0FBZSxTQUNmQyxlQUFnQixJQUNoQkMsS0FBTSxLQU9QUCxFQUFFQyxRQUFRTyxJQUFNLFNBQVNDLEdBRXhCLElBQ0MsTUFBT0MsR0FBUUYsSUFBSUMsT0FDbEIsTUFBTUUsR0FFUCxHQUFJQyxHQUFNLGtCQUFvQkQsQ0FDVixvQkFBbkIsVUFBa0NFLFFBQVFDLE1BQzFDRCxRQUFRQyxNQUFNRixFQUFLSCxHQUNuQk0sTUFBTUgsS0FVVFosRUFBRUMsUUFBUWUsT0FBUyxTQUFTQyxFQUFJUixHQUMvQkMsRUFBUVEsZUFBZUQsRUFBSVIsUUFPNUJULEVBQUVDLFFBQVFrQixVQUFZLFNBQVNWLEdBQzlCQyxFQUFRVSxLQUFLWCxPQU9kLElBQUlDLElBR0hQLFNBQVUsR0FDVkUsY0FBZSxHQUNmQyxlQUFnQixHQUNoQkMsS0FBTSxHQUdOYyxjQUFlLEVBQ2ZDLFlBQWEsRUFDYkMsVUFBVyxFQUNYQyxXQUFZLG9DQUNaQyxXQUFZLCtDQUNaQyxVQUFXLHVUQUNYQyxVQUFXLDBDQU9YbkIsSUFBSyxTQUFTQyxHQU9iLEdBTHFCLGdCQUFsQixLQUNGQSxHQUFVbUIsS0FBS25CLEtBSVpBLEVBQU9tQixLQUNWLEtBQU0sbUNBSUhDLE1BQUtOLFdBQ1JNLEtBQUtDLFdBSU4sSUFBSUMsR0FBUXRCLEVBQU9zQixNQUNsQkgsRUFBT25CLEVBQU9tQixLQUNkSSxFQUFRdkIsRUFBT3VCLE9BQVMsR0FDeEJDLEVBQVN4QixFQUFPd0IsU0FBVSxF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RCxFQUFRQSxJQUVqQyxHQUFZLEtBQVRxRCxFQUFFckQsR0FJTCxJQUFLNkMsRUFBSSxFQUFHSSxFQUFLQyxFQUFFOUIsT0FBWTZCLEVBQUpKLEVBQVFBLElBRWxDQyxFQUFPTyxFQUFFckQsR0FBSyxHQUNkK0MsRUFBT08sRUFBZUksU0FBVE4sRUFBRVAsR0FBbUJPLEVBQUVQLEdBQUssR0FBTU8sRUFBRSxHQUNqREMsRUFBRXJELEdBQUssRUFBTzJELE1BQU1ULEVBQUVMLElBQUllLEtBQUtiLEdBRTVCSCxHQUFTUyxFQUFFckQsS0FBTzhDLElBQ3BCekQsS0FBS29FLE9BQU9iLEtBQVdFLEVBQUsxQixPQUFPaUMsRUFBRXJELEdBQUdvQixRQUFVOEIsRUFBRUwsR0FBR3pCLE9BTTFELE9BQU9vQyxHQUFLSCxFQUFJQSxFQUFFLElBUW5CekQsZUFBZ0IsV0FFMkIsR0FBdkNwQyxFQUFFLDJCQUEyQjRELFFBQy9CNUQsRUFBRSxRQUFROEMsT0FBT2pCLEtBQUtGLGNBT3ZCMEUiLCJmaWxlIjoib3JjaGVzdHJhL2NvbW1vbi9qcy9saWIvZ3JpdHRlci9qcy9qcXVlcnkuZ3JpdHRlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogR3JpdHRlciBmb3IgalF1ZXJ5XG4gKiBodHRwOi8vd3d3LmJvZWRlc2lnbi5jb20vXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEyIEpvcmRhbiBCb2VzY2hcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLlxuICpcbiAqIERhdGU6IEZlYnJ1YXJ5IDI0LCAyMDEyXG4gKiBWZXJzaW9uOiAxLjcuNFxuICovXG5cbihmdW5jdGlvbigkKXtcbiBcdFxuXHQvKipcblx0KiBTZXQgaXQgdXAgYXMgYW4gb2JqZWN0IHVuZGVyIHRoZSBqUXVlcnkgbmFtZXNwYWNlXG5cdCovXG5cdCQuZ3JpdHRlciA9IHt9O1xuXHRcblx0LyoqXG5cdCogU2V0IHVwIGdsb2JhbCBvcHRpb25zIHRoYXQgdGhlIHVzZXIgY2FuIG92ZXItcmlkZVxuXHQqL1xuXHQkLmdyaXR0ZXIub3B0aW9ucyA9IHtcblx0XHRwb3NpdGlvbjogJycsXG5cdFx0Y2xhc3NfbmFtZTogJycsIC8vIGNvdWxkIGJlIHNldCB0byAnZ3JpdHRlci1saWdodCcgdG8gdXNlIHdoaXRlIG5vdGlmaWNhdGlvbnNcblx0XHRmYWRlX2luX3NwZWVkOiAnbWVkaXVtJywgLy8gaG93IGZhc3Qgbm90aWZpY2F0aW9ucyBmYWRlIGluXG5cdFx0ZmFkZV9vdXRfc3BlZWQ6IDEwMDAsIC8vIGhvdyBmYXN0IHRoZSBub3RpY2VzIGZhZGUgb3V0XG5cdFx0dGltZTogNjAwMCAvLyBoYW5nIG9uIHRoZSBzY3JlZW4gZm9yLi4uXG5cdH1cblx0XG5cdC8qKlxuXHQqIEFkZCBhIGdyaXR0ZXIgbm90aWZpY2F0aW9uIHRvIHRoZSBzY3JlZW5cblx0KiBAc2VlIEdyaXR0ZXIjYWRkKCk7XG5cdCovXG5cdCQuZ3JpdHRlci5hZGQgPSBmdW5jdGlvbihwYXJhbXMpe1xuXG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBHcml0dGVyLmFkZChwYXJhbXMgfHwge30pO1xuXHRcdH0gY2F0Y2goZSkge1xuXHRcdFxuXHRcdFx0dmFyIGVyciA9ICdHcml0dGVyIEVycm9yOiAnICsgZTtcblx0XHRcdCh0eXBlb2YoY29uc29sZSkgIT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikgPyBcblx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnIsIHBhcmFtcykgOiBcblx0XHRcdFx0YWxlcnQoZXJyKTtcblx0XHRcdFx0XG5cdFx0fVxuXHRcdFxuXHR9XG5cdFxuXHQvKipcblx0KiBSZW1vdmUgYSBncml0dGVyIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBzY3JlZW5cblx0KiBAc2VlIEdyaXR0ZXIjcmVtb3ZlU3BlY2lmaWMoKTtcblx0Ki9cblx0JC5ncml0dGVyLnJlbW92ZSA9IGZ1bmN0aW9uKGlkLCBwYXJhbXMpe1xuXHRcdEdyaXR0ZXIucmVtb3ZlU3BlY2lmaWMoaWQsIHBhcmFtcyB8fCB7fSk7XG5cdH1cblx0XG5cdC8qKlxuXHQqIFJlbW92ZSBhbGwgbm90aWZpY2F0aW9uc1xuXHQqIEBzZWUgR3JpdHRlciNzdG9wKCk7XG5cdCovXG5cdCQuZ3JpdHRlci5yZW1vdmVBbGwgPSBmdW5jdGlvbihwYXJhbXMpe1xuXHRcdEdyaXR0ZXIuc3RvcChwYXJhbXMgfHwge30pO1xuXHR9XG5cdFxuXHQvKipcblx0KiBCaWcgZmF0IEdyaXR0ZXIgb2JqZWN0XG5cdCogQGNvbnN0cnVjdG9yIChub3QgcmVhbGx5IHNpbmNlIGl0cyBvYmplY3QgbGl0ZXJhbClcblx0Ki9cblx0dmFyIEdyaXR0ZXIgPSB7XG5cdFx0XG5cdFx0Ly8gUHVibGljIC0gb3B0aW9ucyB0byBvdmVyLXJpZGUgd2l0aCAkLmdyaXR0ZXIub3B0aW9ucyBpbiBcImFkZFwiXG5cdFx0cG9zaXRpb246ICcnLFxuXHRcdGZhZGVfaW5fc3BlZWQ6ICcnLFxuXHRcdGZhZGVfb3V0X3NwZWVkOiAnJyxcblx0XHR0aW1lOiAnJyxcblx0XHRcblx0XHQvLyBQcml2YXRlIC0gbm8gdG91Y2h5IHRoZSBwcml2YXRlIHBhcnRzXG5cdFx0X2N1c3RvbV90aW1lcjogMCxcblx0XHRfaXRlbV9jb3VudDogMCxcblx0XHRfaXNfc2V0dXA6IDAsXG5cdFx0X3RwbF9jbG9zZTogJzxkaXYgY2xhc3M9XCJncml0dGVyLWNsb3NlXCI+PC9kaXY+Jyxcblx0XHRfdHBsX3RpdGxlOiAnPHNwYW4gY2xhc3M9XCJncml0dGVyLXRpdGxlXCI+W1t0aXRsZV1dPC9zcGFuPicsXG5cdFx0X3RwbF9pdGVtOiAnPGRpdiBpZD1cImdyaXR0ZXItaXRlbS1bW251bWJlcl1dXCIgY2xhc3M9XCJncml0dGVyLWl0ZW0td3JhcHBlciBbW2l0ZW1fY2xhc3NdXVwiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+PGRpdiBjbGFzcz1cImdyaXR0ZXItdG9wXCI+PC9kaXY+PGRpdiBjbGFzcz1cImdyaXR0ZXItaXRlbVwiPltbY2xvc2VdXVtbaW1hZ2VdXTxkaXYgY2xhc3M9XCJbW2NsYXNzX25hbWVdXVwiPltbdGl0bGVdXTxwPltbdGV4dF1dPC9wPjwvZGl2PjxkaXYgc3R5bGU9XCJjbGVhcjpib3RoXCI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImdyaXR0ZXItYm90dG9tXCI+PC9kaXY+PC9kaXY+Jyxcblx0XHRfdHBsX3dyYXA6ICc8ZGl2IGlkPVwiZ3JpdHRlci1ub3RpY2Utd3JhcHBlclwiPjwvZGl2PicsXG5cdFx0XG5cdFx0LyoqXG5cdFx0KiBBZGQgYSBncml0dGVyIG5vdGlmaWNhdGlvbiB0byB0aGUgc2NyZWVuXG5cdFx0KiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIFRoZSBvYmplY3QgdGhhdCBjb250YWlucyBhbGwgdGhlIG9wdGlvbnMgZm9yIGRyYXdpbmcgdGhlIG5vdGlmaWNhdGlvblxuXHRcdCogQHJldHVybiB7SW50ZWdlcn0gVGhlIHNwZWNpZmljIG51bWVyaWMgaWQgdG8gdGhhdCBncml0dGVyIG5vdGlmaWNhdGlvblxuXHRcdCovXG5cdFx0YWRkOiBmdW5jdGlvbihwYXJhbXMpe1xuXHRcdFx0Ly8gSGFuZGxlIHN0cmFpZ2h0IHRleHRcblx0XHRcdGlmKHR5cGVvZihwYXJhbXMpID09ICdzdHJpbmcnKXtcblx0XHRcdFx0cGFyYW1zID0ge3RleHQ6cGFyYW1zfTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV2UgbWlnaHQgaGF2ZSBzb21lIGlzc3VlcyBpZiB3ZSBkb24ndCBoYXZlIGEgdGl0bGUgb3IgdGV4dCFcblx0XHRcdGlmKCFwYXJhbXMudGV4dCl7XG5cdFx0XHRcdHRocm93ICdZb3UgbXVzdCBzdXBwbHkgXCJ0ZXh0XCIgcGFyYW1ldGVyLic7IFxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayB0aGUgb3B0aW9ucyBhbmQgc2V0IHRoZW0gb25jZVxuXHRcdFx0aWYoIXRoaXMuX2lzX3NldHVwKXtcblx0XHRcdFx0dGhpcy5fcnVuU2V0dXAoKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gQmFzaWNzXG5cdFx0XHR2YXIgdGl0bGUgPSBwYXJhbXMudGl0bGUsIFxuXHRcdFx0XHR0ZXh0ID0gcGFyYW1zLnRleHQsXG5cdFx0XHRcdGltYWdlID0gcGFyYW1zLmltYWdlIHx8ICcnLFxuXHRcdFx0XHRzdGlja3kgPSBwYXJhbXMuc3RpY2t5IHx8IGZhbHNlLFxuXHRcdFx0XHRpdGVtX2NsYXNzID0gcGFyYW1zLmNsYXNzX25hbWUgfHwgJC5ncml0dGVyLm9wdGlvbnMuY2xhc3NfbmFtZSxcblx0XHRcdFx0cG9zaXRpb24gPSAkLmdyaXR0ZXIub3B0aW9ucy5wb3NpdGlvbixcblx0XHRcdFx0dGltZV9hbGl2ZSA9IHBhcmFtcy50aW1lIHx8ICcnO1xuXG5cdFx0XHR0aGlzLl92ZXJpZnlXcmFwcGVyKCk7XG5cdFx0XHRcblx0XHRcdHRoaXMuX2l0ZW1fY291bnQrKztcblx0XHRcdHZhciBudW1iZXIgPSB0aGlzLl9pdGVtX2NvdW50LCBcblx0XHRcdFx0dG1wID0gdGhpcy5fdHBsX2l0ZW07XG5cdFx0XHRcblx0XHRcdC8vIEFzc2lnbiBjYWxsYmFja3Ncblx0XHRcdCQoWydiZWZvcmVfb3BlbicsICdhZnRlcl9vcGVuJywgJ2JlZm9yZV9jbG9zZScsICdhZnRlcl9jbG9zZSddKS5lYWNoKGZ1bmN0aW9uKGksIHZhbCl7XG5cdFx0XHRcdEdyaXR0ZXJbJ18nICsgdmFsICsgJ18nICsgbnVtYmVyXSA9ICgkLmlzRnVuY3Rpb24ocGFyYW1zW3ZhbF0pKSA/IHBhcmFtc1t2YWxdIDogZnVuY3Rpb24oKXt9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gUmVzZXRcblx0XHRcdHRoaXMuX2N1c3RvbV90aW1lciA9IDA7XG5cdFx0XHRcblx0XHRcdC8vIEEgY3VzdG9tIGZhZGUgdGltZSBzZXRcblx0XHRcdGlmKHRpbWVfYWxpdmUpe1xuXHRcdFx0XHR0aGlzLl9jdXN0b21fdGltZXIgPSB0aW1lX2FsaXZlO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHR2YXIgaW1hZ2Vfc3RyID0gKGltYWdlICE9ICcnKSA/ICc8aW1nIHNyYz1cIicgKyBpbWFnZSArICdcIiBjbGFzcz1cImdyaXR0ZXItaW1hZ2VcIiAvPicgOiAnJyxcblx0XHRcdFx0Y2xhc3NfbmFtZSA9IChpbWFnZSAhPSAnJykgPyAnZ3JpdHRlci13aXRoLWltYWdlJyA6ICdncml0dGVyLXdpdGhvdXQtaW1hZ2UnO1xuXHRcdFx0XG5cdFx0XHQvLyBTdHJpbmcgcmVwbGFjZW1lbnRzIG9uIHRoZSB0ZW1wbGF0ZVxuXHRcdFx0aWYodGl0bGUpe1xuXHRcdFx0XHR0aXRsZSA9IHRoaXMuX3N0cl9yZXBsYWNlKCdbW3RpdGxlXV0nLHRpdGxlLHRoaXMuX3RwbF90aXRsZSk7XG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0dGl0bGUgPSAnJztcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dG1wID0gdGhpcy5fc3RyX3JlcGxhY2UoXG5cdFx0XHRcdFsnW1t0aXRsZV1dJywgJ1tbdGV4dF1dJywgJ1tbY2xvc2VdXScsICdbW2ltYWdlXV0nLCAnW1tudW1iZXJdXScsICdbW2NsYXNzX25hbWVdXScsICdbW2l0ZW1fY2xhc3NdXSddLFxuXHRcdFx0XHRbdGl0bGUsIHRleHQsIHRoaXMuX3RwbF9jbG9zZSwgaW1hZ2Vfc3RyLCB0aGlzLl9pdGVtX2NvdW50LCBjbGFzc19uYW1lLCBpdGVtX2NsYXNzXSwgdG1wXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBJZiBpdCdzIGZhbHNlLCBkb24ndCBzaG93IGFub3RoZXIgZ3JpdHRlciBtZXNzYWdlXG5cdFx0XHRpZih0aGlzWydfYmVmb3JlX29wZW5fJyArIG51bWJlcl0oKSA9PT0gZmFsc2Upe1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdCQoJyNncml0dGVyLW5vdGljZS13cmFwcGVyJykuYWRkQ2xhc3MocG9zaXRpb24pLmFwcGVuZCh0bXApO1xuXHRcdFx0XG5cdFx0XHR2YXIgaXRlbSA9ICQoJyNncml0dGVyLWl0ZW0tJyArIHRoaXMuX2l0ZW1fY291bnQpO1xuXHRcdFx0XG5cdFx0XHRpdGVtLmZhZGVJbih0aGlzLmZhZGVfaW5fc3BlZWQsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdEdyaXR0ZXJbJ19hZnRlcl9vcGVuXycgKyBudW1iZXJdKCQodGhpcykpO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdGlmKCFzdGlja3kpe1xuXHRcdFx0XHR0aGlzLl9zZXRGYWRlVGltZXIoaXRlbSwgbnVtYmVyKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gQmluZCB0aGUgaG92ZXIvdW5ob3ZlciBzdGF0ZXNcblx0XHRcdCQoaXRlbSkuYmluZCgnbW91c2VlbnRlciBtb3VzZWxlYXZlJywgZnVuY3Rpb24oZXZlbnQpe1xuXHRcdFx0XHRpZihldmVudC50eXBlID09ICdtb3VzZWVudGVyJyl7XG5cdFx0XHRcdFx0aWYoIXN0aWNreSl7IFxuXHRcdFx0XHRcdFx0R3JpdHRlci5fcmVzdG9yZUl0ZW1JZkZhZGluZygkKHRoaXMpLCBudW1iZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRpZighc3RpY2t5KXtcblx0XHRcdFx0XHRcdEdyaXR0ZXIuX3NldEZhZGVUaW1lcigkKHRoaXMpLCBudW1iZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRHcml0dGVyLl9ob3ZlclN0YXRlKCQodGhpcyksIGV2ZW50LnR5cGUpO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIENsaWNraW5nIChYKSBtYWtlcyB0aGUgcGVyZHkgdGhpbmcgY2xvc2Vcblx0XHRcdCQoaXRlbSkuZmluZCgnLmdyaXR0ZXItY2xvc2UnKS5jbGljayhmdW5jdGlvbigpe1xuXHRcdFx0XHRHcml0dGVyLnJlbW92ZVNwZWNpZmljKG51bWJlciwge30sIG51bGwsIHRydWUpO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdHJldHVybiBudW1iZXI7XG5cdFx0XG5cdFx0fSxcblx0XHRcblx0XHQvKipcblx0XHQqIElmIHdlIGRvbid0IGhhdmUgYW55IG1vcmUgZ3JpdHRlciBub3RpZmljYXRpb25zLCBnZXQgcmlkIG9mIHRoZSB3cmFwcGVyIHVzaW5nIHRoaXMgY2hlY2tcblx0XHQqIEBwcml2YXRlXG5cdFx0KiBAcGFyYW0ge0ludGVnZXJ9IHVuaXF1ZV9pZCBUaGUgSUQgb2YgdGhlIGVsZW1lbnQgdGhhdCB3YXMganVzdCBkZWxldGVkLCB1c2UgaXQgZm9yIGEgY2FsbGJhY2tcblx0XHQqIEBwYXJhbSB7T2JqZWN0fSBlIFRoZSBqUXVlcnkgZWxlbWVudCB0aGF0IHdlJ3JlIGdvaW5nIHRvIHBlcmZvcm0gdGhlIHJlbW92ZSgpIGFjdGlvbiBvblxuXHRcdCogQHBhcmFtIHtCb29sZWFufSBtYW51YWxfY2xvc2UgRGlkIHdlIGNsb3NlIHRoZSBncml0dGVyIGRpYWxvZyB3aXRoIHRoZSAoWCkgYnV0dG9uXG5cdFx0Ki9cblx0XHRfY291bnRSZW1vdmVXcmFwcGVyOiBmdW5jdGlvbih1bmlxdWVfaWQsIGUsIG1hbnVhbF9jbG9zZSl7XG5cdFx0XHRcblx0XHRcdC8vIFJlbW92ZSBpdCB0aGVuIHJ1biB0aGUgY2FsbGJhY2sgZnVuY3Rpb25cblx0XHRcdGUucmVtb3ZlKCk7XG5cdFx0XHR0aGlzWydfYWZ0ZXJfY2xvc2VfJyArIHVuaXF1ZV9pZF0oZSwgbWFudWFsX2Nsb3NlKTtcblx0XHRcdFxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIHdyYXBwZXIgaXMgZW1wdHksIGlmIGl0IGlzLi4gcmVtb3ZlIHRoZSB3cmFwcGVyXG5cdFx0XHRpZigkKCcuZ3JpdHRlci1pdGVtLXdyYXBwZXInKS5sZW5ndGggPT0gMCl7XG5cdFx0XHRcdCQoJyNncml0dGVyLW5vdGljZS13cmFwcGVyJykucmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0XG5cdFx0fSxcblx0XHRcblx0XHQvKipcblx0XHQqIEZhZGUgb3V0IGFuIGVsZW1lbnQgYWZ0ZXIgaXQncyBiZWVuIG9uIHRoZSBzY3JlZW4gZm9yIHggYW1vdW50IG9mIHRpbWVcblx0XHQqIEBwcml2YXRlXG5cdFx0KiBAcGFyYW0ge09iamVjdH0gZSBUaGUgalF1ZXJ5IGVsZW1lbnQgdG8gZ2V0IHJpZCBvZlxuXHRcdCogQHBhcmFtIHtJbnRlZ2VyfSB1bmlxdWVfaWQgVGhlIGlkIG9mIHRoZSBlbGVtZW50IHRvIHJlbW92ZVxuXHRcdCogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyBBbiBvcHRpb25hbCBsaXN0IG9mIHBhcmFtcyB0byBzZXQgZmFkZSBzcGVlZHMgZXRjLlxuXHRcdCogQHBhcmFtIHtCb29sZWFufSB1bmJpbmRfZXZlbnRzIFVuYmluZCB0aGUgbW91c2VlbnRlci9tb3VzZWxlYXZlIGV2ZW50cyBpZiB0aGV5IGNsaWNrIChYKVxuXHRcdCovXG5cdFx0X2ZhZGU6IGZ1bmN0aW9uKGUsIHVuaXF1ZV9pZCwgcGFyYW1zLCB1bmJpbmRfZXZlbnRzKXtcblxuXHRcdFx0dmFyIHBhcmFtcyA9IHBhcmFtcyB8fCB7fSxcblx0XHRcdFx0ZmFkZSA9ICh0eXBlb2YocGFyYW1zLmZhZGUpICE9ICd1bmRlZmluZWQnKSA/IHBhcmFtcy5mYWRlIDogdHJ1ZSxcblx0XHRcdFx0ZmFkZV9vdXRfc3BlZWQgPSBwYXJhbXMuc3BlZWQgfHwgdGhpcy5mYWRlX291dF9zcGVlZCxcblx0XHRcdFx0bWFudWFsX2Nsb3NlID0gdW5iaW5kX2V2ZW50cztcblxuXHRcdFx0dGhpc1snX2JlZm9yZV9jbG9zZV8nICsgdW5pcXVlX2lkXShlLCBtYW51YWxfY2xvc2UpO1xuXHRcdFx0XG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRydWUsIHRoZW4gd2UgYXJlIGNvbWluZyBmcm9tIGNsaWNraW5nIHRoZSAoWClcblx0XHRcdGlmKHVuYmluZF9ldmVudHMpe1xuXHRcdFx0XHRlLnVuYmluZCgnbW91c2VlbnRlciBtb3VzZWxlYXZlJyk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIEZhZGUgaXQgb3V0IG9yIHJlbW92ZSBpdFxuXHRcdFx0aWYoZmFkZSl7XG5cdFx0XHRcblx0XHRcdFx0ZS5hbmltYXRlKHtcblx0XHRcdFx0XHRvcGFjaXR5OiAwXG5cdFx0XHRcdH0sIGZhZGVfb3V0X3NwZWVkLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGUuYW5pbWF0ZSh7IGhlaWdodDogMCB9LCAzMDAsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRHcml0dGVyLl9jb3VudFJlbW92ZVdyYXBwZXIodW5pcXVlX2lkLCBlLCBtYW51YWxfY2xvc2UpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFxuXHRcdFx0XHR0aGlzLl9jb3VudFJlbW92ZVdyYXBwZXIodW5pcXVlX2lkLCBlKTtcblx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHR9LFxuXHRcdFxuXHRcdC8qKlxuXHRcdCogUGVyZm9ybSBhY3Rpb25zIGJhc2VkIG9uIHRoZSB0eXBlIG9mIGJpbmQgKG1vdXNlZW50ZXIsIG1vdXNlbGVhdmUpIFxuXHRcdCogQHByaXZhdGVcblx0XHQqIEBwYXJhbSB7T2JqZWN0fSBlIFRoZSBqUXVlcnkgZWxlbWVudFxuXHRcdCogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgYWN0aW9uIHdlJ3JlIHBlcmZvcm1pbmc6IG1vdXNlZW50ZXIgb3IgbW91c2VsZWF2ZVxuXHRcdCovXG5cdFx0X2hvdmVyU3RhdGU6IGZ1bmN0aW9uKGUsIHR5cGUpe1xuXHRcdFx0XG5cdFx0XHQvLyBDaGFuZ2UgdGhlIGJvcmRlciBzdHlsZXMgYW5kIGFkZCB0aGUgKFgpIGNsb3NlIGJ1dHRvbiB3aGVuIHlvdSBob3ZlclxuXHRcdFx0aWYodHlwZSA9PSAnbW91c2VlbnRlcicpe1xuXHRcdFx0XHRcblx0XHRcdFx0ZS5hZGRDbGFzcygnaG92ZXInKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFNob3cgY2xvc2UgYnV0dG9uXG5cdFx0XHRcdGUuZmluZCgnLmdyaXR0ZXItY2xvc2UnKS5zaG93KCk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdH1cblx0XHRcdC8vIFJlbW92ZSB0aGUgYm9yZGVyIHN0eWxlcyBhbmQgaGlkZSAoWCkgY2xvc2UgYnV0dG9uIHdoZW4geW91IG1vdXNlIG91dFxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRlLnJlbW92ZUNsYXNzKCdob3ZlcicpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gSGlkZSBjbG9zZSBidXR0b25cblx0XHRcdFx0ZS5maW5kKCcuZ3JpdHRlci1jbG9zZScpLmhpZGUoKTtcblx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRcblx0XHR9LFxuXHRcdFxuXHRcdC8qKlxuXHRcdCogUmVtb3ZlIGEgc3BlY2lmaWMgbm90aWZpY2F0aW9uIGJhc2VkIG9uIGFuIElEXG5cdFx0KiBAcGFyYW0ge0ludGVnZXJ9IHVuaXF1ZV9pZCBUaGUgSUQgdXNlZCB0byBkZWxldGUgYSBzcGVjaWZpYyBub3RpZmljYXRpb25cblx0XHQqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgQSBzZXQgb2Ygb3B0aW9ucyBwYXNzZWQgaW4gdG8gZGV0ZXJtaW5lIGhvdyB0byBnZXQgcmlkIG9mIGl0XG5cdFx0KiBAcGFyYW0ge09iamVjdH0gZSBUaGUgalF1ZXJ5IGVsZW1lbnQgdGhhdCB3ZSdyZSBcImZhZGluZ1wiIHRoZW4gcmVtb3Zpbmdcblx0XHQqIEBwYXJhbSB7Qm9vbGVhbn0gdW5iaW5kX2V2ZW50cyBJZiB3ZSBjbGlja2VkIG9uIHRoZSAoWCkgd2Ugc2V0IHRoaXMgdG8gdHJ1ZSB0byB1bmJpbmQgbW91c2VlbnRlci9tb3VzZWxlYXZlXG5cdFx0Ki9cblx0XHRyZW1vdmVTcGVjaWZpYzogZnVuY3Rpb24odW5pcXVlX2lkLCBwYXJhbXMsIGUsIHVuYmluZF9ldmVudHMpe1xuXHRcdFx0XG5cdFx0XHRpZighZSl7XG5cdFx0XHRcdHZhciBlID0gJCgnI2dyaXR0ZXItaXRlbS0nICsgdW5pcXVlX2lkKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV2Ugc2V0IHRoZSBmb3VydGggcGFyYW0gdG8gbGV0IHRoZSBfZmFkZSBmdW5jdGlvbiBrbm93IHRvIFxuXHRcdFx0Ly8gdW5iaW5kIHRoZSBcIm1vdXNlbGVhdmVcIiBldmVudC4gIE9uY2UgeW91IGNsaWNrIChYKSB0aGVyZSdzIG5vIGdvaW5nIGJhY2shXG5cdFx0XHR0aGlzLl9mYWRlKGUsIHVuaXF1ZV9pZCwgcGFyYW1zIHx8IHt9LCB1bmJpbmRfZXZlbnRzKTtcblx0XHRcdFxuXHRcdH0sXG5cdFx0XG5cdFx0LyoqXG5cdFx0KiBJZiB0aGUgaXRlbSBpcyBmYWRpbmcgb3V0IGFuZCB3ZSBob3ZlciBvdmVyIGl0LCByZXN0b3JlIGl0IVxuXHRcdCogQHByaXZhdGVcblx0XHQqIEBwYXJhbSB7T2JqZWN0fSBlIFRoZSBIVE1MIGVsZW1lbnQgdG8gcmVtb3ZlXG5cdFx0KiBAcGFyYW0ge0ludGVnZXJ9IHVuaXF1ZV9pZCBUaGUgSUQgb2YgdGhlIGVsZW1lbnRcblx0XHQqL1xuXHRcdF9yZXN0b3JlSXRlbUlmRmFkaW5nOiBmdW5jdGlvbihlLCB1bmlxdWVfaWQpe1xuXHRcdFx0XG5cdFx0XHRjbGVhclRpbWVvdXQodGhpc1snX2ludF9pZF8nICsgdW5pcXVlX2lkXSk7XG5cdFx0XHRlLnN0b3AoKS5jc3MoeyBvcGFjaXR5OiAnJywgaGVpZ2h0OiAnJyB9KTtcblx0XHRcdFxuXHRcdH0sXG5cdFx0XG5cdFx0LyoqXG5cdFx0KiBTZXR1cCB0aGUgZ2xvYmFsIG9wdGlvbnMgLSBvbmx5IG9uY2Vcblx0XHQqIEBwcml2YXRlXG5cdFx0Ki9cblx0XHRfcnVuU2V0dXA6IGZ1bmN0aW9uKCl7XG5cdFx0XG5cdFx0XHRmb3Iob3B0IGluICQuZ3JpdHRlci5vcHRpb25zKXtcblx0XHRcdFx0dGhpc1tvcHRdID0gJC5ncml0dGVyLm9wdGlvbnNbb3B0XTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX2lzX3NldHVwID0gMTtcblx0XHRcdFxuXHRcdH0sXG5cdFx0XG5cdFx0LyoqXG5cdFx0KiBTZXQgdGhlIG5vdGlmaWNhdGlvbiB0byBmYWRlIG91dCBhZnRlciBhIGNlcnRhaW4gYW1vdW50IG9mIHRpbWVcblx0XHQqIEBwcml2YXRlXG5cdFx0KiBAcGFyYW0ge09iamVjdH0gaXRlbSBUaGUgSFRNTCBlbGVtZW50IHdlJ3JlIGRlYWxpbmcgd2l0aFxuXHRcdCogQHBhcmFtIHtJbnRlZ2VyfSB1bmlxdWVfaWQgVGhlIElEIG9mIHRoZSBlbGVtZW50XG5cdFx0Ki9cblx0XHRfc2V0RmFkZVRpbWVyOiBmdW5jdGlvbihlLCB1bmlxdWVfaWQpe1xuXHRcdFx0XG5cdFx0XHR2YXIgdGltZXJfc3RyID0gKHRoaXMuX2N1c3RvbV90aW1lcikgPyB0aGlzLl9jdXN0b21fdGltZXIgOiB0aGlzLnRpbWU7XG5cdFx0XHR0aGlzWydfaW50X2lkXycgKyB1bmlxdWVfaWRdID0gc2V0VGltZW91dChmdW5jdGlvbigpeyBcblx0XHRcdFx0R3JpdHRlci5fZmFkZShlLCB1bmlxdWVfaWQpO1xuXHRcdFx0fSwgdGltZXJfc3RyKTtcblx0XHRcblx0XHR9LFxuXHRcdFxuXHRcdC8qKlxuXHRcdCogQnJpbmcgZXZlcnl0aGluZyB0byBhIGhhbHRcblx0XHQqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgQSBsaXN0IG9mIGNhbGxiYWNrIGZ1bmN0aW9ucyB0byBwYXNzIHdoZW4gYWxsIG5vdGlmaWNhdGlvbnMgYXJlIHJlbW92ZWRcblx0XHQqLyAgXG5cdFx0c3RvcDogZnVuY3Rpb24ocGFyYW1zKXtcblx0XHRcdFxuXHRcdFx0Ly8gY2FsbGJhY2tzIChpZiBwYXNzZWQpXG5cdFx0XHR2YXIgYmVmb3JlX2Nsb3NlID0gKCQuaXNGdW5jdGlvbihwYXJhbXMuYmVmb3JlX2Nsb3NlKSkgPyBwYXJhbXMuYmVmb3JlX2Nsb3NlIDogZnVuY3Rpb24oKXt9O1xuXHRcdFx0dmFyIGFmdGVyX2Nsb3NlID0gKCQuaXNGdW5jdGlvbihwYXJhbXMuYWZ0ZXJfY2xvc2UpKSA/IHBhcmFtcy5hZnRlcl9jbG9zZSA6IGZ1bmN0aW9uKCl7fTtcblx0XHRcdFxuXHRcdFx0dmFyIHdyYXAgPSAkKCcjZ3JpdHRlci1ub3RpY2Utd3JhcHBlcicpO1xuXHRcdFx0YmVmb3JlX2Nsb3NlKHdyYXApO1xuXHRcdFx0d3JhcC5mYWRlT3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlKCk7XG5cdFx0XHRcdGFmdGVyX2Nsb3NlKCk7XG5cdFx0XHR9KTtcblx0XHRcblx0XHR9LFxuXHRcdFxuXHRcdC8qKlxuXHRcdCogQW4gZXh0cmVtZWx5IGhhbmR5IFBIUCBmdW5jdGlvbiBwb3J0ZWQgdG8gSlMsIHdvcmtzIHdlbGwgZm9yIHRlbXBsYXRpbmdcblx0XHQqIEBwcml2YXRlXG5cdFx0KiBAcGFyYW0ge1N0cmluZy9BcnJheX0gc2VhcmNoIEEgbGlzdCBvZiB0aGluZ3MgdG8gc2VhcmNoIGZvclxuXHRcdCogQHBhcmFtIHtTdHJpbmcvQXJyYXl9IHJlcGxhY2UgQSBsaXN0IG9mIHRoaW5ncyB0byByZXBsYWNlIHRoZSBzZWFyY2hlcyB3aXRoXG5cdFx0KiBAcmV0dXJuIHtTdHJpbmd9IHNhIFRoZSBvdXRwdXRcblx0XHQqLyAgXG5cdFx0X3N0cl9yZXBsYWNlOiBmdW5jdGlvbihzZWFyY2gsIHJlcGxhY2UsIHN1YmplY3QsIGNvdW50KXtcblx0XHRcblx0XHRcdHZhciBpID0gMCwgaiA9IDAsIHRlbXAgPSAnJywgcmVwbCA9ICcnLCBzbCA9IDAsIGZsID0gMCxcblx0XHRcdFx0ZiA9IFtdLmNvbmNhdChzZWFyY2gpLFxuXHRcdFx0XHRyID0gW10uY29uY2F0KHJlcGxhY2UpLFxuXHRcdFx0XHRzID0gc3ViamVjdCxcblx0XHRcdFx0cmEgPSByIGluc3RhbmNlb2YgQXJyYXksIHNhID0gcyBpbnN0YW5jZW9mIEFycmF5O1xuXHRcdFx0cyA9IFtdLmNvbmNhdChzKTtcblx0XHRcdFxuXHRcdFx0aWYoY291bnQpe1xuXHRcdFx0XHR0aGlzLndpbmRvd1tjb3VudF0gPSAwO1xuXHRcdFx0fVxuXHRcdFxuXHRcdFx0Zm9yKGkgPSAwLCBzbCA9IHMubGVuZ3RoOyBpIDwgc2w7IGkrKyl7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihzW2ldID09PSAnJyl7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGZvciAoaiA9IDAsIGZsID0gZi5sZW5ndGg7IGogPCBmbDsgaisrKXtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHR0ZW1wID0gc1tpXSArICcnO1xuXHRcdFx0XHRcdHJlcGwgPSByYSA/IChyW2pdICE9PSB1bmRlZmluZWQgPyByW2pdIDogJycpIDogclswXTtcblx0XHRcdFx0XHRzW2ldID0gKHRlbXApLnNwbGl0KGZbal0pLmpvaW4ocmVwbCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYoY291bnQgJiYgc1tpXSAhPT0gdGVtcCl7XG5cdFx0XHRcdFx0XHR0aGlzLndpbmRvd1tjb3VudF0gKz0gKHRlbXAubGVuZ3RoLXNbaV0ubGVuZ3RoKSAvIGZbal0ubGVuZ3RoO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRyZXR1cm4gc2EgPyBzIDogc1swXTtcblx0XHRcdFxuXHRcdH0sXG5cdFx0XG5cdFx0LyoqXG5cdFx0KiBBIGNoZWNrIHRvIG1ha2Ugc3VyZSB3ZSBoYXZlIHNvbWV0aGluZyB0byB3cmFwIG91ciBub3RpY2VzIHdpdGhcblx0XHQqIEBwcml2YXRlXG5cdFx0Ki8gIFxuXHRcdF92ZXJpZnlXcmFwcGVyOiBmdW5jdGlvbigpe1xuXHRcdCAgXG5cdFx0XHRpZigkKCcjZ3JpdHRlci1ub3RpY2Utd3JhcHBlcicpLmxlbmd0aCA9PSAwKXtcblx0XHRcdFx0JCgnYm9keScpLmFwcGVuZCh0aGlzLl90cGxfd3JhcCk7XG5cdFx0XHR9XG5cdFx0XG5cdFx0fVxuXHRcdFxuXHR9XG5cdFxufSkoalF1ZXJ5KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
