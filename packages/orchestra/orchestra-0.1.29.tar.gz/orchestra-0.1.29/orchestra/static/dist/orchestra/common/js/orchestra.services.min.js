var serviceModule=angular.module("orchestra.common.services");serviceModule.factory("orchestraService",function(){var googleUtils={folders:{externalUrl:function(id){return"https://drive.google.com/open?id="+id},embedUrl:function(id){return"https://drive.google.com/embeddedfolderview?id="+id},embedListUrl:function(id){return this.embedUrl(id)+"#list"},embedGridUrl:function(id){return this.embedUrl(id)+"#grid"}},files:{editUrl:function(id){return"https://docs.google.com/document/d/"+id+"/edit"}}},taskUtils={findPrerequisite:function(parent_step,desired_slug){for(var stepsToTraverse=[parent_step];stepsToTraverse.length;){var currentStep=stepsToTraverse.pop();if(currentStep.prerequisites[desired_slug])return currentStep.prerequisites[desired_slug];for(var step_slug in currentStep.prerequisites)stepsToTraverse.push(currentStep.prerequisites[step_slug])}},updateVersion:function(taskAssignment){(void 0===taskAssignment||taskAssignment.task.data.__version<=1)&&(taskAssignment.task.data={__version:1})}},registered={},signals={registerSignal:function(signalType,callback){registered[signalType]=registered[signalType]||[],registered[signalType].push(callback)},fireSignal:function(signalType){var success=!0;return registered[signalType]=registered[signalType]||[],registered[signalType].forEach(function(callback){success=callback()&&success}),success}},orchestraService={googleUtils:googleUtils,taskUtils:taskUtils,signals:signals};return orchestraService});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yY2hlc3RyYS9jb21tb24vanMvb3JjaGVzdHJhLnNlcnZpY2VzLmpzIl0sIm5hbWVzIjpbInNlcnZpY2VNb2R1bGUiLCJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsImdvb2dsZVV0aWxzIiwiZm9sZGVycyIsImV4dGVybmFsVXJsIiwiaWQiLCJlbWJlZFVybCIsImVtYmVkTGlzdFVybCIsInRoaXMiLCJlbWJlZEdyaWRVcmwiLCJmaWxlcyIsImVkaXRVcmwiLCJ0YXNrVXRpbHMiLCJmaW5kUHJlcmVxdWlzaXRlIiwicGFyZW50X3N0ZXAiLCJkZXNpcmVkX3NsdWciLCJzdGVwc1RvVHJhdmVyc2UiLCJsZW5ndGgiLCJjdXJyZW50U3RlcCIsInBvcCIsInByZXJlcXVpc2l0ZXMiLCJzdGVwX3NsdWciLCJwdXNoIiwidXBkYXRlVmVyc2lvbiIsInRhc2tBc3NpZ25tZW50IiwidW5kZWZpbmVkIiwidGFzayIsImRhdGEiLCJfX3ZlcnNpb24iLCJyZWdpc3RlcmVkIiwic2lnbmFscyIsInJlZ2lzdGVyU2lnbmFsIiwic2lnbmFsVHlwZSIsImNhbGxiYWNrIiwiZmlyZVNpZ25hbCIsInN1Y2Nlc3MiLCJmb3JFYWNoIiwib3JjaGVzdHJhU2VydmljZSJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsZUFBZ0JDLFFBQVFDLE9BQU8sNEJBRW5DRixlQUFjRyxRQUFRLG1CQUFvQixXQUN4QyxHQUFJQyxjQUNGQyxTQUNFQyxZQUFhLFNBQVNDLElBQ3BCLE1BQU8sb0NBQXNDQSxJQUUvQ0MsU0FBVSxTQUFTRCxJQUNqQixNQUFPLGtEQUFvREEsSUFFN0RFLGFBQWMsU0FBU0YsSUFDckIsTUFBT0csTUFBS0YsU0FBU0QsSUFBTSxTQUU3QkksYUFBYyxTQUFTSixJQUNyQixNQUFPRyxNQUFLRixTQUFTRCxJQUFNLFVBRy9CSyxPQUNFQyxRQUFTLFNBQVNOLElBQ2hCLE1BQU8sc0NBQXdDQSxHQUFLLFdBSXRETyxXQUNGQyxpQkFBa0IsU0FBU0MsWUFBYUMsY0FFdEMsSUFEQSxHQUFJQyxrQkFBbUJGLGFBQ2hCRSxnQkFBZ0JDLFFBQVEsQ0FDN0IsR0FBSUMsYUFBY0YsZ0JBQWdCRyxLQUNsQyxJQUFJRCxZQUFZRSxjQUFjTCxjQUM1QixNQUFPRyxhQUFZRSxjQUFjTCxhQUVuQyxLQUFLLEdBQUlNLGFBQWFILGFBQVlFLGNBQ2hDSixnQkFBZ0JNLEtBQUtKLFlBQVlFLGNBQWNDLGNBSXJERSxjQUFlLFNBQVNDLGlCQUNDQyxTQUFuQkQsZ0JBQ0ZBLGVBQWVFLEtBQUtDLEtBQUtDLFdBQWEsS0FDdENKLGVBQWVFLEtBQUtDLE1BQ2xCQyxVQUFXLE1BS2ZDLGNBQ0FDLFNBQ0ZDLGVBQWdCLFNBQVNDLFdBQVlDLFVBQ25DSixXQUFXRyxZQUFjSCxXQUFXRyxnQkFDcENILFdBQVdHLFlBQVlWLEtBQUtXLFdBRTlCQyxXQUFZLFNBQVNGLFlBQ25CLEdBQUlHLFVBQVUsQ0FLZCxPQUpBTixZQUFXRyxZQUFjSCxXQUFXRyxnQkFDcENILFdBQVdHLFlBQVlJLFFBQVEsU0FBU0gsVUFDdENFLFFBQVVGLFlBQWNFLFVBRW5CQSxVQUlQRSxrQkFDRm5DLFlBQWVBLFlBQ2ZVLFVBQWFBLFVBQ2JrQixRQUFXQSxRQUViLE9BQU9PIiwiZmlsZSI6Im9yY2hlc3RyYS9jb21tb24vanMvb3JjaGVzdHJhLnNlcnZpY2VzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBzZXJ2aWNlTW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ29yY2hlc3RyYS5jb21tb24uc2VydmljZXMnKTtcblxuc2VydmljZU1vZHVsZS5mYWN0b3J5KCdvcmNoZXN0cmFTZXJ2aWNlJywgZnVuY3Rpb24oKSB7XG4gIHZhciBnb29nbGVVdGlscyA9IHtcbiAgICBmb2xkZXJzOiB7XG4gICAgICBleHRlcm5hbFVybDogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgcmV0dXJuICdodHRwczovL2RyaXZlLmdvb2dsZS5jb20vb3Blbj9pZD0nICsgaWQ7XG4gICAgICB9LFxuICAgICAgZW1iZWRVcmw6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIHJldHVybiAnaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL2VtYmVkZGVkZm9sZGVydmlldz9pZD0nICsgaWQ7XG4gICAgICB9LFxuICAgICAgZW1iZWRMaXN0VXJsOiBmdW5jdGlvbihpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbWJlZFVybChpZCkgKyAnI2xpc3QnO1xuICAgICAgfSxcbiAgICAgIGVtYmVkR3JpZFVybDogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW1iZWRVcmwoaWQpICsgJyNncmlkJztcbiAgICAgIH0sXG4gICAgfSxcbiAgICBmaWxlczoge1xuICAgICAgZWRpdFVybDogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgcmV0dXJuICdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLycgKyBpZCArICcvZWRpdCc7XG4gICAgICB9LFxuICAgIH0sXG4gIH07XG4gIHZhciB0YXNrVXRpbHMgPSB7XG4gICAgZmluZFByZXJlcXVpc2l0ZTogZnVuY3Rpb24ocGFyZW50X3N0ZXAsIGRlc2lyZWRfc2x1Zykge1xuICAgICAgdmFyIHN0ZXBzVG9UcmF2ZXJzZSA9IFtwYXJlbnRfc3RlcF07XG4gICAgICB3aGlsZSAoc3RlcHNUb1RyYXZlcnNlLmxlbmd0aCkge1xuICAgICAgICB2YXIgY3VycmVudFN0ZXAgPSBzdGVwc1RvVHJhdmVyc2UucG9wKCk7XG4gICAgICAgIGlmIChjdXJyZW50U3RlcC5wcmVyZXF1aXNpdGVzW2Rlc2lyZWRfc2x1Z10pIHtcbiAgICAgICAgICByZXR1cm4gY3VycmVudFN0ZXAucHJlcmVxdWlzaXRlc1tkZXNpcmVkX3NsdWddO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIHN0ZXBfc2x1ZyBpbiBjdXJyZW50U3RlcC5wcmVyZXF1aXNpdGVzKSB7XG4gICAgICAgICAgc3RlcHNUb1RyYXZlcnNlLnB1c2goY3VycmVudFN0ZXAucHJlcmVxdWlzaXRlc1tzdGVwX3NsdWddKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlVmVyc2lvbjogZnVuY3Rpb24odGFza0Fzc2lnbm1lbnQpIHtcbiAgICAgIGlmICh0YXNrQXNzaWdubWVudCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgIHRhc2tBc3NpZ25tZW50LnRhc2suZGF0YS5fX3ZlcnNpb24gPD0gMSkge1xuICAgICAgICB0YXNrQXNzaWdubWVudC50YXNrLmRhdGEgPSB7XG4gICAgICAgICAgX192ZXJzaW9uOiAxXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbiAgdmFyIHJlZ2lzdGVyZWQgPSB7fTtcbiAgdmFyIHNpZ25hbHMgPSB7XG4gICAgcmVnaXN0ZXJTaWduYWw6IGZ1bmN0aW9uKHNpZ25hbFR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICByZWdpc3RlcmVkW3NpZ25hbFR5cGVdID0gcmVnaXN0ZXJlZFtzaWduYWxUeXBlXSB8fCBbXTtcbiAgICAgIHJlZ2lzdGVyZWRbc2lnbmFsVHlwZV0ucHVzaChjYWxsYmFjayk7XG4gICAgfSxcbiAgICBmaXJlU2lnbmFsOiBmdW5jdGlvbihzaWduYWxUeXBlKSB7XG4gICAgICB2YXIgc3VjY2VzcyA9IHRydWU7XG4gICAgICByZWdpc3RlcmVkW3NpZ25hbFR5cGVdID0gcmVnaXN0ZXJlZFtzaWduYWxUeXBlXSB8fCBbXTtcbiAgICAgIHJlZ2lzdGVyZWRbc2lnbmFsVHlwZV0uZm9yRWFjaChmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBzdWNjZXNzID0gY2FsbGJhY2soKSAmJiBzdWNjZXNzO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9LFxuICB9O1xuXG4gIHZhciBvcmNoZXN0cmFTZXJ2aWNlID0ge1xuICAgICdnb29nbGVVdGlscyc6IGdvb2dsZVV0aWxzLFxuICAgICd0YXNrVXRpbHMnOiB0YXNrVXRpbHMsXG4gICAgJ3NpZ25hbHMnOiBzaWduYWxzLFxuICB9O1xuICByZXR1cm4gb3JjaGVzdHJhU2VydmljZTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
