!function(){"use strict";var serviceModule=angular.module("orchestra.task.services");serviceModule.factory("requiredFields",["$rootScope","orchestraService",function($rootScope,orchestraService){var requiredFields={validators:{"input-checkbox":[function(elem){return elem.checked}],"input-text":[function(elem){return elem.value&&elem.value.length>0}]},setup:function(data){this.fields={},this.invalid=[],this.data=data},require:function(fieldType,field){void 0===this.fields[fieldType]?this.fields[fieldType]=[field]:this.fields[fieldType].push(field)},validate:function(){var requiredFields=this;requiredFields.invalid=[];for(var fieldType in requiredFields.fields){var validators=requiredFields.validators[fieldType];if(validators){var fields=requiredFields.fields[fieldType];fields.forEach(function(field){var success=!0;validators.forEach(function(validator){success=success&&validator(field)}),success||requiredFields.invalid.push(field)})}else console.error("Validators not found for field type:"+fieldType)}return $rootScope.$broadcast("orchestra:task:validatedFields"),0===requiredFields.invalid.length},registerValidator:function(fieldType,validator){var requiredFields=this;void 0===requiredFields.validators[fieldType]?requiredFields.validators[fieldType].push(validator):requiredFields.validators[fieldType]=[validator]}};return orchestraService.signals.registerSignal("submit.before",function(){return requiredFields.validate()?void 0:(alert("One or more required fields have not been filled out."),!1)}),requiredFields}]),angular.module("orchestra.task.directives").directive("orchestraRequiredField",["$compile","requiredFields",function($compile,requiredFields){return{restrict:"EA",link:function(scope,elem,attrs){var field=elem.find("input")[0],errorClass=elem.attr("data-error-class");if(errorClass||(errorClass=field.getAttribute("type")+"-error"),field&&"checkbox"!=field.getAttribute("type")&&"text"!=field.getAttribute("type"))return void console.error("Unsupported required field type.");requiredFields.require("input-"+field.getAttribute("type"),field);var toggleError=function(){requiredFields.invalid.indexOf(field)>=0?elem.addClass("required-field-error "+errorClass):elem.removeClass("required-field-error "+errorClass)};toggleError(),scope.$on("orchestra:task:validatedFields",toggleError)}}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yY2hlc3RyYS90YXNrL2pzL3JlcXVpcmVkX2ZpZWxkcy5qcyJdLCJuYW1lcyI6WyJzZXJ2aWNlTW9kdWxlIiwiYW5ndWxhciIsIm1vZHVsZSIsImZhY3RvcnkiLCIkcm9vdFNjb3BlIiwib3JjaGVzdHJhU2VydmljZSIsInJlcXVpcmVkRmllbGRzIiwidmFsaWRhdG9ycyIsImlucHV0LWNoZWNrYm94IiwiZWxlbSIsImNoZWNrZWQiLCJpbnB1dC10ZXh0IiwidmFsdWUiLCJsZW5ndGgiLCJzZXR1cCIsImRhdGEiLCJ0aGlzIiwiZmllbGRzIiwiaW52YWxpZCIsInJlcXVpcmUiLCJmaWVsZFR5cGUiLCJmaWVsZCIsInVuZGVmaW5lZCIsInB1c2giLCJ2YWxpZGF0ZSIsImZvckVhY2giLCJzdWNjZXNzIiwidmFsaWRhdG9yIiwiY29uc29sZSIsImVycm9yIiwiJGJyb2FkY2FzdCIsInJlZ2lzdGVyVmFsaWRhdG9yIiwic2lnbmFscyIsInJlZ2lzdGVyU2lnbmFsIiwiYWxlcnQiLCJkaXJlY3RpdmUiLCIkY29tcGlsZSIsInJlc3RyaWN0IiwibGluayIsInNjb3BlIiwiYXR0cnMiLCJmaW5kIiwiZXJyb3JDbGFzcyIsImF0dHIiLCJnZXRBdHRyaWJ1dGUiLCJ0b2dnbGVFcnJvciIsImluZGV4T2YiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiJG9uIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNFLFlBRUEsSUFBSUEsZUFBZ0JDLFFBQVFDLE9BQU8sMEJBTW5DRixlQUFjRyxRQUFRLGtCQUFBLGFBQUEsbUJBQWtCLFNBQVNDLFdBQVlDLGtCQUMzRCxHQUFJQyxpQkFDRkMsWUFDRUMsa0JBRUUsU0FBU0MsTUFDUCxNQUFPQSxNQUFLQyxVQUdoQkMsY0FFRSxTQUFTRixNQUNQLE1BQU9BLE1BQUtHLE9BQVNILEtBQUtHLE1BQU1DLE9BQVMsS0FJL0NDLE1BQU8sU0FBU0MsTUFJZEMsS0FBS0MsVUFDTEQsS0FBS0UsV0FDTEYsS0FBS0QsS0FBT0EsTUFFZEksUUFBUyxTQUFTQyxVQUFXQyxPQU1JQyxTQUEzQk4sS0FBS0MsT0FBT0csV0FDZEosS0FBS0MsT0FBT0csWUFBY0MsT0FFMUJMLEtBQUtDLE9BQU9HLFdBQVdHLEtBQUtGLFFBR2hDRyxTQUFVLFdBS1IsR0FBSWxCLGdCQUFpQlUsSUFDckJWLGdCQUFlWSxVQUlmLEtBQUssR0FBSUUsYUFBYWQsZ0JBQWVXLE9BQVEsQ0FDM0MsR0FBSVYsWUFBYUQsZUFBZUMsV0FBV2EsVUFDM0MsSUFBS2IsV0FBTCxDQUlBLEdBQUlVLFFBQVNYLGVBQWVXLE9BQU9HLFVBQ25DSCxRQUFPUSxRQUFRLFNBQVNKLE9BQ3RCLEdBQUlLLFVBQVUsQ0FDZG5CLFlBQVdrQixRQUFRLFNBQVNFLFdBQzFCRCxRQUFVQSxTQUFXQyxVQUFVTixTQUU1QkssU0FDSHBCLGVBQWVZLFFBQVFLLEtBQUtGLGFBVjlCTyxTQUFRQyxNQUFNLHVDQUF5Q1QsV0FlM0QsTUFEQWhCLFlBQVcwQixXQUFXLGtDQUNtQixJQUFsQ3hCLGVBQWVZLFFBQVFMLFFBRWhDa0Isa0JBQW1CLFNBQVNYLFVBQVdPLFdBSXJDLEdBQUlyQixnQkFBaUJVLElBQ3dCTSxVQUF6Q2hCLGVBQWVDLFdBQVdhLFdBQzVCZCxlQUFlQyxXQUFXYSxXQUFXRyxLQUFLSSxXQUUxQ3JCLGVBQWVDLFdBQVdhLFlBQWNPLFlBYTlDLE9BUkF0QixrQkFBaUIyQixRQUFRQyxlQUN2QixnQkFBaUIsV0FDZixNQUFLM0IsZ0JBQWVrQixXQUFwQixRQUNFVSxNQUFNLDBEQUNDLEtBSU41QixrQkFXVEwsUUFBUUMsT0FBTyw2QkFDWmlDLFVBQVUsMEJBQUEsV0FBQSxpQkFBMEIsU0FBU0MsU0FBVTlCLGdCQUN0RCxPQUNFK0IsU0FBVSxLQUNWQyxLQUFNLFNBQVNDLE1BQU85QixLQUFNK0IsT0FDMUIsR0FBSW5CLE9BQVFaLEtBQUtnQyxLQUFLLFNBQVMsR0FDM0JDLFdBQWFqQyxLQUFLa0MsS0FBSyxtQkFJM0IsSUFIS0QsYUFDSEEsV0FBYXJCLE1BQU11QixhQUFhLFFBQVUsVUFFeEN2QixPQUM0QixZQUE5QkEsTUFBTXVCLGFBQWEsU0FDVyxRQUE5QnZCLE1BQU11QixhQUFhLFFBRW5CLFdBREFoQixTQUFRQyxNQUFNLG1DQUdoQnZCLGdCQUFlYSxRQUFRLFNBQVdFLE1BQU11QixhQUFhLFFBQVN2QixNQUM5RCxJQUFJd0IsYUFBYyxXQUNadkMsZUFBZVksUUFBUTRCLFFBQVF6QixRQUFVLEVBQzNDWixLQUFLc0MsU0FBUyx3QkFBMEJMLFlBRXhDakMsS0FBS3VDLFlBQVksd0JBQTBCTixZQUcvQ0csZUFDQU4sTUFBTVUsSUFBSSxpQ0FBa0NKIiwiZmlsZSI6Im9yY2hlc3RyYS90YXNrL2pzL3JlcXVpcmVkX2ZpZWxkcy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgc2VydmljZU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdvcmNoZXN0cmEudGFzay5zZXJ2aWNlcycpO1xuXG4gIC8qKlxuICAgKiBTZXJ2aWNlIHRvIGtlZXAgdHJhY2sgb2YgYWxsIHJlcXVpcmVkIGZpZWxkcyBpbiBhIHRhc2sgdmlldyBhbmRcbiAgICogdmFsaWRhdGUgdGhlbSBvbiBzdWJtaXQuXG4gICAqL1xuICBzZXJ2aWNlTW9kdWxlLmZhY3RvcnkoJ3JlcXVpcmVkRmllbGRzJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgb3JjaGVzdHJhU2VydmljZSkge1xuICAgIHZhciByZXF1aXJlZEZpZWxkcyA9IHtcbiAgICAgIHZhbGlkYXRvcnM6IHtcbiAgICAgICAgJ2lucHV0LWNoZWNrYm94JzogW1xuXG4gICAgICAgICAgZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW0uY2hlY2tlZDtcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgICdpbnB1dC10ZXh0JzogW1xuXG4gICAgICAgICAgZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW0udmFsdWUgJiYgZWxlbS52YWx1ZS5sZW5ndGggPiAwO1xuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICBzZXR1cDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB1cCB0aGUgYmFzZSBkYXRhIG9uIHdoaWNoIHRvIHZhbGlkYXRlIGZpZWxkcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmllbGRzID0ge307XG4gICAgICAgIHRoaXMuaW52YWxpZCA9IFtdO1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgfSxcbiAgICAgIHJlcXVpcmU6IGZ1bmN0aW9uKGZpZWxkVHlwZSwgZmllbGQpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgYSBmaWVsZCBhcyByZXF1aXJlZC4gRmllbGRzIGFyZSBIVE1MIGVsZW1lbnRzIHRvIGJlXG4gICAgICAgICAqIGNoZWNrZWQgYnkgb25lIG9yIG1vcmUgdmFsaWRhdG9ycyBhY2NvcmRpbmcgdG8gdGhlaXIgZmllbGRcbiAgICAgICAgICogdHlwZS5cbiAgICAgICAgICovXG4gICAgICAgIGlmICh0aGlzLmZpZWxkc1tmaWVsZFR5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLmZpZWxkc1tmaWVsZFR5cGVdID0gW2ZpZWxkXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmZpZWxkc1tmaWVsZFR5cGVdLnB1c2goZmllbGQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdmFsaWRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVmFsaWRhdGVzIHJlcXVpcmVkIGZpZWxkcyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVnaXN0ZXJlZFxuICAgICAgICAgKiB2YWxpZGF0b3JzLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHJlcXVpcmVkRmllbGRzID0gdGhpcztcbiAgICAgICAgcmVxdWlyZWRGaWVsZHMuaW52YWxpZCA9IFtdO1xuXG4gICAgICAgICAvKmpzaGludCAtVzA4MyAqL1xuICAgICAgICAvLyBIaWRlIGVycm9yIGZvciBjcmVhdGluZyBhIGZ1bmN0aW9uIGluIGEgbG9vcFxuICAgICAgICBmb3IgKHZhciBmaWVsZFR5cGUgaW4gcmVxdWlyZWRGaWVsZHMuZmllbGRzKSB7XG4gICAgICAgICAgdmFyIHZhbGlkYXRvcnMgPSByZXF1aXJlZEZpZWxkcy52YWxpZGF0b3JzW2ZpZWxkVHlwZV07XG4gICAgICAgICAgaWYgKCF2YWxpZGF0b3JzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdWYWxpZGF0b3JzIG5vdCBmb3VuZCBmb3IgZmllbGQgdHlwZTonICsgZmllbGRUeXBlKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgZmllbGRzID0gcmVxdWlyZWRGaWVsZHMuZmllbGRzW2ZpZWxkVHlwZV07XG4gICAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24oZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBzdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhbGlkYXRvcnMuZm9yRWFjaChmdW5jdGlvbih2YWxpZGF0b3IpIHtcbiAgICAgICAgICAgICAgc3VjY2VzcyA9IHN1Y2Nlc3MgJiYgdmFsaWRhdG9yKGZpZWxkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAgIHJlcXVpcmVkRmllbGRzLmludmFsaWQucHVzaChmaWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdvcmNoZXN0cmE6dGFzazp2YWxpZGF0ZWRGaWVsZHMnKTtcbiAgICAgICAgcmV0dXJuIHJlcXVpcmVkRmllbGRzLmludmFsaWQubGVuZ3RoID09PSAwO1xuICAgICAgfSxcbiAgICAgIHJlZ2lzdGVyVmFsaWRhdG9yOiBmdW5jdGlvbihmaWVsZFR5cGUsIHZhbGlkYXRvcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXIgYSB2YWxpZGF0b3IgZnVuY3Rpb24gdG8gdGhlIGdpdmVuIGZpZWxkIHR5cGUuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcmVxdWlyZWRGaWVsZHMgPSB0aGlzO1xuICAgICAgICBpZiAocmVxdWlyZWRGaWVsZHMudmFsaWRhdG9yc1tmaWVsZFR5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXF1aXJlZEZpZWxkcy52YWxpZGF0b3JzW2ZpZWxkVHlwZV0ucHVzaCh2YWxpZGF0b3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcXVpcmVkRmllbGRzLnZhbGlkYXRvcnNbZmllbGRUeXBlXSA9IFt2YWxpZGF0b3JdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIG9yY2hlc3RyYVNlcnZpY2Uuc2lnbmFscy5yZWdpc3RlclNpZ25hbChcbiAgICAgICdzdWJtaXQuYmVmb3JlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghcmVxdWlyZWRGaWVsZHMudmFsaWRhdGUoKSkge1xuICAgICAgICAgIGFsZXJ0KCdPbmUgb3IgbW9yZSByZXF1aXJlZCBmaWVsZHMgaGF2ZSBub3QgYmVlbiBmaWxsZWQgb3V0LicpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICByZXR1cm4gcmVxdWlyZWRGaWVsZHM7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhIGRpcmVjdGl2ZSB0byB3cmFwIHJlcXVpcmVkIGZpZWxkcyBpbiB0YXNrIHZpZXdzLlxuICAgKiAgIC0gVGhlIHdyYXBwZWQgSFRNTCBzaG91bGQgY29udGFpbiBhbiBpbnB1dCBlbGVtZW50IGJvdW5kIHdpdGhcbiAgICogICAgIG5nTW9kZWwuXG4gICAqICAgLSBPcHRpb25hbGx5IHByb3ZpZGUgYSBjbGFzcyB0byBhZGQgdG8gdGhlIGRpcmVjdGl2ZSB3cmFwcGVyIG9uXG4gICAqICAgICBlcnJvciB3aXRoIGBkYXRhLWVycm9yLWNsYXNzPVwiZXJyb3ItY2xhc3NcImAgb24gdGhlIGRpcmVjdGl2ZVxuICAgKiAgICAgZWxlbWVudDsgb3RoZXJ3aXNlLCBhIGRlZmF1bHQgaXMgcHJvdmlkZWQgZm9yIHRoZSBpbnB1dCB0eXBlLlxuICAgKi9cbiAgYW5ndWxhci5tb2R1bGUoJ29yY2hlc3RyYS50YXNrLmRpcmVjdGl2ZXMnKVxuICAgIC5kaXJlY3RpdmUoJ29yY2hlc3RyYVJlcXVpcmVkRmllbGQnLCBmdW5jdGlvbigkY29tcGlsZSwgcmVxdWlyZWRGaWVsZHMpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgICB2YXIgZmllbGQgPSBlbGVtLmZpbmQoJ2lucHV0JylbMF07XG4gICAgICAgICAgdmFyIGVycm9yQ2xhc3MgPSBlbGVtLmF0dHIoJ2RhdGEtZXJyb3ItY2xhc3MnKTtcbiAgICAgICAgICBpZiAoIWVycm9yQ2xhc3MpIHtcbiAgICAgICAgICAgIGVycm9yQ2xhc3MgPSBmaWVsZC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSArICctZXJyb3InO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZmllbGQgJiZcbiAgICAgICAgICAgIGZpZWxkLmdldEF0dHJpYnV0ZSgndHlwZScpICE9ICdjaGVja2JveCcgJiZcbiAgICAgICAgICAgIGZpZWxkLmdldEF0dHJpYnV0ZSgndHlwZScpICE9ICd0ZXh0Jykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5zdXBwb3J0ZWQgcmVxdWlyZWQgZmllbGQgdHlwZS4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVxdWlyZWRGaWVsZHMucmVxdWlyZSgnaW5wdXQtJyArIGZpZWxkLmdldEF0dHJpYnV0ZSgndHlwZScpLCBmaWVsZCk7XG4gICAgICAgICAgdmFyIHRvZ2dsZUVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAocmVxdWlyZWRGaWVsZHMuaW52YWxpZC5pbmRleE9mKGZpZWxkKSA+PSAwKSB7XG4gICAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ3JlcXVpcmVkLWZpZWxkLWVycm9yICcgKyBlcnJvckNsYXNzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkLWZpZWxkLWVycm9yICcgKyBlcnJvckNsYXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHRvZ2dsZUVycm9yKCk7XG4gICAgICAgICAgc2NvcGUuJG9uKCdvcmNoZXN0cmE6dGFzazp2YWxpZGF0ZWRGaWVsZHMnLCB0b2dnbGVFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG5cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
