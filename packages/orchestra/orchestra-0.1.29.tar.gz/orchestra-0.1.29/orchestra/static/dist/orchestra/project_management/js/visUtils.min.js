!function(){"use strict";var serviceModule=angular.module("orchestra.project_management.services");serviceModule.factory("visUtils",["dataService",function(dataService){return{setup:function(parentContainer,params){this.parentContainer=parentContainer,this.params=params},svgLeftMargin:function(){return d3.select(".freeze-pane-left").node().getBoundingClientRect().width},getTaskHeight:function(task){var numAssignments=1,taskKey=dataService.keyFromTask(task);return dataService.taskMeta(taskKey,"expandAssignments")&&(numAssignments=task.assignments.length+1),this.params.barHeight*numAssignments+this.params.lanePadding.top+this.params.lanePadding.bottom},getSvgHeight:function(){var utils=this,svgHeight=this.params.scaleHeight;for(var step_slug in dataService.data.tasks){var task=dataService.data.tasks[step_slug];svgHeight+=utils.getTaskHeight(task)}return svgHeight},getSvgWidth:function(){return this.params.scaleWidth+this.params.marginRight},translateString:function(x,y){return"translate("+x+", "+y+")"}}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yY2hlc3RyYS9wcm9qZWN0X21hbmFnZW1lbnQvanMvdmlzVXRpbHMuanMiXSwibmFtZXMiOlsic2VydmljZU1vZHVsZSIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiZGF0YVNlcnZpY2UiLCJzZXR1cCIsInBhcmVudENvbnRhaW5lciIsInBhcmFtcyIsInRoaXMiLCJzdmdMZWZ0TWFyZ2luIiwiZDMiLCJzZWxlY3QiLCJub2RlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJnZXRUYXNrSGVpZ2h0IiwidGFzayIsIm51bUFzc2lnbm1lbnRzIiwidGFza0tleSIsImtleUZyb21UYXNrIiwidGFza01ldGEiLCJhc3NpZ25tZW50cyIsImxlbmd0aCIsImJhckhlaWdodCIsImxhbmVQYWRkaW5nIiwidG9wIiwiYm90dG9tIiwiZ2V0U3ZnSGVpZ2h0IiwidXRpbHMiLCJzdmdIZWlnaHQiLCJzY2FsZUhlaWdodCIsInN0ZXBfc2x1ZyIsImRhdGEiLCJ0YXNrcyIsImdldFN2Z1dpZHRoIiwic2NhbGVXaWR0aCIsIm1hcmdpblJpZ2h0IiwidHJhbnNsYXRlU3RyaW5nIiwieCIsInkiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0UsWUFFQSxJQUFJQSxlQUFnQkMsUUFBUUMsT0FBTyx3Q0FFbkNGLGVBQWNHLFFBQVEsWUFBQSxjQUFZLFNBQVNDLGFBUXpDLE9BQ0VDLE1BQU8sU0FBU0MsZ0JBQWlCQyxRQUMvQkMsS0FBS0YsZ0JBQWtCQSxnQkFDdkJFLEtBQUtELE9BQVNBLFFBRWhCRSxjQUFlLFdBS2IsTUFBT0MsSUFBR0MsT0FBTyxxQkFBcUJDLE9BQU9DLHdCQUF3QkMsT0FFdkVDLGNBQWUsU0FBU0MsTUFJdEIsR0FBSUMsZ0JBQWlCLEVBQ2pCQyxRQUFVZCxZQUFZZSxZQUFZSCxLQUl0QyxPQUhJWixhQUFZZ0IsU0FBU0YsUUFBUyx1QkFDaENELGVBQWlCRCxLQUFLSyxZQUFZQyxPQUFTLEdBRXJDZCxLQUFLRCxPQUFPZ0IsVUFBWU4sZUFDOUJULEtBQUtELE9BQU9pQixZQUFZQyxJQUN4QmpCLEtBQUtELE9BQU9pQixZQUFZRSxRQUU1QkMsYUFBYyxXQUlaLEdBQUlDLE9BQVFwQixLQUNScUIsVUFBWXJCLEtBQUtELE9BQU91QixXQUM1QixLQUFLLEdBQUlDLGFBQWEzQixhQUFZNEIsS0FBS0MsTUFBTyxDQUM1QyxHQUFJakIsTUFBT1osWUFBWTRCLEtBQUtDLE1BQU1GLFVBQ2xDRixZQUFhRCxNQUFNYixjQUFjQyxNQUVuQyxNQUFPYSxZQUVUSyxZQUFhLFdBSVgsTUFBTzFCLE1BQUtELE9BQU80QixXQUFhM0IsS0FBS0QsT0FBTzZCLGFBRTlDQyxnQkFBaUIsU0FBU0MsRUFBR0MsR0FJM0IsTUFBTyxhQUFlRCxFQUFJLEtBQU9DLEVBQUkiLCJmaWxlIjoib3JjaGVzdHJhL3Byb2plY3RfbWFuYWdlbWVudC9qcy92aXNVdGlscy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgc2VydmljZU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdvcmNoZXN0cmEucHJvamVjdF9tYW5hZ2VtZW50LnNlcnZpY2VzJyk7XG5cbiAgc2VydmljZU1vZHVsZS5mYWN0b3J5KCd2aXNVdGlscycsIGZ1bmN0aW9uKGRhdGFTZXJ2aWNlKSB7XG4gICAgLyoqXG4gICAgICogU2VydmljZSB0byBwcm92aWRlIGNvbW1vbiB2aXN1YWxpemF0aW9uIGhlbHBlcnMgYWNyb3NzIHByb2plY3RcbiAgICAgKiBtYW5hZ2VtZW50IGNvbXBvbmVudHMuXG4gICAgICovXG5cbiAgICB2YXIgX3ZpcztcblxuICAgIHJldHVybiB7XG4gICAgICBzZXR1cDogZnVuY3Rpb24ocGFyZW50Q29udGFpbmVyLCBwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5wYXJlbnRDb250YWluZXIgPSBwYXJlbnRDb250YWluZXI7XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgICAgfSxcbiAgICAgIHN2Z0xlZnRNYXJnaW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlcyB3aWR0aCBvZiB0aGUgZnJvemVuIHBhbmUgY29udGFpbmluZyB0YXNrIHN0ZXAgc2x1Z3MgYW5kXG4gICAgICAgICAqIG90aGVyIGRhdGEuXG4gICAgICAgICAqL1xuICAgICAgICByZXR1cm4gZDMuc2VsZWN0KCcuZnJlZXplLXBhbmUtbGVmdCcpLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgIH0sXG4gICAgICBnZXRUYXNrSGVpZ2h0OiBmdW5jdGlvbih0YXNrKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGVzIHRoZSBoZWlnaHQgb2YgYW4gaW5kaXZpZHVhbCB0YXNrIHZpc3VhbGl6YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgbnVtQXNzaWdubWVudHMgPSAxO1xuICAgICAgICB2YXIgdGFza0tleSA9IGRhdGFTZXJ2aWNlLmtleUZyb21UYXNrKHRhc2spO1xuICAgICAgICBpZiAoZGF0YVNlcnZpY2UudGFza01ldGEodGFza0tleSwgJ2V4cGFuZEFzc2lnbm1lbnRzJykpIHtcbiAgICAgICAgICBudW1Bc3NpZ25tZW50cyA9IHRhc2suYXNzaWdubWVudHMubGVuZ3RoICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKHRoaXMucGFyYW1zLmJhckhlaWdodCAqIG51bUFzc2lnbm1lbnRzICtcbiAgICAgICAgICB0aGlzLnBhcmFtcy5sYW5lUGFkZGluZy50b3AgK1xuICAgICAgICAgIHRoaXMucGFyYW1zLmxhbmVQYWRkaW5nLmJvdHRvbSk7XG4gICAgICB9LFxuICAgICAgZ2V0U3ZnSGVpZ2h0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRvdGFscyB0aGUgaGVpZ2h0cyBvZiBhbGwgdGhlIHByb2plY3QncyB0YXNrIHZpc3VhbGl6YXRpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHV0aWxzID0gdGhpcztcbiAgICAgICAgdmFyIHN2Z0hlaWdodCA9IHRoaXMucGFyYW1zLnNjYWxlSGVpZ2h0O1xuICAgICAgICBmb3IgKHZhciBzdGVwX3NsdWcgaW4gZGF0YVNlcnZpY2UuZGF0YS50YXNrcykge1xuICAgICAgICAgIHZhciB0YXNrID0gZGF0YVNlcnZpY2UuZGF0YS50YXNrc1tzdGVwX3NsdWddO1xuICAgICAgICAgIHN2Z0hlaWdodCArPSB1dGlscy5nZXRUYXNrSGVpZ2h0KHRhc2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdmdIZWlnaHQ7XG4gICAgICB9LFxuICAgICAgZ2V0U3ZnV2lkdGg6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgZGVzaXJlZCB3aWR0aCBvZiB0aGUgdmlldy5cbiAgICAgICAgICovXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtcy5zY2FsZVdpZHRoICsgdGhpcy5wYXJhbXMubWFyZ2luUmlnaHQ7XG4gICAgICB9LFxuICAgICAgdHJhbnNsYXRlU3RyaW5nOiBmdW5jdGlvbih4LCB5KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgdHJhbnNsYXRlIHN0cmluZyBmb3IgdGhlIGdpdmVuIGNvb3JkaW5hdGVzLlxuICAgICAgICAgKi9cbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHggKyAnLCAnICsgeSArICcpJztcbiAgICAgIH0sXG4gICAgfTtcbiAgfSk7XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
