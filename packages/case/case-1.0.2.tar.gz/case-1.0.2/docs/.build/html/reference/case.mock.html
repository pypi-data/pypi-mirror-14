<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>case.mock &mdash; case 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/celery.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="case 1.0.1 documentation" href="../index.html" />
    <link rel="up" title="API Reference" href="index.html" />
    <link rel="next" title="case.utils" href="case.utils.html" />
    <link rel="prev" title="case.skip" href="case.skip.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="case.utils.html" title="case.utils"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="case.skip.html" title="case.skip"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">case 1.0.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">API Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
<div class="section" id="case-mock">
<h1>case.mock<a class="headerlink" href="#case-mock" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-case.mock"></span><dl class="function">
<dt id="case.mock.ContextMock">
<code class="descclassname">case.mock.</code><code class="descname">ContextMock</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#ContextMock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.ContextMock" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock that mocks <a class="reference external" href="http://docs.python.org/dev/reference/compound_stmts.html#with" title="(in Python v3.6)"><code class="xref std std-keyword docutils literal"><span class="pre">with</span></code></a> statement contexts.</p>
</dd></dl>

<dl class="class">
<dt id="case.mock.MagicMock">
<em class="property">class </em><code class="descclassname">case.mock.</code><code class="descname">MagicMock</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#MagicMock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.MagicMock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="case.mock.Mock">
<em class="property">class </em><code class="descclassname">case.mock.</code><code class="descname">Mock</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#Mock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.Mock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="case.mock.MockCallbacks">
<em class="property">class </em><code class="descclassname">case.mock.</code><code class="descname">MockCallbacks</code><a class="reference internal" href="../_modules/case/mock.html#MockCallbacks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.MockCallbacks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="case.mock.call">
<code class="descclassname">case.mock.</code><code class="descname">call</code><a class="headerlink" href="#case.mock.call" title="Permalink to this definition">¶</a></dt>
<dd><p>A tuple for holding the results of a call to a mock, either in the form
<cite>(args, kwargs)</cite> or <cite>(name, args, kwargs)</cite>.</p>
<p>If args or kwargs are empty then a call tuple will compare equal to
a tuple without those values. This makes comparisons less verbose:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">_Call</span><span class="p">((</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">(),</span> <span class="p">{}))</span> <span class="o">==</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,)</span>
<span class="n">_Call</span><span class="p">((</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,),</span> <span class="p">{}))</span> <span class="o">==</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,))</span>
<span class="n">_Call</span><span class="p">(((),</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}))</span> <span class="o">==</span> <span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},)</span>
</pre></div>
</div>
<p>The <cite>_Call</cite> object provides a useful shortcut for comparing with call:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">_Call</span><span class="p">(((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}))</span> <span class="o">==</span> <span class="n">call</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">_Call</span><span class="p">((</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}))</span> <span class="o">==</span> <span class="n">call</span><span class="o">.</span><span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>If the _Call has no name then it will match any name.</p>
</dd></dl>

<dl class="function">
<dt id="case.mock.patch">
<code class="descclassname">case.mock.</code><code class="descname">patch</code><span class="sig-paren">(</span><em>target</em>, <em>new=sentinel.DEFAULT</em>, <em>spec=None</em>, <em>create=False</em>, <em>spec_set=None</em>, <em>autospec=None</em>, <em>new_callable=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mock/mock.html#patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.patch" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>patch</cite> acts as a function decorator, class decorator or a context
manager. Inside the body of the function or with statement, the <cite>target</cite>
is patched with a <cite>new</cite> object. When the function/with statement exits
the patch is undone.</p>
<p>If <cite>new</cite> is omitted, then the target is replaced with a
<cite>MagicMock</cite>. If <cite>patch</cite> is used as a decorator and <cite>new</cite> is
omitted, the created mock is passed in as an extra argument to the
decorated function. If <cite>patch</cite> is used as a context manager the created
mock is returned by the context manager.</p>
<p><cite>target</cite> should be a string in the form <cite>&#8216;package.module.ClassName&#8217;</cite>. The
<cite>target</cite> is imported and the specified object replaced with the <cite>new</cite>
object, so the <cite>target</cite> must be importable from the environment you are
calling <cite>patch</cite> from. The target is imported when the decorated function
is executed, not at decoration time.</p>
<p>The <cite>spec</cite> and <cite>spec_set</cite> keyword arguments are passed to the <cite>MagicMock</cite>
if patch is creating one for you.</p>
<p>In addition you can pass <cite>spec=True</cite> or <cite>spec_set=True</cite>, which causes
patch to pass in the object being mocked as the spec/spec_set object.</p>
<p><cite>new_callable</cite> allows you to specify a different class, or callable object,
that will be called to create the <cite>new</cite> object. By default <cite>MagicMock</cite> is
used.</p>
<p>A more powerful form of <cite>spec</cite> is <cite>autospec</cite>. If you set <cite>autospec=True</cite>
then the mock will be created with a spec from the object being replaced.
All attributes of the mock will also have the spec of the corresponding
attribute of the object being replaced. Methods and functions being
mocked will have their arguments checked and will raise a <cite>TypeError</cite> if
they are called with the wrong signature. For mocks replacing a class,
their return value (the &#8216;instance&#8217;) will have the same spec as the class.</p>
<p>Instead of <cite>autospec=True</cite> you can pass <cite>autospec=some_object</cite> to use an
arbitrary object as the spec instead of the one being replaced.</p>
<p>By default <cite>patch</cite> will fail to replace attributes that don&#8217;t exist. If
you pass in <cite>create=True</cite>, and the attribute doesn&#8217;t exist, patch will
create the attribute for you when the patched function is called, and
delete it again afterwards. This is useful for writing tests against
attributes that your production code creates at runtime. It is off by
default because it can be dangerous. With it switched on you can write
passing tests against APIs that don&#8217;t actually exist!</p>
<p>Patch can be used as a <cite>TestCase</cite> class decorator. It works by
decorating each test method in the class. This reduces the boilerplate
code when your test methods share a common patchings set. <cite>patch</cite> finds
tests by looking for method names that start with <cite>patch.TEST_PREFIX</cite>.
By default this is <cite>test</cite>, which matches the way <cite>unittest</cite> finds tests.
You can specify an alternative prefix by setting <cite>patch.TEST_PREFIX</cite>.</p>
<p>Patch can be used as a context manager, with the with statement. Here the
patching applies to the indented block after the with statement. If you
use &#8220;as&#8221; then the patched object will be bound to the name after the
&#8220;as&#8221;; very useful if <cite>patch</cite> is creating a mock object for you.</p>
<p><cite>patch</cite> takes arbitrary keyword arguments. These will be passed to
the <cite>Mock</cite> (or <cite>new_callable</cite>) on construction.</p>
<p><cite>patch.dict(...)</cite>, <cite>patch.multiple(...)</cite> and <cite>patch.object(...)</cite> are
available for alternate use-cases.</p>
</dd></dl>

<dl class="function">
<dt id="case.mock.wrap_logger">
<code class="descclassname">case.mock.</code><code class="descname">wrap_logger</code><span class="sig-paren">(</span><em>logger</em>, <em>loglevel=40</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#wrap_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.wrap_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap <a class="reference external" href="http://docs.python.org/dev/library/logging.html#logging.Logger" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">logging.Logger</span></code></a> with a StringIO() handler.</p>
<p>yields a StringIO handle.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">wrap_logger</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">loglevel</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span> <span class="k">as</span> <span class="n">sio</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">sio</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.environ">
<code class="descclassname">case.mock.</code><code class="descname">environ</code><span class="sig-paren">(</span><em>env_name</em>, <em>env_value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#environ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.environ" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock environment variable value.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">environ</span><span class="p">(</span><span class="s1">&#39;DJANGO_SETTINGS_MODULE&#39;</span><span class="p">,</span> <span class="s1">&#39;proj.settings&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_other_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.sleepdeprived">
<code class="descclassname">case.mock.</code><code class="descname">sleepdeprived</code><span class="sig-paren">(</span><em>module=&lt;module 'time' from '/Users/asksol/.virtualenvs/def/lib/python2.7/lib-dynload/time.so'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#sleepdeprived"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.sleepdeprived" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock time.sleep to do nothing.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">sleepdeprived</span><span class="p">()</span>  <span class="c1"># &lt; patches time.sleep</span>
<span class="nd">@mock</span><span class="o">.</span><span class="n">sleepdeprived</span><span class="p">(</span><span class="n">celery</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>  <span class="c1"># &lt; patches celery.result.sleep</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.mask_modules">
<code class="descclassname">case.mock.</code><code class="descname">mask_modules</code><span class="sig-paren">(</span><em>*modnames</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#mask_modules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.mask_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Ban some modules from being importable inside the context</p>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">mask_modules</span><span class="p">(</span><span class="s1">&#39;sys&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>        <span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">... </span>    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sys not found&#39;</span><span class="p">)</span>
<span class="go">sys not found</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>  <span class="c1"># noqa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">version</span>
<span class="go">(2, 5, 2, &#39;final&#39;, 0)</span>
</pre></div>
</div>
<p>Or as a decorator:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mask_modules</span><span class="p">(</span><span class="s1">&#39;sys&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.stdouts">
<code class="descclassname">case.mock.</code><code class="descname">stdouts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#stdouts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.stdouts" title="Permalink to this definition">¶</a></dt>
<dd><p>Override <cite>sys.stdout</cite> and <cite>sys.stderr</cite> with <cite>StringIO</cite>
instances.</p>
<p>Decorator example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">stdouts</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="p">):</span>
    <span class="n">something</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">stdout</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
</pre></div>
</div>
<p>Context example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">stdouts</span><span class="p">()</span> <span class="k">as</span> <span class="p">(</span><span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="p">):</span>
    <span class="n">something</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">stdout</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.replace_module_value">
<code class="descclassname">case.mock.</code><code class="descname">replace_module_value</code><span class="sig-paren">(</span><em>module</em>, <em>name</em>, <em>value=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#replace_module_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.replace_module_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock module value, given a module, attribute name and value.</p>
<p>Decorator example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">replace_module_value</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="s1">&#39;CONSTANT&#39;</span><span class="p">,</span> <span class="mf">3.03</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Context example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">replace_module_value</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="s1">&#39;CONSTANT&#39;</span><span class="p">,</span> <span class="mf">3.03</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.sys_version">
<code class="descclassname">case.mock.</code><code class="descname">sys_version</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#sys_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.sys_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock <a class="reference external" href="http://docs.python.org/dev/library/sys.html#sys.version_info" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">sys.version_info</span></code></a></p>
<p>Decorator example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">sys_version</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Context example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">sys_version</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)):</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.pypy_version">
<code class="descclassname">case.mock.</code><code class="descname">pypy_version</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#pypy_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.pypy_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock <code class="xref py py-data docutils literal"><span class="pre">sys.pypy_version_info</span></code></p>
<p>Decorator example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">pypy_version</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Context example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">pypy_version</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)):</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.platform_pyimp">
<code class="descclassname">case.mock.</code><code class="descname">platform_pyimp</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#platform_pyimp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.platform_pyimp" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock <code class="xref py py-data docutils literal"><span class="pre">platform.python_implementation</span></code></p>
<p>Decorator example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">platform_pyimp</span><span class="p">(</span><span class="s1">&#39;PyPy&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Context example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">platform_pyimp</span><span class="p">(</span><span class="s1">&#39;PyPy&#39;</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.sys_platform">
<code class="descclassname">case.mock.</code><code class="descname">sys_platform</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#sys_platform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.sys_platform" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock <a class="reference external" href="http://docs.python.org/dev/library/sys.html#sys.platform" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">sys.platform</span></code></a></p>
<p>Decorator example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">sys_platform</span><span class="p">(</span><span class="s1">&#39;darwin&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Context example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">sys_platform</span><span class="p">(</span><span class="s1">&#39;darwin&#39;</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.reset_modules">
<code class="descclassname">case.mock.</code><code class="descname">reset_modules</code><span class="sig-paren">(</span><em>*modules</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#reset_modules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.reset_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove modules from <a class="reference external" href="http://docs.python.org/dev/library/sys.html#sys.modules" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">sys.modules</span></code></a> by name,
and reset back again when the test/context returns.</p>
<p>Decorator example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">reset_modules</span><span class="p">(</span><span class="s1">&#39;celery.result&#39;</span><span class="p">,</span> <span class="s1">&#39;celery.app.base&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Context example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">reset_modules</span><span class="p">(</span><span class="s1">&#39;celery.result&#39;</span><span class="p">,</span> <span class="s1">&#39;celery.app.base&#39;</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.module">
<code class="descclassname">case.mock.</code><code class="descname">module</code><span class="sig-paren">(</span><em>*names</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#module"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.module" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock one or modules such that every attribute is a <a class="reference internal" href="#case.mock.Mock" title="case.mock.Mock"><code class="xref py py-class docutils literal"><span class="pre">Mock</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="case.mock.open">
<code class="descclassname">case.mock.</code><code class="descname">open</code><span class="sig-paren">(</span><em>typ=&lt;class 'case.utils.WhateverIO'&gt;</em>, <em>side_effect=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Patch builtins.open so that it returns StringIO object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>typ</strong> &#8211; File object for open to return.
Defaults to <code class="xref py py-class docutils literal"><span class="pre">WhateverIO</span></code> which is the bastard child
of <a class="reference external" href="http://docs.python.org/dev/library/io.html#io.StringIO" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">io.StringIO</span></code></a> and <a class="reference external" href="http://docs.python.org/dev/library/io.html#io.BytesIO" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">io.BytesIO</span></code></a> accepting
both bytes and unicode input.</li>
<li><strong>side_effect</strong> &#8211; Additional side effect for when the open context
is entered.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Decorator example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">open_fh</span><span class="p">):</span>
    <span class="n">something_opening_and_writing_a_file</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">open_fh</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
</pre></div>
</div>
<p>Context example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">)</span> <span class="k">as</span> <span class="n">open_fh</span><span class="p">:</span>
    <span class="n">something_opening_and_writing_bytes_to_a_file</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">b</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">open_fh</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.restore_logging">
<code class="descclassname">case.mock.</code><code class="descname">restore_logging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#restore_logging"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.restore_logging" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore root logger handlers after test returns.</p>
<p>Decorator example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">restore_logging</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">setup_logging</span><span class="p">()</span>
</pre></div>
</div>
<p>Context example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">restore_logging</span><span class="p">():</span>
    <span class="n">setup_logging</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="case.mock.module_exists">
<code class="descclassname">case.mock.</code><code class="descname">module_exists</code><span class="sig-paren">(</span><em>*modules</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/case/mock.html#module_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#case.mock.module_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Patch one or more modules to ensure they exist.</p>
<p>A module name with multiple paths (e.g. gevent.monkey) will
ensure all parent modules are also patched (<code class="docutils literal"><span class="pre">gevent</span></code> +
<code class="docutils literal"><span class="pre">gevent.monkey</span></code>).</p>
<p>Decorator example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mock</span><span class="o">.</span><span class="n">module_exists</span><span class="p">(</span><span class="s1">&#39;gevent.monkey&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Context example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">module_exists</span><span class="p">(</span><span class="s1">&#39;gevent.monkey&#39;</span><span class="p">):</span>
    <span class="n">gevent</span><span class="o">.</span><span class="n">monkey</span><span class="o">.</span><span class="n">patch_all</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;patch_all&#39;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="../index.html">
  <img class="logo" src="http://cloud.github.com/downloads/celery/celery/celery_128.png" alt="Logo"/>
</a></p>
<div id="donate">
    <b>Donations welcome:</b>
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
    ">
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
    </form>
</div>
  <h4>Previous topic</h4>
  <p class="topless"><a href="case.skip.html"
                        title="previous chapter">case.skip</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="case.utils.html"
                        title="next chapter">case.utils</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/case.mock.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="case.utils.html" title="case.utils"
             >next</a> |</li>
        <li class="right" >
          <a href="case.skip.html" title="case.skip"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">case 1.0.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >API Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Ask Solem.
    </div>
  </body>
</html>