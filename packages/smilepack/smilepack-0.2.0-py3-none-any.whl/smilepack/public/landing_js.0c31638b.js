!function(e){function t(i){if(s[i])return s[i].exports;var n=s[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var s={};return t.m=e,t.c=s,t.p="/assets/",t(0)}([function(e,t){"use strict";var s={element:document.getElementById("new-smiles"),available:!0,interval:6500,smiles:{},smileIds:[],mouseover:function(){this.available=!1},mouseout:function(){this.available=!0},shuffle:function(){this.available&&(this.element.style.opacity=0,setTimeout(this._shuffleEnd.bind(this),250))},_shuffleEnd:function(){for(;this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);for(var e,t,s=this.smileIds.length-1;s>=0;s--)t=Math.floor(Math.random()*(s+1)),e=this.smileIds[s],this.smileIds[s]=this.smileIds[t],this.smileIds[t]=e;for(var i=0;25>i&&i<this.smileIds.length;i++){var n=this.smiles[this.smileIds[i]];if(!n.dom){var l=document.createElement("a");l.href="/generate#"+n.smile.category[0];var h=document.createElement("img");h.src=n.smile.url,h.title=n.smile.category[1],n.smile.h<=120?(h.width=n.smile.w,h.height=n.smile.h):(h.width=Math.round(120*n.smile.w/n.smile.h),h.height=120),l.appendChild(h),n.dom=l}this.element.appendChild(n.dom)}this.element.style.opacity=1},fetch:function(e){var t=new XMLHttpRequest;t.open("GET","/smiles/new"),t.onreadystatechange=function(){if(4==t.readyState){if(0===t.status||t.status>=400)return void(e&&e(!1,t));var s;try{s=JSON.parse(t.responseText)}catch(i){console.error(i),e&&e(!1,t)}for(var n=0;n<s.smiles.length;n++){var l=s.smiles[n];this.smiles[l.id]||(this.smiles[l.id]={dom:null,smile:null}),this.smiles[l.id].smile=l,this.smileIds.push(l.id)}e&&e(!0,t)}}.bind(this),t.send(null)},fetchAndStart:function(){this.fetch(function(){this.start()}.bind(this))},init:function(e){this.element.addEventListener("mouseover",this.mouseover.bind(this)),this.element.addEventListener("mouseout",this.mouseout.bind(this)),e&&this.start()},start:function(){this.shuffle(),setInterval(this.shuffle.bind(this),this.interval)}};window.addEventListener("load",function(){s.element&&(s.init(),setTimeout(function(){s.fetchAndStart()},3500))})}]);