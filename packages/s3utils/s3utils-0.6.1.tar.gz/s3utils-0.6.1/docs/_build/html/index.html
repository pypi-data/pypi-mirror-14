<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to S3utils’s documentation! &mdash; S3Utils 0.6.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="S3Utils 0.6.0 documentation" href="#" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-s3utils-s-documentation">
<h1>Welcome to S3utils&#8217;s documentation!<a class="headerlink" href="#welcome-to-s3utils-s-documentation" title="Permalink to this headline">¶</a></h1>
<p><strong>S3utils is a simple interface for dealing with Amazon S3</strong></p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Install from PyPi:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">s3utils</span>
</pre></div>
</div>
<p>Python 2.7, 3.3, 3.4, 3.5 are supported.</p>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<div class="section" id="normal-setup">
<h3>Normal Setup<a class="headerlink" href="#normal-setup" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">s3utils</span> <span class="k">import</span> <span class="n">S3utils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span> <span class="o">=</span> <span class="n">S3utils</span><span class="p">(</span>
<span class="gp">... </span><span class="n">AWS_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s1">&#39;your access key&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">AWS_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s1">&#39;your secret key&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">AWS_STORAGE_BUCKET_NAME</span> <span class="o">=</span> <span class="s1">&#39;your bucket name&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">S3UTILS_DEBUG_LEVEL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1">#change it to 0 for less verbose</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>or if you are using Django, simply:</p>
</div>
<div class="section" id="django-setup">
<h3>Django Setup<a class="headerlink" href="#django-setup" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S3UTILS_DEBUG_LEVEL</span><span class="o">=</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AWS_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s1">&#39;your access key&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AWS_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s1">&#39;your secret key&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AWS_STORAGE_BUCKET_NAME</span> <span class="o">=</span> <span class="s1">&#39;your bucket name&#39;</span>
</pre></div>
</div>
<dl class="docutils">
<dt>And in your code:</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">s3utils</span> <span class="k">import</span> <span class="n">S3utils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span> <span class="o">=</span> <span class="n">S3utils</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>If you want to overwrite your bucket name in your code from what it is in the Django settings:</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">s3utils</span> <span class="k">import</span> <span class="n">S3utils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span> <span class="o">=</span> <span class="n">S3utils</span><span class="p">(</span><span class="n">AWS_STORAGE_BUCKET_NAME</span><span class="o">=</span><span class="s1">&#39;some other bucket&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</div>
</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<p>The commands are made to be similar to Linux file commands:</p>
<p>cp, mv, chmod, ls, ll, echo, mkdir, rm</p>
<p>There are some Cloudfront specific commands too:</p>
<p>invalidate</p>
</div>
<div class="section" id="s3utils-0-6-0">
<h2>S3utils 0.6.0<a class="headerlink" href="#s3utils-0-6-0" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<span class="target" id="module-s3utils"></span><dl class="class">
<dt id="s3utils.S3utils">
<em class="property">class </em><code class="descclassname">s3utils.</code><code class="descname">S3utils</code><span class="sig-paren">(</span><em>AWS_ACCESS_KEY_ID=''</em>, <em>AWS_SECRET_ACCESS_KEY=''</em>, <em>AWS_STORAGE_BUCKET_NAME=''</em>, <em>S3UTILS_DEBUG_LEVEL=0</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils" title="Permalink to this definition">¶</a></dt>
<dd><p>S3 Utils</p>
<p>A simple user friendly interface to Amazon S3.
S3 utils methods are made similar to Linux commands
so it is easier to use/remember for simple file operations
on S3 buckets.</p>
<dl class="method">
<dt id="s3utils.S3utils.chmod">
<code class="descname">chmod</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.chmod" title="Permalink to this definition">¶</a></dt>
<dd><p>sets permissions for a file on S3</p>
<dl class="docutils">
<dt>target_file</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string</span><dd>Path to file on S3</dd>
<dt>acl</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span><dd><p class="first">File permissions on S3. Default is public-read</p>
<dl class="last docutils">
<dt>options:</dt>
<dd><ul class="first last simple">
<li>private: Owner gets FULL_CONTROL. No one else has any access rights.</li>
<li>public-read: Owners gets FULL_CONTROL and the anonymous principal is granted READ access.</li>
<li>public-read-write: Owner gets FULL_CONTROL and the anonymous principal is granted READ and WRITE access.</li>
<li>authenticated-read: Owner gets FULL_CONTROL and any principal authenticated as a registered Amazon S3 user is granted READ access</li>
</ul>
</dd>
</dl>
</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="s2">&quot;path/to/file&quot;</span><span class="p">,</span><span class="s2">&quot;private&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish the connection. This is done automatically for you.</p>
<p>If you lose the connection, you can manually run this to be re-connected.</p>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.connect_cloudfront">
<code class="descname">connect_cloudfront</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.connect_cloudfront" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to Cloud Front. This is done automatically for you when needed.</p>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.cp">
<code class="descname">cp</code><span class="sig-paren">(</span><em>local_path</em>, <em>target_path</em>, <em>acl='public-read'</em>, <em>del_after_upload=False</em>, <em>overwrite=True</em>, <em>invalidate=False</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.cp" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a file or folder from local to s3.</p>
<dl class="docutils">
<dt>local_path</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string</span><dd>Path to file or folder. Or if you want to copy only the contents of folder, add /* at the end of folder name</dd>
<dt>target_path</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string</span><dd>Target path on S3 bucket.</dd>
<dt>acl</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span><dd><p class="first">File permissions on S3. Default is public-read</p>
<dl class="last docutils">
<dt>options:</dt>
<dd><ul class="first last simple">
<li>private: Owner gets FULL_CONTROL. No one else has any access rights.</li>
<li>public-read: Owners gets FULL_CONTROL and the anonymous principal is granted READ access.</li>
<li>public-read-write: Owner gets FULL_CONTROL and the anonymous principal is granted READ and WRITE access.</li>
<li>authenticated-read: Owner gets FULL_CONTROL and any principal authenticated as a registered Amazon S3 user is granted READ access</li>
</ul>
</dd>
</dl>
</dd>
<dt>del_after_upload</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span><dd>delete the local file after uploading. This is effectively like moving the file.
You can use s3utils.mv instead of s3utils.cp to move files from local to S3.
It basically sets this flag to True.
default = False</dd>
<dt>overwrite</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span><dd>overwrites files on S3 if set to True. Default is True</dd>
<dt>invalidate</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span><dd>invalidates the CDN (a.k.a Distribution) cache if the file already exists on S3
default = False
Note that invalidation might take up to 15 minutes to take place. It is easier and faster to use cache buster
to grab lastest version of your file on CDN than invalidation.</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span><span class="o">.</span><span class="n">cp</span><span class="p">(</span><span class="s2">&quot;path/to/folder&quot;</span><span class="p">,</span><span class="s2">&quot;/test/&quot;</span><span class="p">)</span>
<span class="go">copying /path/to/myfolder/test2.txt to test/myfolder/test2.txt</span>
<span class="go">copying /path/to/myfolder/test.txt to test/myfolder/test.txt</span>
<span class="go">copying /path/to/myfolder/hoho/photo.JPG to test/myfolder/hoho/photo.JPG</span>
<span class="go">copying /path/to/myfolder/hoho/haha/ff to test/myfolder/hoho/haha/ff</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># When overwrite is set to False:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span><span class="o">.</span><span class="n">cp</span><span class="p">(</span><span class="s2">&quot;path/to/folder&quot;</span><span class="p">,</span><span class="s2">&quot;/test/&quot;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">test/myfolder/test2.txt already exist. Not overwriting.</span>
<span class="go">test/myfolder/test.txt already exist. Not overwriting.</span>
<span class="go">test/myfolder/hoho/photo.JPG already exist. Not overwriting.</span>
<span class="go">test/myfolder/hoho/haha/ff already exist. Not overwriting.</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># To overwrite the files on S3 and invalidate the CDN (cloudfront) cache so the new file goes on CDN:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span><span class="o">.</span><span class="n">cp</span><span class="p">(</span><span class="s2">&quot;path/to/folder&quot;</span><span class="p">,</span><span class="s2">&quot;/test/&quot;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">invalidate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">copying /path/to/myfolder/test2.txt to test/myfolder/test2.txt</span>
<span class="go">copying /path/to/myfolder/test.txt to test/myfolder/test.txt</span>
<span class="go">copying /path/to/myfolder/hoho/photo.JPG to test/myfolder/hoho/photo.JPG</span>
<span class="go">copying /path/to/myfolder/hoho/haha/ff to test/myfolder/hoho/haha/ff</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.cp_cropduster_image">
<code class="descname">cp_cropduster_image</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.cp_cropduster_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Deal with saving cropduster images to S3. Cropduster is a Django library for resizing editorial images.
S3utils was originally written to put cropduster images on S3 bucket.</p>
<dl class="docutils">
<dt>MEDIA_ROOT</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string</span><dd>Django media root.
Currently it is ONLY used in cp_cropduster_image method.
NOT any other method as this library was originally made to put Django cropduster images on s3 bucket.</dd>
<dt>S3_ROOT_BASE</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string</span><dd>S3 media root base. This will be the root folder in S3.
Currently it is ONLY used in cp_cropduster_image method.
NOT any other method as this library was originally made to put Django cropduster images on s3 bucket.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.disconnect">
<code class="descname">disconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the connection.</p>
<p>This is normally done automatically when the garbage collector is deleting s3utils object.</p>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.echo">
<code class="descname">echo</code><span class="sig-paren">(</span><em>content</em>, <em>target_path</em>, <em>acl='public-read'</em>, <em>del_after_upload=False</em>, <em>overwrite=True</em>, <em>invalidate=False</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.echo" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to Linux Echo command.</p>
<p>Puts the string into the target path on s3</p>
<dl class="docutils">
<dt>content</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string</span><dd>The content to be put on the s3 bucket.</dd>
<dt>target_path</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string</span><dd>Target path on S3 bucket.</dd>
<dt>acl</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span><dd><p class="first">File permissions on S3. Default is public-read</p>
<dl class="last docutils">
<dt>options:</dt>
<dd><ul class="first last simple">
<li>private: Owner gets FULL_CONTROL. No one else has any access rights.</li>
<li>public-read: Owners gets FULL_CONTROL and the anonymous principal is granted READ access.</li>
<li>public-read-write: Owner gets FULL_CONTROL and the anonymous principal is granted READ and WRITE access.</li>
<li>authenticated-read: Owner gets FULL_CONTROL and any principal authenticated as a registered Amazon S3 user is granted READ access</li>
</ul>
</dd>
</dl>
</dd>
<dt>overwrite</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span><dd>overwrites files on S3 if set to True. Default is True</dd>
<dt>invalidate</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span><dd>invalidates the CDN (a.k.a Distribution) cache if the file already exists on S3
default = False
Note that invalidation might take up to 15 minutes to take place. It is easier and faster to use cache buster
to serve the lastest version of your file on CDN than invalidation.</dd>
</dl>
<p><strong>Returns:</strong></p>
<p>Nothing on success, otherwise what went wrong.</p>
<p>Return type:
dict</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># On success returns nothing:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">,</span><span class="s2">&quot;/test.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># On failure returns what went wrong</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">,</span><span class="s2">&quot;/test/&quot;</span><span class="p">)</span>
<span class="go">{&#39;InvalidS3Path&#39;: &quot;path on S3 can not end in /&quot;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.invalidate">
<code class="descname">invalidate</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidate the CDN (distribution) cache for a certain file of files. This might take up to 15 minutes to be effective.</p>
<p>You can check for the invalidation status using check_invalidation_request.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">s3utils</span> <span class="k">import</span> <span class="n">S3utils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span> <span class="o">=</span> <span class="n">S3utils</span><span class="p">(</span>
<span class="gp">... </span><span class="n">AWS_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s1">&#39;your access key&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">AWS_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s1">&#39;your secret key&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">AWS_STORAGE_BUCKET_NAME</span> <span class="o">=</span> <span class="s1">&#39;your bucket name&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">S3UTILS_DEBUG_LEVEL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1">#change it to 0 for less verbose</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aa</span> <span class="o">=</span> <span class="n">s3utils</span><span class="o">.</span><span class="n">invalidate</span><span class="p">(</span><span class="s2">&quot;test/myfolder/hoho/photo.JPG&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">aa</span><span class="p">)</span>
<span class="go">(&#39;your distro id&#39;, u&#39;your request id&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">invalidation_request_id</span> <span class="o">=</span> <span class="n">aa</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bb</span> <span class="o">=</span> <span class="n">s3utils</span><span class="o">.</span><span class="n">check_invalidation_request</span><span class="p">(</span><span class="o">*</span><span class="n">aa</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">inval</span> <span class="ow">in</span> <span class="n">bb</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Object: </span><span class="si">%s</span><span class="s1">, ID: </span><span class="si">%s</span><span class="s1">, Status: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inval</span><span class="p">,</span> <span class="n">inval</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">inval</span><span class="o">.</span><span class="n">status</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.ll">
<code class="descname">ll</code><span class="sig-paren">(</span><em>folder=''</em>, <em>begin_from_file=''</em>, <em>num=-1</em>, <em>all_grant_data=False</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.ll" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of files and permissions from S3.</p>
<p>This is similar to LL (ls -lah) in Linux: List of files with permissions.</p>
<dl class="docutils">
<dt>folder</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string</span><dd>Path to file on S3</dd>
<dt>num: integer, optional</dt>
<dd>number of results to return, by default it returns all results.</dd>
<dt>begin_from_file</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span><dd>which file to start from on S3.
This is usedful in case you are iterating over lists of files and you need to page the result by
starting listing from a certain file and fetching certain num (number) of files.</dd>
<dt>all_grant_data</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">Boolean, optional</span><dd>More detailed file permission data will be returned.</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">s3utils</span> <span class="k">import</span> <span class="n">S3utils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span> <span class="o">=</span> <span class="n">S3utils</span><span class="p">(</span>
<span class="gp">... </span><span class="n">AWS_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s1">&#39;your access key&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">AWS_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s1">&#39;your secret key&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">AWS_STORAGE_BUCKET_NAME</span> <span class="o">=</span> <span class="s1">&#39;your bucket name&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">S3UTILS_DEBUG_LEVEL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1">#change it to 0 for less verbose</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># We use json.dumps to print the results more readable:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_folder_stuff</span> <span class="o">=</span> <span class="n">s3utils</span><span class="o">.</span><span class="n">ll</span><span class="p">(</span><span class="s2">&quot;/test/&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">my_folder_stuff</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="go">{</span>
<span class="go">  &quot;test/myfolder/&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;name&quot;: &quot;owner&#39;s name&quot;,</span>
<span class="go">      &quot;permission&quot;: &quot;FULL_CONTROL&quot;</span>
<span class="go">    }</span>
<span class="go">  ],</span>
<span class="go">  &quot;test/myfolder/em/&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;name&quot;: &quot;owner&#39;s name&quot;,</span>
<span class="go">      &quot;permission&quot;: &quot;FULL_CONTROL&quot;</span>
<span class="go">    }</span>
<span class="go">  ],</span>
<span class="go">  &quot;test/myfolder/hoho/&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;name&quot;: &quot;owner&#39;s name&quot;,</span>
<span class="go">      &quot;permission&quot;: &quot;FULL_CONTROL&quot;</span>
<span class="go">    }</span>
<span class="go">  ],</span>
<span class="go">  &quot;test/myfolder/hoho/.DS_Store&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;name&quot;: &quot;owner&#39;s name&quot;,</span>
<span class="go">      &quot;permission&quot;: &quot;FULL_CONTROL&quot;</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">      &quot;name&quot;: null,</span>
<span class="go">      &quot;permission&quot;: &quot;READ&quot;</span>
<span class="go">    }</span>
<span class="go">  ],</span>
<span class="go">  &quot;test/myfolder/hoho/haha/&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;name&quot;: &quot;owner&#39;s name&quot;,</span>
<span class="go">      &quot;permission&quot;: &quot;FULL_CONTROL&quot;</span>
<span class="go">    }</span>
<span class="go">  ],</span>
<span class="go">  &quot;test/myfolder/hoho/haha/ff&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;name&quot;: &quot;owner&#39;s name&quot;,</span>
<span class="go">      &quot;permission&quot;: &quot;FULL_CONTROL&quot;</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">      &quot;name&quot;: null,</span>
<span class="go">      &quot;permission&quot;: &quot;READ&quot;</span>
<span class="go">    }</span>
<span class="go">  ],</span>
<span class="go">  &quot;test/myfolder/hoho/photo.JPG&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;name&quot;: &quot;owner&#39;s name&quot;,</span>
<span class="go">      &quot;permission&quot;: &quot;FULL_CONTROL&quot;</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">      &quot;name&quot;: null,</span>
<span class="go">      &quot;permission&quot;: &quot;READ&quot;</span>
<span class="go">    }</span>
<span class="go">  ],</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.ls">
<code class="descname">ls</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.ls" title="Permalink to this definition">¶</a></dt>
<dd><p>gets the list of file names (keys) in a s3 folder</p>
<dl class="docutils">
<dt>folder</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string</span><dd>Path to file on S3</dd>
<dt>num: integer, optional</dt>
<dd>number of results to return, by default it returns all results.</dd>
<dt>begin_from_file: string, optional</dt>
<dd>which file to start from on S3.
This is usedful in case you are iterating over lists of files and you need to page the result by
starting listing from a certain file and fetching certain num (number) of files.</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">s3utils</span> <span class="k">import</span> <span class="n">S3utils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span> <span class="o">=</span> <span class="n">S3utils</span><span class="p">(</span>
<span class="gp">... </span><span class="n">AWS_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s1">&#39;your access key&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">AWS_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s1">&#39;your secret key&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">AWS_STORAGE_BUCKET_NAME</span> <span class="o">=</span> <span class="s1">&#39;your bucket name&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">S3UTILS_DEBUG_LEVEL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1">#change it to 0 for less verbose</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">s3utils</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s2">&quot;test/&quot;</span><span class="p">))</span>
<span class="go">{u&#39;test/myfolder/&#39;, u&#39;test/myfolder/em/&#39;, u&#39;test/myfolder/hoho/&#39;, u&#39;test/myfolder/hoho/.DS_Store&#39;, u&#39;test/myfolder/hoho/haha/&#39;, u&#39;test/myfolder/hoho/haha/ff&#39;, u&#39;test/myfolder/hoho/haha/photo.JPG&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.mkdir">
<code class="descname">mkdir</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a folder on S3.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s2">&quot;path/to/my_folder&quot;</span><span class="p">)</span>
<span class="go">Making directory: path/to/my_folder</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.mv">
<code class="descname">mv</code><span class="sig-paren">(</span><em>local_file</em>, <em>target_file</em>, <em>acl='public-read'</em>, <em>overwrite=True</em>, <em>invalidate=False</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.mv" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to Linux mv command.</p>
<p>Move the file to the S3 and deletes the local copy</p>
<p>It is basically s3utils.cp that has del_after_upload=True</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span><span class="o">.</span><span class="n">mv</span><span class="p">(</span><span class="s2">&quot;path/to/folder&quot;</span><span class="p">,</span><span class="s2">&quot;/test/&quot;</span><span class="p">)</span>
<span class="go">moving /path/to/myfolder/test2.txt to test/myfolder/test2.txt</span>
<span class="go">moving /path/to/myfolder/test.txt to test/myfolder/test.txt</span>
<span class="go">moving /path/to/myfolder/hoho/photo.JPG to test/myfolder/hoho/photo.JPG</span>
<span class="go">moving /path/to/myfolder/hoho/haha/ff to test/myfolder/hoho/haha/ff</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="s3utils.S3utils.rm">
<code class="descname">rm</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#s3utils.S3utils.rm" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the path and anything under the path.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s3utils</span><span class="o">.</span><span class="n">rm</span><span class="p">(</span><span class="s2">&quot;path/to/file_or_folder&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>
<div class="section" id="author">
<h1>Author<a class="headerlink" href="#author" title="Permalink to this headline">¶</a></h1>
<p>Seperman (Sep Ehr)</p>
<ul class="simple">
<li><a class="reference external" href="http://zepworks.com">Zepworks</a></li>
<li><a class="reference external" href="https://github.com/seperman">Github</a></li>
<li><a class="reference external" href="http://www.linkedin.com/in/sepehr">Linkedin</a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to S3utils&#8217;s documentation!</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#setup">Setup</a><ul>
<li><a class="reference internal" href="#normal-setup">Normal Setup</a></li>
<li><a class="reference internal" href="#django-setup">Django Setup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#commands">Commands</a></li>
<li><a class="reference internal" href="#s3utils-0-6-0">S3utils 0.6.0</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
<li><a class="reference internal" href="#author">Author</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2013-2016, Sep Ehr (Seperman).
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="_sources/index.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>