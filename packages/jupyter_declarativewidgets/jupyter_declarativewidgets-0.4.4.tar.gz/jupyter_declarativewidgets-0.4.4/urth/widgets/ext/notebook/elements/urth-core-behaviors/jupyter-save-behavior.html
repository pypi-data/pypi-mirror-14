<!--
# Copyright (c) Jupyter Development Team.
# Distributed under the terms of the Modified BSD License.
-->

<script>
    'use strict';
    (function() {
        var SAVE_EVENT = 'before_save.Notebook';
        window.Urth = window.Urth || {};

        /**
         * Behavior that provides registration with the save event. Elements
         * that implement this behavior must implement the `onSave` method to
         * define the element specific save procedure.
         *
         * @group Urth Core
         * @polymerBehavior Urth.JupyterSaveBehavior
         */
        Urth.JupyterSaveBehavior = {
            created: function(event, callback) {
                if (window.IPython && window.IPython.notebook && window.IPython.notebook.events) {
                    this.__saveCallback = this.onSave.bind(this);
                    IPython.notebook.events.on(SAVE_EVENT, this.__saveCallback);
                }
            },

            detached: function(event, callback) {
                if (this.__saveCallback) {
                    IPython.notebook.events.off(SAVE_EVENT, this.__saveCallback);
                }
            },

            /**
             * Element specific handler for the save event.
             *
             * @method onSave
             */
            onSave: function() {}
        };
    })();
</script>
