{"body": "<div class=\"section\" id=\"running-behind-reverse-proxy\">\n<span id=\"reverse-proxy\"></span><h1>Running behind reverse proxy<a class=\"headerlink\" href=\"#running-behind-reverse-proxy\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>To run <cite>Flower</cite> behind a reverse proxy, remember to set the correct <cite>Host</cite>\nheader to the request to make sure Flower can generate correct URLs.\nThe following is a minimal <cite>nginx</cite> configuration:</p>\n<div class=\"highlight-nginx\"><div class=\"highlight\"><pre><span></span><span class=\"k\">server</span> <span class=\"p\">{</span>\n    <span class=\"kn\">listen</span> <span class=\"mi\">80</span><span class=\"p\">;</span>\n    <span class=\"kn\">server_name</span> <span class=\"s\">flower.example.com</span><span class=\"p\">;</span>\n    <span class=\"kn\">charset</span> <span class=\"s\">utf-8</span><span class=\"p\">;</span>\n\n    <span class=\"kn\">location</span> <span class=\"s\">/</span> <span class=\"p\">{</span>\n        <span class=\"kn\">proxy_pass</span> <span class=\"s\">http://localhost:5555</span><span class=\"p\">;</span>\n        <span class=\"kn\">proxy_set_header</span> <span class=\"s\">Host</span> <span class=\"nv\">$host</span><span class=\"p\">;</span>\n        <span class=\"kn\">proxy_redirect</span> <span class=\"no\">off</span><span class=\"p\">;</span>\n        <span class=\"kn\">proxy_http_version</span> <span class=\"mi\">1</span><span class=\"s\">.1</span><span class=\"p\">;</span>\n        <span class=\"kn\">proxy_set_header</span> <span class=\"s\">Upgrade</span> <span class=\"nv\">$http_upgrade</span><span class=\"p\">;</span>\n        <span class=\"kn\">proxy_set_header</span> <span class=\"s\">Connection</span> <span class=\"s\">&quot;upgrade&quot;</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n<p>Note that you should not expose this site to the public internet without\nany sort of authentication! If you have a <cite>htpasswd</cite> file with user\ncredentials you can make <cite>nginx</cite> use this file by adding the following\nlines to the location block:</p>\n<div class=\"highlight-nginx\"><div class=\"highlight\"><pre><span></span><span class=\"k\">auth_basic</span> <span class=\"s\">&quot;Restricted&quot;</span><span class=\"p\">;</span>\n<span class=\"k\">auth_basic_user_file</span> <span class=\"s\">htpasswd</span><span class=\"p\">;</span>\n</pre></div>\n</div>\n</div>\n", "alabaster_version": "0.7.7", "display_toc": false, "title": "Running behind reverse proxy", "sourcename": "reverse-proxy.txt", "customsidebar": null, "metatags": "", "current_page_name": "reverse-proxy", "next": {"link": "../docker/", "title": "Docker Usage"}, "rellinks": [["docker", "Docker Usage", "N", "next"], ["auth", "Authentication", "P", "previous"]], "meta": {}, "parents": [], "sidebars": ["sidebarlogo.html", "localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Running behind reverse proxy</a></li>\n</ul>\n", "prev": {"link": "../auth/", "title": "Authentication"}, "page_source_suffix": ".rst"}