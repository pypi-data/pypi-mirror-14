{"body": "<div class=\"section\" id=\"configuration\">\n<h1>Configuration<a class=\"headerlink\" href=\"#configuration\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>Flower can be configured from the command line:</p>\n<div class=\"highlight-python3\"><div class=\"highlight\"><pre><span></span>$ flower --auto_refresh=False\n</pre></div>\n</div>\n<p>Using <code class=\"file docutils literal\"><span class=\"pre\">flowerconfig.py</span></code> configuration file:</p>\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># RabbitMQ management api</span>\n<span class=\"n\">broker_api</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;http://guest:guest@localhost:15672/api/&#39;</span>\n\n<span class=\"c1\"># Enable debug logging</span>\n<span class=\"n\">logging</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;DEBUG&#39;</span>\n</pre></div>\n</div>\n<p>Or, using the environment variables. All flower options should be\nprefixed with <cite>FLOWER_</cite>:</p>\n<div class=\"highlight-python3\"><div class=\"highlight\"><pre><span></span>$ export FLOWER_BASIC_AUTH=foo:bar\n</pre></div>\n</div>\n<p>Options passed through the command line have precedence over the options\ndefined in the configuration file. The configuration file name and path\ncan be changed with <a class=\"reference internal\" href=\"#conf\">conf</a> option.</p>\n<div class=\"highlight-python3\"><div class=\"highlight\"><pre><span></span>$ flower --conf=celeryconfig.py\n</pre></div>\n</div>\n<div class=\"section\" id=\"options\">\n<h2>Options<a class=\"headerlink\" href=\"#options\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Standard Celery configuration settings can be overridden in the configuration\nfile. See <a class=\"reference external\" href=\"http://docs.celeryproject.org/en/latest/configuration.html#configuration\">Celery Configuration reference</a> for a complete listing of all\nthe available settings, and their default values.</p>\n<p>Celery command line options also can be passed to Flower. For example\nthe <cite>&#8211;broker</cite> sets the default broker URL:</p>\n<div class=\"highlight-python3\"><div class=\"highlight\"><pre><span></span>$ flower -A proj --broker=amqp://guest:guest@localhost:5672//\n</pre></div>\n</div>\n<p>For a full list of options see:</p>\n<div class=\"highlight-python3\"><div class=\"highlight\"><pre><span></span>$ celery --help\n</pre></div>\n</div>\n<div class=\"contents local topic\" id=\"contents\">\n<ul class=\"simple\">\n<li><a class=\"reference internal\" href=\"#address\" id=\"id28\">address</a></li>\n<li><a class=\"reference internal\" href=\"#auth\" id=\"id29\">auth</a></li>\n<li><a class=\"reference internal\" href=\"#auto-refresh\" id=\"id30\">auto_refresh</a></li>\n<li><a class=\"reference internal\" href=\"#basic-auth\" id=\"id31\">basic_auth</a></li>\n<li><a class=\"reference internal\" href=\"#broker-api\" id=\"id32\">broker_api</a></li>\n<li><a class=\"reference internal\" href=\"#ca-certs\" id=\"id33\">ca_certs</a></li>\n<li><a class=\"reference internal\" href=\"#certfile\" id=\"id34\">certfile</a></li>\n<li><a class=\"reference internal\" href=\"#conf\" id=\"id35\">conf</a></li>\n<li><a class=\"reference internal\" href=\"#db\" id=\"id36\">db</a></li>\n<li><a class=\"reference internal\" href=\"#debug\" id=\"id37\">debug</a></li>\n<li><a class=\"reference internal\" href=\"#enable-events\" id=\"id38\">enable_events</a></li>\n<li><a class=\"reference internal\" href=\"#format-task\" id=\"id39\">format_task</a></li>\n<li><a class=\"reference internal\" href=\"#inspect-timeout\" id=\"id40\">inspect_timeout</a></li>\n<li><a class=\"reference internal\" href=\"#keyfile\" id=\"id41\">keyfile</a></li>\n<li><a class=\"reference internal\" href=\"#max-workers\" id=\"id42\">max_workers</a></li>\n<li><a class=\"reference internal\" href=\"#max-tasks\" id=\"id43\">max_tasks</a></li>\n<li><a class=\"reference internal\" href=\"#natural-time\" id=\"id44\">natural_time</a></li>\n<li><a class=\"reference internal\" href=\"#persistent\" id=\"id45\">persistent</a></li>\n<li><a class=\"reference internal\" href=\"#port\" id=\"id46\">port</a></li>\n<li><a class=\"reference internal\" href=\"#xheaders\" id=\"id47\">xheaders</a></li>\n<li><a class=\"reference internal\" href=\"#tasks-columns\" id=\"id48\">tasks_columns</a></li>\n<li><a class=\"reference internal\" href=\"#url-prefix\" id=\"id49\">url_prefix</a></li>\n<li><a class=\"reference internal\" href=\"#unix-socket\" id=\"id50\">unix_socket</a></li>\n<li><a class=\"reference internal\" href=\"#cookie-secret\" id=\"id51\">cookie_secret</a></li>\n<li><a class=\"reference internal\" href=\"#auth-provider\" id=\"id52\">auth_provider</a></li>\n</ul>\n</div>\n<div class=\"section\" id=\"address\">\n<span id=\"id1\"></span><h3><a class=\"toc-backref\" href=\"#id28\">address</a><a class=\"headerlink\" href=\"#address\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Run the http server on a given address</p>\n</div>\n<div class=\"section\" id=\"auth\">\n<span id=\"id2\"></span><h3><a class=\"toc-backref\" href=\"#id29\">auth</a><a class=\"headerlink\" href=\"#auth\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Enables Google OpenID authentication. <cite>auth</cite> is a regexp of emails\nto grant access. For more info see <span class=\"xref std std-ref\">google-openid</span></p>\n</div>\n<div class=\"section\" id=\"auto-refresh\">\n<span id=\"id3\"></span><h3><a class=\"toc-backref\" href=\"#id30\">auto_refresh</a><a class=\"headerlink\" href=\"#auto-refresh\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Refresh dashboards automatically (by default, <cite>auto_refresh=True</cite>)</p>\n</div>\n<div class=\"section\" id=\"basic-auth\">\n<span id=\"id4\"></span><h3><a class=\"toc-backref\" href=\"#id31\">basic_auth</a><a class=\"headerlink\" href=\"#basic-auth\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Enables HTTP Basic authentication. <cite>basic_auth</cite> is a comma separated list\nof <cite>username:passworrd</cite>. See <a class=\"reference internal\" href=\"../auth/#basic-auth\"><span class=\"std std-ref\">HTTP Basic Authentication</span></a> for more info.</p>\n</div>\n<div class=\"section\" id=\"broker-api\">\n<span id=\"id5\"></span><h3><a class=\"toc-backref\" href=\"#id32\">broker_api</a><a class=\"headerlink\" href=\"#broker-api\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Flower uses <a class=\"reference external\" href=\"https://www.rabbitmq.com/management.html\">RabbitMQ Managment Plugin</a> to get info about queues.\n<cite>broker_api</cite> is a URL of RabbitMQ HTTP API including user credentials.</p>\n<div class=\"highlight-python3\"><div class=\"highlight\"><pre><span></span>$ flower -A proj --broker_api=http://username:password@rabbitmq-server-name:15672/api/\n</pre></div>\n</div>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p>By default the managment plugin is not enabled. To enable it run:</p>\n<div class=\"last highlight-python3\"><div class=\"highlight\"><pre><span></span>$ rabbitmq-plugins enable rabbitmq_management\n</pre></div>\n</div>\n</div>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">The port number for RabbitMQ versions prior to 3.0 is 55672.</p>\n</div>\n</div>\n<div class=\"section\" id=\"ca-certs\">\n<span id=\"id6\"></span><h3><a class=\"toc-backref\" href=\"#id33\">ca_certs</a><a class=\"headerlink\" href=\"#ca-certs\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>A path to <cite>ca_certs</cite> file. The <cite>ca_certs</cite> file contains a set of concatenated \u201ccertification authority\u201d\ncertificates, which are used to validate certificates passed from the other end of the connection.\nFor more info see <a href=\"#id7\"><span class=\"problematic\" id=\"id8\">:ref:`Python SSL`_</span></a></p>\n</div>\n<div class=\"section\" id=\"certfile\">\n<span id=\"id9\"></span><h3><a class=\"toc-backref\" href=\"#id34\">certfile</a><a class=\"headerlink\" href=\"#certfile\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>A path to SSL certificate file</p>\n</div>\n<div class=\"section\" id=\"conf\">\n<span id=\"id10\"></span><h3><a class=\"toc-backref\" href=\"#id35\">conf</a><a class=\"headerlink\" href=\"#conf\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>A path to the configuration file (by default, <code class=\"file docutils literal\"><span class=\"pre\">flowerconfig.py</span></code>)</p>\n</div>\n<div class=\"section\" id=\"db\">\n<span id=\"id11\"></span><h3><a class=\"toc-backref\" href=\"#id36\">db</a><a class=\"headerlink\" href=\"#db\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>A database file to use if persistent mode is enabled\n(by default, <cite>db=flower</cite>)</p>\n</div>\n<div class=\"section\" id=\"debug\">\n<span id=\"id12\"></span><h3><a class=\"toc-backref\" href=\"#id37\">debug</a><a class=\"headerlink\" href=\"#debug\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Enable the debug mode (by default, <cite>debug=False</cite>)</p>\n</div>\n<div class=\"section\" id=\"enable-events\">\n<span id=\"id13\"></span><h3><a class=\"toc-backref\" href=\"#id38\">enable_events</a><a class=\"headerlink\" href=\"#enable-events\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Periodically enable Celery events by using <cite>enable_events</cite> command\n(by default, <cite>enable_event=True</cite>)</p>\n</div>\n<div class=\"section\" id=\"format-task\">\n<span id=\"id14\"></span><h3><a class=\"toc-backref\" href=\"#id39\">format_task</a><a class=\"headerlink\" href=\"#format-task\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Modifies the default task formatting. <cite>format_task</cite> function should be\ndefined in the <cite>flowerconfig.py</cite> configuration file. It accepts a task\nobject and returns the modified version.</p>\n<p><cite>format_task</cite> is useful for filtering out sensitive information.</p>\n<p>The example below shows how to filter arguments and limit display lengths:</p>\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">flower.utils.template</span> <span class=\"kn\">import</span> <span class=\"n\">humanize</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">format_task</span><span class=\"p\">(</span><span class=\"n\">task</span><span class=\"p\">):</span>\n    <span class=\"n\">task</span><span class=\"o\">.</span><span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"n\">humanize</span><span class=\"p\">(</span><span class=\"n\">task</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">length</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n    <span class=\"n\">task</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s1\">&#39;credit_card_number&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">task</span><span class=\"o\">.</span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">humanize</span><span class=\"p\">(</span><span class=\"n\">task</span><span class=\"o\">.</span><span class=\"n\">result</span><span class=\"p\">,</span> <span class=\"n\">length</span><span class=\"o\">=</span><span class=\"mi\">20</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">task</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"inspect-timeout\">\n<span id=\"id15\"></span><h3><a class=\"toc-backref\" href=\"#id40\">inspect_timeout</a><a class=\"headerlink\" href=\"#inspect-timeout\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Sets worker inspect timeout (by default, <cite>inspect_timeout=10000</cite>\nin milliseconds)</p>\n</div>\n<div class=\"section\" id=\"keyfile\">\n<span id=\"id16\"></span><h3><a class=\"toc-backref\" href=\"#id41\">keyfile</a><a class=\"headerlink\" href=\"#keyfile\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>A path to SSL key file</p>\n</div>\n<div class=\"section\" id=\"max-workers\">\n<span id=\"id17\"></span><h3><a class=\"toc-backref\" href=\"#id42\">max_workers</a><a class=\"headerlink\" href=\"#max-workers\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Maximum number of workers to keep in memory (by default, <cite>max_workers=5000</cite>)</p>\n</div>\n<div class=\"section\" id=\"max-tasks\">\n<span id=\"id18\"></span><h3><a class=\"toc-backref\" href=\"#id43\">max_tasks</a><a class=\"headerlink\" href=\"#max-tasks\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Maximum number of tasks to keep in memory (by default, <cite>max_tasks=10000</cite>)</p>\n</div>\n<div class=\"section\" id=\"natural-time\">\n<span id=\"id19\"></span><h3><a class=\"toc-backref\" href=\"#id44\">natural_time</a><a class=\"headerlink\" href=\"#natural-time\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Show time relative to the refresh time (by default, <cite>natural_time=True</cite>)</p>\n</div>\n<div class=\"section\" id=\"persistent\">\n<span id=\"id20\"></span><h3><a class=\"toc-backref\" href=\"#id45\">persistent</a><a class=\"headerlink\" href=\"#persistent\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Enable persistent mode. If the persistent mode is enabled Flower saves\nthe current state and reloads on restart (by default, <cite>persistent=False</cite>)</p>\n</div>\n<div class=\"section\" id=\"port\">\n<span id=\"id21\"></span><h3><a class=\"toc-backref\" href=\"#id46\">port</a><a class=\"headerlink\" href=\"#port\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Run the http server on a given port (by default, <cite>port=5555</cite>)</p>\n</div>\n<div class=\"section\" id=\"xheaders\">\n<span id=\"id22\"></span><h3><a class=\"toc-backref\" href=\"#id47\">xheaders</a><a class=\"headerlink\" href=\"#xheaders\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Enable support of <cite>X-Real-Ip</cite> and <cite>X-Scheme</cite> headers\n(by default, <cite>xheaders=False</cite>)</p>\n</div>\n<div class=\"section\" id=\"tasks-columns\">\n<span id=\"id23\"></span><h3><a class=\"toc-backref\" href=\"#id48\">tasks_columns</a><a class=\"headerlink\" href=\"#tasks-columns\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Specifies list of comma-delimited columns on <cite>/tasks/</cite> page.\nColumns on the page can be reordered using drag and drop.\nAvailable columns are:</p>\n<blockquote>\n<div><ul class=\"simple\">\n<li><cite>name</cite></li>\n<li><cite>uuid</cite></li>\n<li><cite>state</cite></li>\n<li><cite>args</cite></li>\n<li><cite>kwargs</cite></li>\n<li><cite>result</cite></li>\n<li><cite>received</cite></li>\n<li><cite>started</cite></li>\n<li><cite>runtime</cite></li>\n<li><cite>worker</cite></li>\n<li><cite>retries</cite></li>\n<li><cite>revoked</cite></li>\n<li><cite>exception</cite></li>\n<li><cite>expires</cite></li>\n<li><cite>eta</cite></li>\n</ul>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"url-prefix\">\n<span id=\"id24\"></span><h3><a class=\"toc-backref\" href=\"#id49\">url_prefix</a><a class=\"headerlink\" href=\"#url-prefix\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Enables deploying Flower on non-root URL</p>\n<p>For example to access Flower on <a class=\"reference external\" href=\"http://example.com/flower\">http://example.com/flower</a> run it with:</p>\n<div class=\"highlight-python3\"><div class=\"highlight\"><pre><span></span>$ flower --url_prefix=flower\n</pre></div>\n</div>\n<p>And use the following <cite>nginx</cite> configuration:</p>\n<div class=\"highlight-nginx\"><div class=\"highlight\"><pre><span></span><span class=\"k\">server</span> <span class=\"p\">{</span>\n    <span class=\"kn\">listen</span> <span class=\"mi\">80</span><span class=\"p\">;</span>\n    <span class=\"kn\">server_name</span> <span class=\"s\">example.com</span><span class=\"p\">;</span>\n\n    <span class=\"kn\">location</span> <span class=\"s\">/flower/</span> <span class=\"p\">{</span>\n        <span class=\"kn\">rewrite</span> <span class=\"s\">^/flower/(.*)</span>$ <span class=\"s\">/</span><span class=\"nv\">$1</span> <span class=\"s\">break</span><span class=\"p\">;</span>\n        <span class=\"kn\">proxy_pass</span> <span class=\"s\">http://example.com:5555</span><span class=\"p\">;</span>\n        <span class=\"kn\">proxy_set_header</span> <span class=\"s\">Host</span> <span class=\"nv\">$host</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"unix-socket\">\n<span id=\"id25\"></span><h3><a class=\"toc-backref\" href=\"#id50\">unix_socket</a><a class=\"headerlink\" href=\"#unix-socket\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Path to UNIX socket</p>\n</div>\n<div class=\"section\" id=\"cookie-secret\">\n<span id=\"id26\"></span><h3><a class=\"toc-backref\" href=\"#id51\">cookie_secret</a><a class=\"headerlink\" href=\"#cookie-secret\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Set a secret key for signing cookies</p>\n</div>\n<div class=\"section\" id=\"auth-provider\">\n<span id=\"id27\"></span><h3><a class=\"toc-backref\" href=\"#id52\">auth_provider</a><a class=\"headerlink\" href=\"#auth-provider\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Sets authentication provider</p>\n<blockquote>\n<div><ul class=\"simple\">\n<li>Google <cite>flower.views.auth.GoogleAuth2LoginHandler</cite></li>\n<li>GitHub <cite>flower.views.auth.GithubLoginHandler</cite></li>\n</ul>\n</div></blockquote>\n<p>See <cite>Authentication</cite> for usage examples</p>\n</div>\n</div>\n</div>\n", "alabaster_version": "0.7.7", "display_toc": true, "title": "Configuration", "sourcename": "config.txt", "customsidebar": null, "metatags": "", "current_page_name": "config", "next": {"link": "../tasks_filter/", "title": "Tasks filtering"}, "rellinks": [["tasks_filter", "Tasks filtering", "N", "next"], ["install", "Installation", "P", "previous"]], "meta": {"tocdepth": 2}, "parents": [], "sidebars": ["sidebarlogo.html", "localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Configuration</a><ul>\n<li><a class=\"reference internal\" href=\"#options\">Options</a></li>\n</ul>\n</li>\n</ul>\n", "prev": {"link": "../install/", "title": "Installation"}, "page_source_suffix": ".rst"}