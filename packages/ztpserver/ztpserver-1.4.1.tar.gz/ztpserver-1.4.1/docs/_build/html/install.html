

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; ZTPServer 1.3.2 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="ZTPServer 1.3.2 documentation" href="index.html"/>
        <link rel="next" title="Startup" href="startup.html"/>
        <link rel="prev" title="Overview" href="overview.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> ZTPServer</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#ztp-intro">ZTP Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#server">Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#client">Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#ztp-client-server-message-flows">ZTP Client-Server Message Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#topology-validation">Topology Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#operational-modes">Operational modes</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-options">Installation Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upgrading">Upgrading</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-services">Additional services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="startup.html">Startup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="startup.html#apache-mod-wsgi">Apache (mod_wsgi)</a></li>
<li class="toctree-l2"><a class="reference internal" href="startup.html#standalone-debug-server">Standalone debug server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="config.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#global-configuration-file">Global configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#bootstrap-configuration">Bootstrap configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#static-provisioning-overview">Static provisioning - overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#static-provisioning-startup-config">Static provisioning - startup_config</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#static-provisioning-definition">Static provisioning - definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#static-provisioning-attributes">Static provisioning - attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#static-provisioning-pattern">Static provisioning - pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#static-provisioning-config-handler">Static provisioning - config-handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#static-provisioning-log">Static provisioning - log</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#dynamic-provisioning-overview">Dynamic provisioning - overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#dynamic-provisioning-neighbordb">Dynamic provisioning - neighbordb</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#definitions">Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#actions">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#plugins-for-allocating-resources">Plugins for allocating resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#config-handlers">Config-handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#other-files">Other files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples.html#global-configuration-file">Global configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#dynamic-neighbordb-or-pattern-file">Dynamic neighbordb or pattern file</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#static-neighbordb-and-node-unique-id-pattern-file">Static neighbordb and /node/&lt;unique-id&gt;/pattern file</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#sample-dynamic-definition-file">Sample dynamic definition file</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#sample-templates">Sample templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#sample-resources">Sample resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#neighbordb-pattern-examples">Neighbordb pattern examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#more-examples">More examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">ZTPServer Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cookbook/install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/clientLogging.html">Client-Side Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/serverLogging.html">Server-Side Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/configuration.html">ZTPServer Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/runningZTPS.html">Running the ZTPServer</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/helloWorld.html">Hello World - A Simple Provisioning Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/staticNodes.html">Provision a Static Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/dynamicNodes.html">Provision a Dynamic Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/topologyValidation.html">Topology Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/definitions.html">Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/actions.html">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/resourcePools.html">Resource Pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/advanced.html">Advanced</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/puppet.html">Puppet Agent - Bootstrap EOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/ansible.html">Ansible - Bootstrap EOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/ztpsVMonEOS.html">Run ZTPServer as a VM on EOS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">Tips and tricks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tips.html#how-do-i-update-my-local-copy-of-ztpserver-from-github">How do I update my local copy of ZTPServer from GitHub?</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#my-server-keeps-failing-to-load-my-resource-files-whats-going-on">My server keeps failing to load my resource files. What’s going on?</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#how-do-i-validate-the-format-of-my-config-files">How do I validate the format of my config files?</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#how-do-i-debug-the-ztp-server-provisioning-process">How do I debug the ZTP Server provisioning process?</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#how-do-i-disable-enable-ztp-mode-on-a-switch">How do I disable / enable ZTP mode on a switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#how-can-i-test-ztpserver-without-having-to-reboot-the-switch-every-time">How can I test ZTPServer without having to reboot the switch every time?</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#what-is-the-recommended-test-environment-for-ztpserver">What is the recommended test environment for ZTPServer?</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#how-do-i-override-the-default-system-mac-in-veos">How do I override the default system-mac in vEOS?</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#how-do-i-override-the-default-serial-number-or-system-mac-in-veos">How do I override the default serial number or system-mac in vEOS?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="implementation.html">Implementation Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">Client - Server API</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary of terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="support.html#contact">Contact</a></li>
<li class="toctree-l2"><a class="reference internal" href="support.html#known-caveats">Known caveats</a></li>
<li class="toctree-l2"><a class="reference internal" href="support.html#releases">Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="support.html#roadmap-highlights">Roadmap highlights</a></li>
<li class="toctree-l2"><a class="reference internal" href="support.html#tutorial">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="support.html#other-resources">Other Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#before-requesting-support">Before Requesting Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="license.html#third-party">Third party</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">ZTPServer</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Installation</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/install.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li>
<li><a class="reference internal" href="#installation-options" id="id3">Installation Options</a><ul>
<li><a class="reference internal" href="#turn-key-vm-creation" id="id4">Turn-key VM Creation</a></li>
<li><a class="reference internal" href="#pypi-package-pip-install" id="id5">PyPI Package (pip install)</a></li>
<li><a class="reference internal" href="#manual-installation" id="id6">Manual installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#upgrading" id="id7">Upgrading</a></li>
<li><a class="reference internal" href="#additional-services" id="id8">Additional services</a><ul>
<li><a class="reference internal" href="#allow-ztpserver-connections-in-through-the-firewall" id="id9">Allow ZTPServer Connections In Through The Firewall</a></li>
<li><a class="reference internal" href="#configure-the-dhcp-service" id="id10">Configure the DHCP Service</a></li>
<li><a class="reference internal" href="#enable-and-start-the-dhcpd-service" id="id11">Enable and start the dhcpd service</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="requirements">
<h2><a class="toc-backref" href="#id2">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>Server:</strong></p>
<ul class="simple">
<li>Python 2.7 or later (<a class="reference external" href="https://www.python.org/download/releases">https://www.python.org/download/releases</a>)</li>
<li>routes 2.0 or later (<a class="reference external" href="https://pypi.python.org/pypi/Routes">https://pypi.python.org/pypi/Routes</a>)</li>
<li>webob 1.3 or later (<a class="reference external" href="http://webob.org/">http://webob.org/</a>)</li>
<li>PyYaml 3.0 or later (<a class="reference external" href="http://pyyaml.org/">http://pyyaml.org/</a>)</li>
</ul>
<p><strong>Client:</strong></p>
<ul class="simple">
<li><a class="reference external" href="http://eos.arista.com">EOS</a> 4.12.0 or later (ZTPServer 1.1+)</li>
<li><a class="reference external" href="http://eos.arista.com">EOS</a> 4.13.3 or later (ZTPServer 1.0)</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We recommend using a Linux distribution which has Python 2.7 as its standard Python install (e.g. yum in Centos requires Python 2.6 and a dual Python install can be fairly tricky and buggy). This guide was written based ZTPServer v1.1.0 installed on Fedora 20.</p>
</div>
</div>
<div class="section" id="installation-options">
<h2><a class="toc-backref" href="#id3">Installation Options</a><a class="headerlink" href="#installation-options" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#packer-install"><em>Turn-key VM Creation</em></a></li>
<li><a class="reference internal" href="#pypi-install"><em>PyPI Package (pip install)</em></a></li>
<li><a class="reference internal" href="#manual-install"><em>Manual installation</em></a></li>
</ul>
</div></blockquote>
<div class="section" id="turn-key-vm-creation">
<span id="packer-install"></span><h3><a class="toc-backref" href="#id4">Turn-key VM Creation</a><a class="headerlink" href="#turn-key-vm-creation" title="Permalink to this headline">¶</a></h3>
<p>The turn-key VM option leverages <a class="reference external" href="http://www.packer.io/">Packer</a> to auto generate a VM on your local system. Packer.io automates the creation of the ZTPServer VM. All of the required packages and dependencies are installed and configured. The current Packer configuration allows you to choose between VirtualBox or VMWare as your hypervisor and each can support Fedora 20 or Ubuntu Server 12.04.</p>
<p>VM Specification:</p>
<ul class="simple">
<li>7GB Hard Drive</li>
<li>2GB RAM</li>
<li>Hostname ztps.ztps-test.com<ul>
<li>eth0 (NAT) DHCP</li>
<li>eth1 (hostonly) 172.16.130.10</li>
</ul>
</li>
<li>Firewalld/UFW disabled</li>
<li>Users<ul>
<li>root/eosplus</li>
<li>ztpsadmin/eosplus</li>
</ul>
</li>
<li>Python 2.7.5 with PIP</li>
<li>DHCP installed with Option 67 configured (eth1 only)</li>
<li>BIND DNS server installed with zone ztps-test.com<ul>
<li>wildcard forwarding rule passing all other queries to 8.8.8.8</li>
<li>SRV RR for im.ztps-test.com</li>
</ul>
</li>
<li>rsyslog-ng installed; Listening on UDP and TCP (port 514)</li>
<li>ejabberd (XMPP server) configured for im.ztps-test.com<ul>
<li>XMPP admin user: ztpsadmin/eosplus</li>
</ul>
</li>
<li>httpd installed and configured for ZTPServer (mod_wsgi)</li>
<li>ZTPServer installed</li>
<li>ztpserver-demo repo files pre-loaded</li>
</ul>
<p>See the Packer VM <a class="reference external" href="https://github.com/arista-eosplus/packer-ztpserver">code and documentation</a> as well as the <a class="reference external" href="https://github.com/arista-eosplus/ztpserver-demo">ZTPServer demo files</a> for the Packer VM.</p>
</div>
<div class="section" id="pypi-package-pip-install">
<span id="pypi-install"></span><h3><a class="toc-backref" href="#id5">PyPI Package (pip install)</a><a class="headerlink" href="#pypi-package-pip-install" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://pypi.python.org/pypi/ztpserver">ZTPServer</a> may be installed as a <a class="reference external" href="https://pypi.python.org/pypi/ztpserver">PyPI</a> package.</p>
<p>This option assumes you have a server with Python and pip pre-installed.  See <a class="reference external" href="https://pip.pypa.io/en/latest/installing.html">installing pip</a>.</p>
<p>Once pip is installed, type:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">bash-3.2$ pip install ztpserver</span>
</pre></div>
</div>
<p>The pip install process will install all dependencies and run the install script, leaving you with a ZTPServer instance ready to configure.</p>
</div>
<div class="section" id="manual-installation">
<span id="manual-install"></span><h3><a class="toc-backref" href="#id6">Manual installation</a><a class="headerlink" href="#manual-installation" title="Permalink to this headline">¶</a></h3>
<p>Download source:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/arista-eosplus/ztpserver/releases/latest">Latest Release</a> on GitHub<ul>
<li><a class="reference external" href="https://github.com/arista-eosplus/ztpserver/releases/">Previous releases</a></li>
</ul>
</li>
<li>Active Stable: (<a class="reference external" href="https://github.com/arista-eosplus/ztpserver/tree/master">GitHub</a>) (<a class="reference external" href="https://github.com/arista-eosplus/ztpserver/zipball/master">ZIP</a>) (<a class="reference external" href="https://github.com/arista-eosplus/ztpserver/tarball/master">TAR</a>)</li>
<li>Development: (<a class="reference external" href="https://github.com/arista-eosplus/ztpserver/tree/develop">GitHub</a>) (<a class="reference external" href="https://github.com/arista-eosplus/ztpserver/zipball/develop">ZIP</a>) (<a class="reference external" href="https://github.com/arista-eosplus/ztpserver/tarball/develop">TAR</a>)</li>
</ul>
<p>Once the above system requirements are met, you can use the following git command to pull the develop branch into a local directory on the server where you want to install ZTPServer:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">bash-3.2$ git clone https://github.com/arista-eosplus/ztpserver.git</span>
</pre></div>
</div>
<p>Or, you may download the zip or tar archive and expand it.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">bash-3.2$ wget https://github.com/arista-eosplus/ztpserver/tarball/master</span>
<span class="go">bash-3.2$ tar xvf &lt;filename&gt;</span>
<span class="go">  or</span>
<span class="go">bash-3.2$ unzip &lt;filename&gt;</span>
</pre></div>
</div>
<p>Change in to the ztpserver directory, then checkout the release desired:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">bash-3.2$ cd ztpserver</span>
<span class="go">bash-3.2$ git checkout v1.1.0</span>
</pre></div>
</div>
<p>Execute <tt class="docutils literal"><span class="pre">setup.py</span></tt> to build and then install ZTPServer:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">[user@localhost ztpserver]$ sudo python setup.py build</span>
<span class="go">running build</span>
<span class="go">running build_py</span>
<span class="go">...</span>

<span class="go">[root@localhost ztpserver]# sudo python setup.py install</span>
<span class="go">running install</span>
<span class="go">running build</span>
<span class="go">running build_py</span>
<span class="go">running install_lib</span>
<span class="go">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="upgrading">
<span id="upgrade"></span><h2><a class="toc-backref" href="#id7">Upgrading</a><a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h2>
<p>Upgrading ZTP Server is based on the method of installation:</p>
<ul>
<li><p class="first">PyPI (pip):</p>
<div class="highlight-python"><div class="highlight"><pre>sudo pip install --upgrade ztpserver
</pre></div>
</div>
</li>
<li><p class="first">Manual, Packer-VM, GitHub installs:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ztpserver/
sudo ./utils/refresh_ztps -b &lt;branch&gt;
</pre></div>
</div>
<p>The ztpserver/ directory, above, should be a git repository (where the files were checked out).  The <tt class="docutils literal"><span class="pre">branch</span></tt> identifier may be any version identifier (1.3.2, 1.1), or an actual branch on github such as <tt class="docutils literal"><span class="pre">master</span></tt> (released), or <tt class="docutils literal"><span class="pre">develop</span></tt> (development).</p>
</li>
<li><p class="first">RPM:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo rpm -Uvh ztpserver-&lt;version&gt;.rpm
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="additional-services">
<span id="server-config"></span><h2><a class="toc-backref" href="#id8">Additional services</a><a class="headerlink" href="#additional-services" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If using the <a class="reference internal" href="#packer-install"><em>Turn-key VM Creation</em></a>, all of the steps, below, will have been completed, please reference the VM documentation.</p>
</div>
<div class="section" id="allow-ztpserver-connections-in-through-the-firewall">
<h3><a class="toc-backref" href="#id9">Allow ZTPServer Connections In Through The Firewall</a><a class="headerlink" href="#allow-ztpserver-connections-in-through-the-firewall" title="Permalink to this headline">¶</a></h3>
<p>Be sure your host firewall allows incoming connections to ZTPServer.  The standalone server runs on port TCP/8080 by default.</p>
<p><strong>Firewalld</strong> examples:</p>
<blockquote>
<div><ul class="simple">
<li>Open TCP/&lt;port&gt; through firewalld
<tt class="docutils literal"><span class="pre">bash-3.2$</span> <span class="pre">firewall-cmd</span> <span class="pre">--zone=public</span> <span class="pre">--add-port=&lt;port&gt;/tcp</span> <span class="pre">[--permanent]</span></tt></li>
<li>Stop firewalld
<tt class="docutils literal"><span class="pre">bash-3.2$</span> <span class="pre">systemctl</span> <span class="pre">stop</span> <span class="pre">firewalld</span></tt></li>
<li>Disable firewalld
<tt class="docutils literal"><span class="pre">bash-3.2$</span> <span class="pre">systemctl</span> <span class="pre">disable</span> <span class="pre">firewalld</span></tt></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If using the <a class="reference internal" href="#packer-install"><em>Turn-key VM Creation</em></a>, all the steps from below will be been completed automatically.</p>
</div>
</div>
<div class="section" id="configure-the-dhcp-service">
<h3><a class="toc-backref" href="#id10">Configure the DHCP Service</a><a class="headerlink" href="#configure-the-dhcp-service" title="Permalink to this headline">¶</a></h3>
<p>Set up your DHCP infrastructure to server the full path to the ZTPServer bootstrap file via option 67.  This can be performed on any DHCP server.  Below you can see how you can do that for ISC dhcpd.</p>
<p>Get dhcpd:</p>
<blockquote>
<div><dl class="docutils">
<dt>RedHat:</dt>
<dd><tt class="docutils literal"><span class="pre">bash-3.2$</span> <span class="pre">sudo</span> <span class="pre">yum</span> <span class="pre">install</span> <span class="pre">dhcp</span></tt></dd>
<dt>Ubuntu:</dt>
<dd><tt class="docutils literal"><span class="pre">bash-3.2$</span> <span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">isc-dhcp-server</span></tt></dd>
</dl>
</div></blockquote>
<p>Add a network (in this case 192.168.100.0/24) for servicing DHCP requests for ZTPServer:</p>
<div class="highlight-python"><div class="highlight"><pre>subnet 192.168.100.0 netmask 255.255.255.0 {
  range 192.168.100.200 192.168.100.205;
  option routers 192.168.100.1;
  option domain-name-servers &lt;ipaddr&gt;;
  option domain-name &quot;&lt;org&gt;&quot;;
  option bootfile-name &quot;http://&lt;ztp_hostname_or_ip&gt;:&lt;port&gt;/bootstrap&quot;;
}
</pre></div>
</div>
</div>
<div class="section" id="enable-and-start-the-dhcpd-service">
<h3><a class="toc-backref" href="#id11">Enable and start the dhcpd service</a><a class="headerlink" href="#enable-and-start-the-dhcpd-service" title="Permalink to this headline">¶</a></h3>
<p>RedHat (and derivative Linux implementations)</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">bash-3.2#</span> <span class="pre">sudo</span> <span class="pre">/usr/bin/systemctl</span> <span class="pre">enable</span> <span class="pre">dhcpd.service</span></tt>
<tt class="docutils literal"><span class="pre">bash-3.2#</span> <span class="pre">sudo</span> <span class="pre">/usr/bin/systemctl</span> <span class="pre">start</span> <span class="pre">dhcpd.service</span></tt></div></blockquote>
<p>Ubuntu (and derivative Linux implementations)</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">bash-3.2#</span> <span class="pre">sudo</span> <span class="pre">/usr/sbin/service</span> <span class="pre">isc-dhcp-server</span> <span class="pre">start</span></tt></div></blockquote>
<p>Check that /etc/init/isc-dhcp-server.conf is configured for automatic startup on boot.</p>
<p>Edit the global configuration file located at <tt class="docutils literal"><span class="pre">/etc/ztpserver/ztpserver.conf</span></tt> (if needed). See the <a class="reference internal" href="config.html#global-configuration"><em>Global configuration file</em></a> options for more information.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="startup.html" class="btn btn-neutral float-right" title="Startup"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Overview"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Arista Networks.
      Last updated on Oct 13, 2015.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.3.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>