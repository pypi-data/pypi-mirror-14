


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Shinken internals monitoring &mdash; Shinken Manual 2.4.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'2.4.2',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="Shinken Manual 2.4.2 documentation" href="../index.html"/>
        <link rel="up" title="Advanced Topics" href="index.html"/>
        <link rel="next" title="Config" href="../08_configobjects/index.html"/>
        <link rel="prev" title="Discovery with Shinken" href="discovery-with-shinken.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> Shinken Manual</a>
        <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_introduction/index.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../01_introduction/about.html">About Shinken</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../02_gettingstarted/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../02_gettingstarted/beginners.html">Advice for Beginners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_gettingstarted/installations/index.html">Installations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_gettingstarted/upgrading-shinken.html">Upgrading Shinken</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../03_configuration/index.html">Configuring Shinken</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/config.html">Configuration Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/configmain.html">Main Configuration File (shinken.cfg) Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/configobject.html">Object Configuration Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/objectdefinitions.html">Object Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/customobjectvars.html">Custom Object Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/configmain-advanced.html">Main advanced configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../04_runningshinken/index.html">Running Shinken</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../04_runningshinken/verifyconfig.html">Verifying Your Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04_runningshinken/startstop.html">Starting and Stopping Shinken</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../05_thebasics/index.html">The Basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/configure-shinken.html">Setting up a basic Shinken Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/plugins.html">Monitoring Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/macros.html">Understanding Macros and How They Work</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/macrolist.html">Standard Macros in Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/hostchecks.html">Host Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/servicechecks.html">Service Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/activechecks.html">Active Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/passivechecks.html">Passive Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/statetypes.html">State Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/timeperiods.html">Time Periods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/networkreachability.html">Determining Status and Reachability of Network Hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/notifications.html">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/active-module-checks.html">Active data acquisition modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/dependencies-in-shinken.html">Setup Network and logical dependencies in Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/update.html">Update Shinken</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../06_medium/index.html">Medium</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/business-rules.html">Business rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/dmz-monitoring.html">Monitoring a DMZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/high-availability.html">Shinken High Availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/mix-windows-and-linux-polling.html">Mixed GNU/linux AND Windows pollers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/notification-escalations.html">Notifications and escalations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/notification-ways.html">The Notification Ways, AKA mail 24x7, SMS only the night for a same contact</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/passive-checks.html">Passive data acquisition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/snapshots.html">Snapshots</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Advanced Topics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="extcommands.html">External Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="eventhandlers.html">Event Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="volatileservices.html">Volatile Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="freshness.html">Service and Host Freshness Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="distributed.html">Distributed Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="redundancy.html">Redundant and Failover Network Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="flapping.html">Detection and Handling of State Flapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="escalations.html">Notification Escalations</a></li>
<li class="toctree-l2"><a class="reference internal" href="oncallrotation.html">On-Call Rotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="clusters.html">Monitoring Service and Host Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependencies.html">Host and Service Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="stalking.html">State Stalking</a></li>
<li class="toctree-l2"><a class="reference internal" href="perfdata.html">Performance Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="downtime.html">Scheduled Downtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="adaptative.html">Adaptive Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependencychecks.html">Predictive Dependency Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="cachedchecks.html">Cached Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="passivestatetranslation.html">Passive Host State Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="checkscheduling.html">Service and Host Check Scheduling</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectinheritance.html">Object Inheritance</a></li>
<li class="toctree-l2"><a class="reference internal" href="objecttricks.html">Advanced tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="migratingfromnagios.html">Migrating from Nagios to Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-layer-discovery.html">Multi layer discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiple-urls.html">Multiple action urls</a></li>
<li class="toctree-l2"><a class="reference internal" href="rule-agregation.html">Aggregation rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="scaling-shinken.html">Scaling Shinken for large deployments</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced-dependencies.html">Defining advanced service dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="distributed-shinken.html">Shinken&#8217;s distributed architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="distributed-with-realm.html">Shinken&#8217;s distributed architecture with realms</a></li>
<li class="toctree-l2"><a class="reference internal" href="businessimpact-modulations.html">Businessimpact modulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="check-modulations.html">Check modulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro-modulations.html">Macro modulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="result-modulations.html">Result modulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="sms-with-android.html">Shinken and Android</a></li>
<li class="toctree-l2"><a class="reference internal" href="sms-with-gateway.html">Send sms by gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="triggers.html">Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="unused-nagios-parameters.html">Unused nagios parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="discovery-with-shinken-advanced.html">Advanced discovery with Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="discovery-with-shinken.html">Discovery with Shinken</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Shinken internals monitoring</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../08_configobjects/index.html">Config</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/host.html">Host Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/hostgroup.html">Host Group Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/service.html">Service Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/servicegroup.html">Service Group Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/contact.html">Contact Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/contactgroup.html">Contact Group Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/timeperiod.html">Time Period Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/command.html">Command Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/servicedependency.html">Service Dependency Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/serviceescalation.html">Service Escalation Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/hostdependency.html">Host Dependency Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/hostescalation.html">Host Escalation Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/hostextinfo.html">Extended Host Information Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/serviceextinfo.html">Extended Service Information Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/notificationway.html">Notification Way Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/realm.html">Realm Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/arbiter.html">Arbiter Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/scheduler.html">Scheduler Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/poller.html">Poller Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/reactionner.html">Reactionner Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/broker.html">Broker Definition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../09_architecture/index.html">Shinken Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../09_architecture/about-the-high-availability.html">Arbiter supervision of Shinken processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09_architecture/advanced-features.html">Advanced architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09_architecture/how-dispatching-works.html">How are commands and configurations managed in Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09_architecture/problems-and-impacts.html">Problems and impacts correlation management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09_architecture/the-shinken-architecture.html">Shinken Architecture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../10_troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../10_troubleshooting/troubleshooting-shinken.html">FAQ - Shinken troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../11_integration/index.html">Integration With Other Software</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/integration.html">Integration Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/snmptrap.html">SNMP Trap Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/tcpwrappers.html">TCP Wrappers Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/thruk.html">Use Shinken with Thruk</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/specific-cgi-parameters.html">Nagios CGI UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/thruk-screenshot.html">Thruk interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/use-shinken-with.html">Use Shinken with ...</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/centreon.html">Use Shinken with Centreon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/graphite.html">Use Shinken with Graphite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/multisite.html">Use Shinken with Multisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/nagvis.html">Use Shinken with Nagvis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/old-cgi-and-vshell.html">Use Shinken with Old CGI and VShell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/pnp.html">Use Shinken with PNP4Nagios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/webui.html">Use Shinken with WebUI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../12_tuning/index.html">Security and Performance Tuning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../12_tuning/security.html">Security Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_tuning/tuning.html">Tuning Shinken For Maximum Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_tuning/largeinstalltweaks.html">Scaling a Shinken installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_tuning/statistics.html">Shinken performance statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_tuning/mrtggraphs.html">Graphing Performance Info With MRTG and nagiostats</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../13_monitoring/index.html">How to monitor ...</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/dc.html">Monitoring Active Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/asterisk.html">Monitoring Asterisk servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/dhcp.html">Monitoring DHCP servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/iis.html">Monitoring IIS servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/linux.html">Monitoring Linux devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/monitoring-a-linux.html">Monitoring Linux devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/monitoring-a-linux-via-local-agent.html">Monitoring Linux devices via a Local Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/monitoring-a-linux-via-snmp.html">Monitoring Linux devices via SNMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/exchange.html">Monitoring Microsoft Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/mssql.html">Monitoring Microsoft SQL databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/mysql.html">Monitoring MySQL databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/routers.html">Monitoring Routers and Switches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/router-or-switch.html">Monitoring Network devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/oracle.html">Monitoring Oracle databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/printer.html">Monitoring Printers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/network-service.html">Monitoring Publicly Available Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/vmware.html">Monitoring VMware hosts and machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/windows.html">Monitoring Windows devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/windows-monitoring-with-nsclient.html">Monitoring Windows devices via NSClient++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/configure-check-wmi-plus-onwindows.html">Monitoring Windows devices via WMI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../14_contributing/index.html">How to contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../14_contributing/packs.html">Shinken packs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../14_contributing/modules.html">Shinken modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../14_contributing/how-to-contribute.html">Getting Help and Ways to Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../14_contributing/spm.html">Shinken Package Manager</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../15_development/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../15_development/programming-rules.html">Shinken Programming Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_development/test-driven-development.html">Test Driven Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_development/pluginapi.html">Shinken Plugin API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_development/modules.html">Developing Shinken Daemon Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_development/hackingcode.html">Hacking the Shinken Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_development/documentation.html">Shinken documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../98_deprecated/index.html">Deprecated</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../98_deprecated/whatsnew.html">Feature comparison between Shinken and Nagios</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../89_packages/index.html">Shinken modules</a><ul class="simple">
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../99_references/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../99_references/exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/modules.html">shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.html">shinken Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.clients.html">clients Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.daemons.html">daemons Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.discovery.html">discovery Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.misc.html">misc Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.objects.html">objects Package</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="../index.html">Shinken Manual</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../index.html">Docs</a> &raquo;</li>
  <li><a href="">Shinken internals monitoring</a></li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="../_sources/07_advanced/internals-monitoring.txt" rel="nofollow"> View page source</a>
      
    </li>
</ul>
<hr/>

          
  <div class="section" id="shinken-internals-monitoring">
<span id="advanced-internals-monitoring"></span><h1>Shinken internals monitoring<a class="headerlink" href="#shinken-internals-monitoring" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Shinken is able to expose many internal metrics to a statsd server, allowing to monitor its performances and its operation. It may also be useful to troubleshoot issues.</p>
<p>The metrics export to statsd may be controlled through parameters explained in <a class="reference internal" href="../03_configuration/configmain-advanced.html#configuration-configmain-advanced-statsd"><em>advanced configuration</em></a>.</p>
<p>The various metrics available in statsd are described in the sections below (the metric names do not mention the configurable prefix nor hostname).</p>
<p>Each metric is specified
- Its name
- Its metric type
- A description telling which information it represents
- The type it is linked to, which may be used to filter the metrics to send to statsd through the <cite>statsd_types</cite> global attribute.</p>
</div>
<div class="section" id="initial-connection-timings">
<h2>Initial connection timings<a class="headerlink" href="#initial-connection-timings" title="Permalink to this headline">¶</a></h2>
<p>Some services establish connections to continuously exchange data. The metrics below measure the time spent to establish them.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="6%" />
<col width="67%" />
<col width="4%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>con-init.poller</td>
<td>timer</td>
<td>Connection time from broker to poller</td>
<td>perf</td>
</tr>
<tr class="row-even"><td>con-init.reactionner</td>
<td>timer</td>
<td>Connection time from broker to reactionner</td>
<td>perf</td>
</tr>
<tr class="row-odd"><td>con-init.receiver</td>
<td>timer</td>
<td>Connection time from broker to receiver</td>
<td>perf</td>
</tr>
<tr class="row-even"><td>con-init.scheduler</td>
<td>timer</td>
<td>Connection time from broker/poller/reactcionner to schedule</td>
<td>perf</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>con-init.poller</dt>
<dd>Time spent to establish initial session from the broker to the poller services.</dd>
<dt>con-init.reactionner</dt>
<dd>Time spent to establish initial session from the broker to the reactionner services.</dd>
<dt>con-init.receiver</dt>
<dd>Time spent to establish initial session from the broker to the receiver services.</dd>
<dt>con-init.scheduler</dt>
<dd>Time spent to establish initial session from the broker (to get objects state), the poller and the reactionner (to get actions to execute) to the scheduler services.</dd>
</dl>
</div>
<div class="section" id="hook-timings">
<h2>Hook timings<a class="headerlink" href="#hook-timings" title="Permalink to this headline">¶</a></h2>
<p>The shinken services executes code in hooks on different conditions (on a particular point in the workflow, on a timer, on a particular event, ...). The hook events are forwarded to modules for them to execute actions on them. The metrics below expose the time spent to execute those hooks.</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="6%" />
<col width="57%" />
<col width="5%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>hook.early_configuration</td>
<td>timer</td>
<td>Time spent in the <cite>early_configuration</cite> hook</td>
<td>perf</td>
</tr>
<tr class="row-even"><td>hook.get_new_actions</td>
<td>timer</td>
<td>Time spent in the <cite>get_new_actions</cite> hook</td>
<td>perf</td>
</tr>
<tr class="row-odd"><td>hook.late_configuration</td>
<td>timer</td>
<td>Time spent in the <cite>late_configuration</cite> hook</td>
<td>perf</td>
</tr>
<tr class="row-even"><td>hook.load_retention</td>
<td>timer</td>
<td>Time spent in the <cite>load_retention</cite> hook</td>
<td>perf</td>
</tr>
<tr class="row-odd"><td>hook.read_configuration</td>
<td>timer</td>
<td>Time spent in the <cite>read_configuration</cite> hook</td>
<td>perf</td>
</tr>
<tr class="row-even"><td>hook.save_retention</td>
<td>timer</td>
<td>Time spent in the <cite>save_retention</cite> hook</td>
<td>perf</td>
</tr>
<tr class="row-odd"><td>hook.tick</td>
<td>timer</td>
<td>Time spent in the <cite>tick</cite> hook</td>
<td>perf</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>hook.early_configuration</dt>
<dd>The <cite>early_configuration</cite> hook is executed in the Arbiter daemon after having read the raw configuration, and before starting the deeper parsing operation. This metric exposes the time spent by Arbiter modules to react to this hook.</dd>
<dt>hook.get_new_actions</dt>
<dd>The <cite>get_new_actions</cite> hook is executed in the Scheduler daemon to get actions to execute from modules (actions may be checks, notifications or event handlers). This metric exposes the time spent by Scheduler modules to react to this hook.</dd>
<dt>hook.late_configuration</dt>
<dd>The <cite>late_configuration</cite> hook is executed in the Arbiter daemon after the deeper configuration parsing, and before validating it&#8217;s correct. This metric exposes the time spent by Arbiter modules to react to this hook.</dd>
<dt>hook.load_retention</dt>
<dd>The <cite>load_retention</cite> hook is executed in the Scheduler and Broker daemons to load retention data using the registered retention module. This metric exposes the time spent by the Schedulers and Brokers to load their retention data.</dd>
<dt>hook.save_retention</dt>
<dd>The <cite>save_retention</cite> hook is executed in the Scheduler and Broker daemons to save retention data using the registered retention module. This metric exposes the time spent by the Schedulers and Brokers to save their retention data.</dd>
<dt>hook.tick</dt>
<dd>All daemons send <cite>tick</cite> event each time they finish to execute a cycle in their main loop. This metric exposes the time spent by modules to react to the <cite>tick</cite> event.</dd>
</dl>
</div>
<div class="section" id="http-communication-timings">
<h2>Http communication timings<a class="headerlink" href="#http-communication-timings" title="Permalink to this headline">¶</a></h2>
<p>Daemons exchange data using remote execution calls based on HTTP/REST APIs. Each of the communications between the daemons are measured (server side). Depending on the request type, various metrics are calculated.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="6%" />
<col width="72%" />
<col width="5%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>http.*.aqulock</td>
<td>timer</td>
<td>Time spent waiting for a lock (if the operation requires it)</td>
<td>perf</td>
</tr>
<tr class="row-even"><td>http.*.args</td>
<td>timer</td>
<td>Time spent parsing the request and its parameters</td>
<td>perf</td>
</tr>
<tr class="row-odd"><td>http.*.calling</td>
<td>timer</td>
<td>Time spent executing the required procedure</td>
<td>perf</td>
</tr>
<tr class="row-even"><td>http.*.global</td>
<td>timer</td>
<td>Total time spent to execute the remote procedure</td>
<td>perf</td>
</tr>
<tr class="row-odd"><td>http.*.json</td>
<td>timer</td>
<td>Time spent encoding the result</td>
<td>perf</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="scheduling-metrics">
<h2>Scheduling metrics<a class="headerlink" href="#scheduling-metrics" title="Permalink to this headline">¶</a></h2>
<p>The scheduler operations are measured carefully. Each operation registered in the <cite>recurrent_works</cite> dictionary in the Scheduler daemon is measured its execution time, and the memory increase it generated. Those values are exposed using the metrics below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="7%" />
<col width="49%" />
<col width="5%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>loop.*</td>
<td>timer</td>
<td>Time spent in the operation</td>
<td>perf</td>
</tr>
<tr class="row-even"><td>loop.*.mem</td>
<td>counter</td>
<td>Memory usage evolution involved by the operation</td>
<td>perf</td>
</tr>
<tr class="row-odd"><td>core.scheduler.actions.queue</td>
<td>gauge</td>
<td>The actions queue size in the Scheduler</td>
<td>queue</td>
</tr>
<tr class="row-even"><td>core.scheduler.checks.havetoresolvedep</td>
<td>gauge</td>
<td>The check queue size in state havetoresolvedep</td>
<td>queue</td>
</tr>
<tr class="row-odd"><td>core.scheduler.checks.inpoller</td>
<td>gauge</td>
<td>The check queue size in state inpoller</td>
<td>queue</td>
</tr>
<tr class="row-even"><td>core.scheduler.checks.queue</td>
<td>gauge</td>
<td>The total check queue size in the scheduler</td>
<td>queue</td>
</tr>
<tr class="row-odd"><td>core.scheduler.checks.scheduled</td>
<td>gauge</td>
<td>The check queue size in state scheduled</td>
<td>queue</td>
</tr>
<tr class="row-even"><td>core.scheduler.checks.timeout</td>
<td>gauge</td>
<td>The check queue size in state timeout</td>
<td>queue</td>
</tr>
<tr class="row-odd"><td>core.scheduler.checks.waitconsume</td>
<td>gauge</td>
<td>The check queue size in state waitconsume</td>
<td>queue</td>
</tr>
<tr class="row-even"><td>core.scheduler.checks.waitdep</td>
<td>gauge</td>
<td>The check queue size in state waitdep</td>
<td>queue</td>
</tr>
<tr class="row-odd"><td>core.scheduler.checks.zombie</td>
<td>gauge</td>
<td>The check queue size in state zombie</td>
<td>queue</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>loop.*</dt>
<dd>Time spent in a particular step in the scheduler workflow.</dd>
<dt>loop.*.mem</dt>
<dd>The memory variation involved in a particular step in the scheduler workflow.</dd>
<dt>core.scheduler.actions.queue</dt>
<dd>The notifications and eventhandlers queue to be consumed by the reactionners</dd>
<dt>core.scheduler.checks.havetoresolvedep</dt>
<dd>The checks count having havetoresolvedep state in the scheduler. Those checks have dependent checks that have to be checked before taking any decision.</dd>
<dt>core.scheduler.checks.inpoller</dt>
<dd>The checks count having inpoller state in the scheduler. Those checks have been got from by a poller, and the scheduler is waiting for its result.</dd>
<dt>core.scheduler.checks.queue</dt>
<dd>The total queue size on the Scheduler (all states).</dd>
<dt>core.scheduler.checks.scheduled</dt>
<dd>The checks count having scheduled state in the scheduler. Those checks have to be taken by a poller.</dd>
<dt>core.scheduler.checks.timeout</dt>
<dd>The checks count having inpoller state in the scheduler. Those checks have been got from by a poller, and the result did not came in time.</dd>
<dt>core.scheduler.checks.waitconsume</dt>
<dd>The checks count having waitconsume state in the scheduler. Those checks have been got from by a poller, the result came in time and has to be processed by the Scheduler.</dd>
<dt>core.scheduler.checks.waitconsume</dt>
<dd>The checks count having waitdep state in the scheduler. Those checks have dependent checks which result is required.</dd>
<dt>core.scheduler.checks.zombie</dt>
<dd>The checks count having zombie state in the scheduler. Those checks have been totally processed and may be deleted.</dd>
</dl>
</div>
<div class="section" id="broker-specific-metrics">
<h2>Broker specific metrics<a class="headerlink" href="#broker-specific-metrics" title="Permalink to this headline">¶</a></h2>
<p>The broker receives broks emitted by the other services to manage its internal representation of the infrastructure, and forwards broks to its modules for them to do the same. The time to manage its state. Those various operation are measured and exposed through the metrics below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="7%" />
<col width="43%" />
<col width="5%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>core.broker.manage-brok</td>
<td>timer</td>
<td>Time to manage a single brok</td>
<td>perf</td>
</tr>
<tr class="row-even"><td>core.broker.put-to-external-queue</td>
<td>timer</td>
<td>Time to forward broks to modules</td>
<td>perf</td>
</tr>
<tr class="row-odd"><td>core.broker.get-new-broks</td>
<td>timer</td>
<td>Time to forward broks to modules</td>
<td>perf</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>core.broker.manage-brok</dt>
<dd>When broks are received, they have to be decoded and integrated in the broker configuration to update its representation of the infrastructure. This metric measures the time spent to handle a single brok.</dd>
<dt>core.broker.put-to-external-queue</dt>
<dd>External broker modules do not benefit from broker internal state representation, and have to decode broks to do the work on their own. This metric measures the time spent to forward all the received broks to all the external modules.</dd>
<dt>core.broker.get-new-broks</dt>
<dd>Time to get new broks from other services.</dd>
</dl>
</div>
<div class="section" id="poller-reactionner-specific-metrics">
<h2>Poller/Reactionner specific metrics<a class="headerlink" href="#poller-reactionner-specific-metrics" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="7%" />
<col width="59%" />
<col width="5%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>core.*.manage-returns</td>
<td>timer</td>
<td>Time spent by a satellite to send results to scheduler</td>
<td>perf</td>
</tr>
<tr class="row-even"><td>core.*.wait-ratio</td>
<td>gauge</td>
<td><strong>To be documented</strong></td>
<td>perf</td>
</tr>
<tr class="row-odd"><td>core.*.timeout</td>
<td>gauge</td>
<td><strong>To be documented</strong></td>
<td>perf</td>
</tr>
<tr class="row-even"><td>core.*.worker-fork.queue-size</td>
<td>gauge</td>
<td>The checks/notifications/eventhandlers execution queue size</td>
<td>queue</td>
</tr>
<tr class="row-odd"><td>core.*.actions.in</td>
<td>counter</td>
<td>The number of new actions got from scheduler</td>
<td>queue</td>
</tr>
<tr class="row-even"><td>core.*.actions.queue</td>
<td>gauge</td>
<td>The number actions currently queued</td>
<td>queue</td>
</tr>
<tr class="row-odd"><td>core.*.results.out</td>
<td>counter</td>
<td>The number of results returned to scheduler</td>
<td>queue</td>
</tr>
<tr class="row-even"><td>core.*.results.queue</td>
<td>gauge</td>
<td>The number results currently queued</td>
<td>queue</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>core.*.manage-returns</dt>
<dd>Time spent by the poller or reactionners to return the execution results to the scheduler.</dd>
<dt>core.*.wait-ratio</dt>
<dd><strong>To be documented</strong></dd>
<dt>core.*.timeout</dt>
<dd><strong>To be documented</strong></dd>
<dt>core.*.worker-fork.queue-size</dt>
<dd>The execution queue in the poller/reactionner.</dd>
<dt>core.*.worker-fork.queue-size</dt>
<dd>The execution queue in the poller/reactionner.</dd>
<dt>core.*.actions.in</dt>
<dd>The number of new actions got from scheduler.</dd>
<dt>core.*.actions.queue</dt>
<dd>The number actions currently queued</dd>
<dt>core.*.results.out</dt>
<dd>The number of results returned to scheduler.</dd>
<dt>core.*.results.queued</dt>
<dd>The number results currently queued</dd>
</dl>
</div>
<div class="section" id="broks-related-metrics">
<h2>Broks related metrics<a class="headerlink" href="#broks-related-metrics" title="Permalink to this headline">¶</a></h2>
<p>Broks transit from the satellites to broker using a pull strategy. So broks are made available on the satellites, and the active Broker fetches them. The exception is the Arbiter that sends its broks directly to the broker. The broks queue on the satellites are monitored through the metrics below.</p>
<dl class="docutils">
<dt>core.broker.get-new-broks.poller</dt>
<dd>Time spent by the Broker to download, decode and integrate broks downloaded from the Poller.</dd>
<dt>core.broker.get-new-broks.reactionner</dt>
<dd>Time spent by the Broker to download, decode and integrate broks downloaded from the Reactionner.</dd>
<dt>core.broker.get-new-broks.receiver</dt>
<dd>Time spent by the Broker to download, decode and integrate broks downloaded from the Receiver.</dd>
<dt>core.broker.get-new-broks.scheduler</dt>
<dd>Time spent by the Broker to download, decode and integrate broks downloaded from the Scheduler.</dd>
<dt>core.broker.arbiter.broks.in.broker</dt>
<dd>The broks downloaded by the Arbiter from the Scheduler.</dd>
<dt>core.arbiter.broks.in.poller</dt>
<dd>The broks downloaded by the Arbiter from the Poller</dd>
<dt>core.arbiter.broks.in.reactionner</dt>
<dd>The broks downloaded by the Arbiter from the Reactionner</dd>
<dt>core.arbiter.broks.in.receiver</dt>
<dd>The broks downloaded by the Arbiter from the Receiver</dd>
<dt>core.arbiter.broks.in.scheduler</dt>
<dd>The broks downloaded by the Arbiter from the Scheduler</dd>
<dt>core.arbiter.broks.queue</dt>
<dd>The total broks queue size in the Arbiter</dd>
<dt>core.broker.broks.queue</dt>
<dd>The total broks queue size in the Broker</dd>
<dt>core.poller.broks.queue</dt>
<dd>The total broks queue size in the Poller</dd>
<dt>core.reactionner.broks.queue</dt>
<dd>The total broks queue size in the Reactionner</dd>
<dt>core.receiver.broks.queue</dt>
<dd>The total broks queue size in the Receiver</dd>
<dt>core.scheduler.broks.queue</dt>
<dd>The total broks queue size in the Scheduler</dd>
</dl>
</div>
<div class="section" id="external-commands-related-metrics">
<h2>External commands related metrics<a class="headerlink" href="#external-commands-related-metrics" title="Permalink to this headline">¶</a></h2>
<p>The external commands may emitted by any service or module. They may also be externally received and transferred by the Arbiter or the Receiver. When an external command is emitted, it goes up to the Arbiter which is able to decide to which service it should be routed. Each service is monitorred its external command queue which are exosed by the metrics below.</p>
<dl class="docutils">
<dt>core.arbiter.external-commands.queue</dt>
<dd>The external commands queue length on the Arbiter</dd>
<dt>core.broker.external-commands.queue</dt>
<dd>The external commands queue length on the Broker</dd>
<dt>core.poller.external-commands.queue</dt>
<dd>The external commands queue length on the Poller</dd>
<dt>core.reactionner.external-commands.queue</dt>
<dd>The external commands queue length on the Reactionner</dd>
<dt>core.receiver.external-commands.queue</dt>
<dd>The external commands queue length on the Receiver</dd>
<dt>core.scheduler.external-commands.queue</dt>
<dd>The external commands queue length on the Scheduler</dd>
</dl>
</div>
<div class="section" id="memory-related-metrics">
<h2>Memory related metrics<a class="headerlink" href="#memory-related-metrics" title="Permalink to this headline">¶</a></h2>
<p>All services are monitored their memory usage through the metrics below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="6%" />
<col width="61%" />
<col width="8%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>core.arbiter.mem</td>
<td>gauge</td>
<td>The total memory used by the Arbiter service</td>
<td>system</td>
</tr>
<tr class="row-even"><td>core.broker.mem</td>
<td>gauge</td>
<td>The total memory used by the Broker service</td>
<td>system</td>
</tr>
<tr class="row-odd"><td>core.poller.mem</td>
<td>gauge</td>
<td>The total memory used by the Poller service</td>
<td>system</td>
</tr>
<tr class="row-even"><td>core.reactionner.mem</td>
<td>gauge</td>
<td>The total memory used by the Reactionner service</td>
<td>system</td>
</tr>
<tr class="row-odd"><td>core.receiver.mem</td>
<td>gauge</td>
<td>The total memory used by the Receiver service</td>
<td>system</td>
</tr>
<tr class="row-even"><td>core.scheduler.mem</td>
<td>gauge</td>
<td>The total memory used by the Scheduler service</td>
<td>system</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>core.arbiter.mem</dt>
<dd>The total memory used by the Arbiter service</dd>
<dt>core.broker.mem</dt>
<dd>The total memory used by the Broker service</dd>
<dt>core.poller.mem</dt>
<dd>The total memory used by the Poller service</dd>
<dt>core.reactionner.mem</dt>
<dd>The total memory used by the Reactionner service</dd>
<dt>core.receiver.mem</dt>
<dd>The total memory used by the Receiver service</dd>
<dt>core.scheduler.mem</dt>
<dd>The total memory used by the Scheduler service</dd>
</dl>
</div>
<div class="section" id="managed-objects">
<h2>Managed objects<a class="headerlink" href="#managed-objects" title="Permalink to this headline">¶</a></h2>
<p>Service that hold configuration objects are monitored the objects they manage through the metrics below. Note the the Arbiter holds the whole confugiration, but the schedulers may havo only a portion of it if multible active schedulers are used.</p>
<dl class="docutils">
<dt>core.arbiter.commands</dt>
<dd>The number of Command objects managed by the Arbiter</dd>
<dt>core.arbiter.contactgroups</dt>
<dd>The number of Contactgroup objects managed by the Arbiter</dd>
<dt>core.arbiter.contacts</dt>
<dd>The number of Contact objects managed by the Arbiter</dd>
<dt>core.arbiter.hostgroups</dt>
<dd>The number of Hostgroup objects managed by the Arbiter</dd>
<dt>core.arbiter.hosts</dt>
<dd>The number of Host objects managed by the Arbiter</dd>
<dt>core.arbiter.servicegroups</dt>
<dd>The number of Servicegroup objects managed by the Arbiter</dd>
<dt>core.arbiter.services</dt>
<dd>The number of Service objects managed by the Arbiter</dd>
<dt>core.scheduler.commands</dt>
<dd>The number of Command objects managed by the Scheduler</dd>
<dt>core.scheduler.contactgroups</dt>
<dd>The number of Contactgroup objects managed by the Scheduler</dd>
<dt>core.scheduler.contacts</dt>
<dd>The number of Contact objects managed by the Scheduler</dd>
<dt>core.scheduler.hostgroups</dt>
<dd>The number of Hostgroup objects managed by the Scheduler</dd>
<dt>core.scheduler.hosts</dt>
<dd>The number of Host objects managed by the Scheduler</dd>
<dt>core.scheduler.servicegroups</dt>
<dd>The number of Servicegroup objects managed by the Scheduler</dd>
<dt>core.scheduler.services</dt>
<dd>The number of Service objects managed by the Scheduler</dd>
</dl>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="../08_configobjects/index.html" class="btn btn-neutral float-right" title="Config"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="discovery-with-shinken.html" class="btn btn-neutral" title="Discovery with Shinken"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2013, Shinken Team.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>