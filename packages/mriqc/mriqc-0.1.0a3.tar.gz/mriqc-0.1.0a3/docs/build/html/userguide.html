

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User Guide &mdash; mriqc 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="mriqc 0.1 documentation" href="index.html"/>
        <link rel="next" title="MRIQC measures" href="measures.html"/>
        <link rel="prev" title="Welcome to mriqc’s documentation!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> mriqc
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-mriqc">Running mriqc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#structural-images-smri">Structural images (<abbr title="structural MRI">sMRI</abbr>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#for-the-individual-scan-reports">For the individual scan reports:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-the-group-reports">For the group reports:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#functional-images-fmri">Functional images (<abbr title="functional MRI">fMRI</abbr>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">For the individual scan reports:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">For the group reports:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="measures.html">MRIQC measures</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">mriqc</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>User Guide</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/userguide.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>We have included <code class="docutils literal"><span class="pre">mriqc</span></code> in the PyPi resource</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>pip install mriqc
</pre></div>
</div>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>If you are using a linux distribution with <a class="reference external" href="http://neuro.debian.net/">neurodebian</a>, installation
should be as easy as:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo apt-get fsl afni ants
sudo ln -sf /usr/lib/ants/N4BiasFieldCorrection /usr/local/bin/
</pre></div>
</div>
<p>After installation, make sure that all the necessary binaries are added to the <code class="docutils literal"><span class="pre">$PATH</span></code> environment
variable, for the profile used run <code class="docutils literal"><span class="pre">mriqc</span></code>.</p>
<p>Otherwise, you can follow each software installation guide: <a class="reference external" href="http://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FslInstallation">FSL</a>, <a class="reference external" href="https://afni.nimh.nih.gov/afni/doc/howto/0">AFNI</a>, and <a class="reference external" href="http://stnava.github.io/ANTs/">ANTs</a>.</p>
</div>
<div class="section" id="running-mriqc">
<h2>Running mriqc<a class="headerlink" href="#running-mriqc" title="Permalink to this headline">¶</a></h2>
<p>The software automatically finds the data the input folder if it follows the
<abbr title="brain imaging data structure">BIDS</abbr> standard <a class="reference internal" href="#bids" id="id1">[BIDS]</a>.</p>
<p>Running <code class="docutils literal"><span class="pre">mriqc</span></code> only requires:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mriqc -i ~/Data/bids_dataset -o out/ -w work/
</pre></div>
</div>
<p>Depending on the input images, the resulting outputs will vary as described next.</p>
<blockquote>
<div><table class="docutils citation" frame="void" id="bids" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[BIDS]</a></td><td><a class="reference external" href="http://bids.neuroimaging.io/">Brain Imaging Data Structure</a></td></tr>
</tbody>
</table>
</div></blockquote>
<div class="section" id="structural-images-smri">
<h3>Structural images (<abbr title="structural MRI">sMRI</abbr>)<a class="headerlink" href="#structural-images-smri" title="Permalink to this headline">¶</a></h3>
<p>After all processing has been completed, the designated output directory for the <code class="docutils literal"><span class="pre">mriqc</span></code> workflow will contain a set of pdf
files that contain the relevant reports for the set of scans undergoing
quality assessment. The set of output pdfs includes one pdf file per
input scan in the scan directory, e.g.:
<code class="docutils literal"><span class="pre">anatomical_sub-01.pdf</span></code>, which contains the T1 slice
mosaic and <abbr title="image quality metrics">IQMs</abbr> for that scan. There will also be a group report
pdf in the main output directory, e.g.:
<code class="docutils literal"><span class="pre">anatomical_group.pdf</span></code>, that contains summary metrics for
the entire set of scans.</p>
<div class="section" id="for-the-individual-scan-reports">
<h4>For the individual scan reports:<a class="headerlink" href="#for-the-individual-scan-reports" title="Permalink to this headline">¶</a></h4>
<p><strong>The T1 Anatomical Slice Mosaic</strong>:
This plot in the report for the scan being assessed, e.g.:
<em>Anatomical reoriented, subject sub-01 (session_1_anat_1)</em>
is the rendering of the axial slices from the 3D stack created by the workflow.
This image can be used to eyeball the quality of the overall
signal in the anatomical scan, as it will be obvious if there were any
problem areas where there was signal dropout resulting from a bad shim
or other sources of signal distortion.</p>
<p><strong>Metrics</strong>: The <abbr title="image quality metrics">IQMs</abbr> displayed in the Summary Report, e.g.:
<em>QC measures (subject sub-01_session_1)</em> were computed using the
<code class="docutils literal"><span class="pre">mriqc</span></code> workflow and have been displayed as violin
plots.
The stars in these plots denote where the score for the scans for
this participant fall in the distribution of all scores for scans that
were included as inputs to the anatomical-spatial workflow. If there are
several scans per session for this individual, then the stars will be
displayed adjacent to each other in the violin plot.</p>
</div>
<div class="section" id="for-the-group-reports">
<h4>For the group reports:<a class="headerlink" href="#for-the-group-reports" title="Permalink to this headline">¶</a></h4>
<p>The violin plots included in the group report, e.g.:
<code class="docutils literal"><span class="pre">anatomical_group.pdf</span></code>, are a graphical representation of
the columnar values in the <code class="docutils literal"><span class="pre">aMRIQC.csv</span></code> file that was
created in the main output directory for the workflow. The scores for
each metric described above were aggregated to create the distributions
that were plotted in both the individual and group reports. Hence, the
violin plots in the individual scan reports and the group reports are
identical, except that the group reports do not contain any stars
denoting individual scans. These group reports are intended to provide
the user a means of visually inspecting the overall quality of the
spatial data for that group of anatomical scans.</p>
</div>
</div>
<div class="section" id="functional-images-fmri">
<h3>Functional images (<abbr title="functional MRI">fMRI</abbr>)<a class="headerlink" href="#functional-images-fmri" title="Permalink to this headline">¶</a></h3>
<p>After all processing has been completed, the designated output directory
for the functional workflow will contain a set of pdf files that contain
the relevant reports for the set of scans undergoing quality assessment.
The set of output pdfs includes one pdf file per input scan, e.g.:
<code class="docutils literal"><span class="pre">functional_sub-01.pdf</span></code>, which contains a mosaic plot of the
mean <abbr title="echo-planar imaging">EPI</abbr> volume, a mosaic plot of the
<abbr title="signal-to-noise ration across timesteps">tSNR</abbr> volume, an
<abbr title="frame displacement">FD</abbr> plot, and
<abbr title="image quality metrics">IQMs</abbr> for that scan.
The <abbr title="image quality metrics">IQMs</abbr> are split in two
categories: <em>spatial</em> and <em>temporal</em>. There will also be a group report
pdf in that main output directory, e.g.: <code class="docutils literal"><span class="pre">functional_group.pdf</span></code>, that
contains the summary of <abbr title="image quality metrics">IQMs</abbr> for the entire set of scans.</p>
<div class="section" id="id2">
<h4>For the individual scan reports:<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p><strong>The Mean EPI Slice Mosaic</strong>:
This plot in the report for the scan being assessed, e.g.
<em>Mean EPI image (subject 1_session_1_scan_1)</em>
is the rendering of the axial slices from the 3D stack created by the
workflow.
This mean <abbr title="echo-planar imaging">EPI</abbr> was created by averaging
the <abbr title="blood-oxygen-level dependent">BOLD</abbr> signal intensity values
in each voxel over time.
Hence, a 3-dimensional image was created from the 4-dimensional scan
and was displayed as a slice mosaic.
This image can be used to eyeball the quality of the overall
signal in the scan, as it will be obvious if there were any problem
areas where there was signal dropout resulting from a bad shim or other
sources of signal distortion (such as tattoos which contain metallic or
ferromagnetic compounds, or permanent makeup).</p>
<p><strong>The tSNR Slice Mosaic</strong>:
The image showing the <abbr title="signal-to-noise ration across timesteps">tSNR</abbr> map for a particular scan, e.g.:
<em>tSNR volume, subject sub-01 (session_1_func_1)</em>
is the rendering of the temporal signal-to-noise ratio information from
the scan.
The <abbr title="signal-to-noise ration across timesteps">tSNR</abbr> plot is similar to the mean <abbr title="echo-planar imaging">EPI</abbr> plot in that both metrics reduce the
4-dimensional scan to a representative 3-dimensional volume that is then
split and displayed as a stack of axial (horizontal) slices.
For this <abbr title="signal-to-noise ration across timesteps">tSNR</abbr> plot, the
mean of each voxel&#8217;s timeseries is also computed and is then divided by the
timeseries standard deviation.
Hence, the <abbr title="signal-to-noise ration across timesteps">tSNR</abbr> plot
shows the voxels in which one would expect to have SNR good enough for
statistical analyses. Differences in <abbr title="signal-to-noise ration across timesteps">tSNR</abbr> are particularly important for
comparing the results from region of interest (ROI) analyses, since any
observed functional differences might actually be attributable to
systematic differences in <abbr title="signal-to-noise ratio">SNR</abbr> across the regions being compared. You can
learn more about the utility of <abbr title="signal-to-noise ration across timesteps">tSNR</abbr> plots for <abbr title="functional MRI">fMRI</abbr> analyses
<a class="reference external" href="http://practicalfmri.blogspot.com.es/2011/01/comparing-fmri-protocols.html">here</a>.</p>
<p><strong>The framewise displacement plot</strong>:
The image showing the framewise displacement plot for the scan being
assessed, e.g. <em>FD, subject sub-01 (session_1_func_1)</em>
is the <abbr title="frame displacement">FD</abbr> that occurred throughout the scan.
This is a temporal motion quality assurance metric and tracks head motions over
time, making it easy to determine whether or not the data potentially
suffered from significant corruption due to motion. For instance, it is
possible to detect if the participant&#8217;s head was slowly sinking into the
cushions in the head coil, or whether the participant was possibly
restless or agitated, which would result in several postion changes or
movement spikes. The framewise displacement is a frame-by-frame
representation of the differences between the <abbr title="blood-oxygen-level dependent">BOLD</abbr> signal intensity
value of the <span class="math">\(n\)</span> and <span class="math">\(n+1\)</span> timepoints, the <span class="math">\(n+1\)</span> and <span class="math">\(n+2\)</span>
timepoints, and so on.
The report page for <abbr title="frame displacement">FD</abbr> in the functional scan
includes both this frame-by-frame plot, as well as a histogram that can
be used to visually determine what proportion of timepoints exceeded
some pre-set movement threshold (eg: 0.2 mm).</p>
</div>
<div class="section" id="id3">
<h4>For the group reports:<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>The violin plots included in the group report, e.g.:
<em>QC measures (session_1)</em> are a graphical representation of the
columnar values in the <code class="docutils literal"><span class="pre">fMRIQC.csv</span></code> file that was
created in the main output directory for the workflow. The scores for
each metric described above were aggregated to create the distributions
that were plotted in both the individual and group reports. Hence, the
violin plots in the individual scan reports and the group reports are
identical, except that the group reports do not contain any stars
denoting individual scans. These group reports are intended to provide
the user a means of visually inspecting the overall quality of the
spatial and temporal data for that group of functional scans.</p>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="measures.html" class="btn btn-neutral float-right" title="MRIQC measures" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to mriqc’s documentation!" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Oscar Esteban.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>