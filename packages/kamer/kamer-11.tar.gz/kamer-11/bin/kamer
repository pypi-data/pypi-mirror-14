#!/usr/bin/python3
#
#

""" KAMER - since 2016. """

__copyright__ = "Copyright (c) 2016 Bart Thate, all rights disclaimed."

import sys, os

sys.path.insert(0, os.getcwd())

from meds.misc import parse_cli, shutdown, j
from meds.bots.cli import CLI
from meds.plugs import plugs

from kamer import __version__

import readline

def main():
    parse_cli("KAMER", version=__version__, workdir=j(os.path.expanduser("~"), ".kamer"))
    plugs.init()
    plugs.walk("kamer")
    bot = CLI()
    bot.start()
    
if __name__ == "__main__": 
    try: main()
    except (EOFError, KeyboardInterrupt): print()
    shutdown()
    sys.stdout.flush()
    os._exit(0)
