# General settings
SECRET_KEY: '+er!!4olta#17a=n%uotcazg2ncpl==yjog%1*o-(cr%zys-)!'

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG: True
ALLOWED_HOSTS:
    - "*"

ADDITIONAL_APPS:
    - stacktask.api.v1
    - stacktask.actions.tenant_setup
    - stacktask.notifications.request_tracker

DATABASES:
    default:
        ENGINE: django.db.backends.sqlite3
        NAME: db.sqlite3

LOGGING:
    version: 1
    disable_existing_loggers: False
    handlers:
        file:
            level: INFO
            class: logging.FileHandler
            filename: reg_log.log
    loggers:
        django:
            handlers:
                - file
            level: INFO
            propagate: True
        keystonemiddleware:
            handlers:
                - file
            level: INFO
            propagate: True

EMAIL_SETTINGS:
    EMAIL_BACKEND: django.core.mail.backends.console.EmailBackend

# Application settings:
SHOW_ACTION_ENDPOINTS: False

# setting to control if user name and email are allowed
# to have different values.
USERNAME_IS_EMAIL: True

# Keystone admin credentials:
KEYSTONE:
    username: admin
    password: openstack
    project_name: admin
    # MUST BE V3 API:
    auth_url: http://localhost:5000/v3
DEFAULT_REGION: RegionOne

TOKEN_SUBMISSION_URL: http://192.168.122.160:8080/token/

# time for the token to expire in hours
TOKEN_EXPIRE_TIME: 24

DEFAULT_TASK_SETTINGS:
    emails:
        initial:
            subject: Initial Confirmation
            reply: no-reply@example.com
            template: initial.txt
            # html_template: initial.txt
        # If the related actions 'can' send a token,
        # this field should here.
        token:
            subject: Your Token
            reply: no-reply@example.com
            template: token.txt
            # html_template: token.txt
        completed:
            subject: Task completed
            reply: no-reply@example.com
            template: completed.txt
            # html_template: completed.txt
    notifications:
        standard:
            EmailNotification:
                emails:
                    - example@example.com
                reply: no-reply@example.com
                template: notification.txt
                # html_template: completed.txt
            RTNotification:
                url: http://localhost/rt/REST/1.0/
                queue: helpdesk
                username: example@example.com
                password: password
                template: notification.txt
        error:
            EmailNotification:
                emails:
                    - example@example.com
                reply: no-reply@example.com
                template: notification.txt
                # html_template: completed.txt
            RTNotification:
                url: http://localhost/rt/REST/1.0/
                queue: errors
                username: example@example.com
                password: password
                template: notification.txt

# These are cascading overrides for the default settings:
TASK_SETTINGS:
    create_project:
        # Additonal actions for views:
        # - The order of the actions matters. These will run after the 
        #   default action, in the given order.
        actions:
            - AddAdminToProject
            - DefaultProjectResources
        notifications:
            standard:
                EmailNotification:
                    emails:
                        - signups@example.com
                RTNotification:
                    queue: signups
            error:
                EmailNotification:
                    emails:
                        - signups@example.com
                RTNotification:
                    queue: signups
    invite_user:
        emails:
            # To not send this email, set the value to null
            initial: null
            token:
                subject: Invitation to an OpenStack Project
                template: invite_user_token.txt
            completed:
                subject: Invitation Completed
                template: invite_user_completed.txt
        errors:
            SMTPException:
                notification: acknowledge
                engines: False
    reset_password:
        handle_duplicates: cancel
        emails:
            initial: null
            token:
                subject: Password Reset for OpenStack
                template: password_reset_token.txt
            completed:
                subject: Password Reset Completed
                template: password_reset_completed.txt
        errors:
            SMTPException:
                notification: acknowledge
                engines: False
    force_password:
        handle_duplicates: cancel
        emails:
            initial: null
            token:
                subject: Setup Your OpenStack Password
                template: initial_password_token.txt
            completed:
                subject: New User Setup Completed
                template: initial_password_completed.txt
        errors:
            SMTPException:
                notification: acknowledge
                engines: False
    edit_user:
        emails:
            initial: null
            token: null
        role_blacklist:
            - admin

# Action settings:
ACTION_SETTINGS:
    NewUser:
        allowed_roles:
            - project_admin
            - project_mod
            - heat_stack_owner
            - _member_
    ResetUser:
        blacklisted_roles:
            - admin
    DefaultProjectResources:
        RegionOne:
            network_name: somenetwork
            subnet_name: somesubnet
            router_name: somerouter
            public_network: 3cb50d61-5bce-4c03-96e6-8e262e12bb35
            DNS_NAMESERVERS:
                - 193.168.1.2
                - 193.168.1.3
            SUBNET_CIDR: 192.168.1.0/24

# mapping between roles and managable roles
ROLES_MAPPING:
    admin:
        - project_admin
        - project_mod
        - heat_stack_owner
        - _member_
    project_admin:
        - project_admin
        - project_mod
        - heat_stack_owner
        - _member_
    project_mod:
        - project_mod
        - heat_stack_owner
        - _member_

